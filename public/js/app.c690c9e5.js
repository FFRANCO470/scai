(function(t){function e(e){for(var o,s,n=e[0],l=e[1],c=e[2],d=0,m=[];d<n.length;d++)s=n[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&m.push(r[s][0]),r[s]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],o=!0,s=1;s<a.length;s++){var l=a[s];0!==r[l]&&(o=!1)}o&&(i.splice(e--,1),t=n(n.s=a[0]))}return t}var o={},r={app:0},i=[];function s(t){return n.p+"js/"+({}[t]||t)+"."+{"chunk-2d216214":"02f52b64","chunk-2d216257":"d9b65536","chunk-45d4c016":"462d0ce4"}[t]+".js"}function n(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.e=function(t){var e=[],a=r[t];if(0!==a)if(a)e.push(a[2]);else{var o=new Promise((function(e,o){a=r[t]=[e,o]}));e.push(a[2]=o);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.src=s(t);var c=new Error;i=function(e){l.onerror=l.onload=null,clearTimeout(d);var a=r[t];if(0!==a){if(a){var o=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",c.name="ChunkLoadError",c.type=o,c.request=i,a[1](c)}r[t]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(e)},n.m=t,n.c=o,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var u=c;i.push([1,"chunk-vendors"]),a()})({0:function(t,e){},"034f":function(t,e,a){"use strict";a("85ec")},"0572":function(t,e,a){},1:function(t,e,a){t.exports=a("56d7")},1652:function(t,e,a){"use strict";a("eb8f")},1685:function(t,e,a){"use strict";a("2dde")},1923:function(t,e,a){},"1ad8":function(t,e,a){},"1f23":function(t,e,a){},2:function(t,e){},"2c87":function(t,e,a){"use strict";a("e84c")},"2dde":function(t,e,a){},3:function(t,e){},"3ea2":function(t,e,a){"use strict";a("9973")},"43ff":function(t,e,a){"use strict";a("0572")},4489:function(t,e,a){},4738:function(t,e,a){},"52c2":function(t,e,a){"use strict";a("1ad8")},"56d7":function(t,e,a){"use strict";a.r(e),a.d(e,"eventBus",(function(){return La}));a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("Cabecera"),a("v-main",[a("router-view")],1)],1)},i=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return""!=this.$store.state.token?a("div",[a("v-navigation-drawer",{staticStyle:{opacity:"0.9"},attrs:{app:"",permanent:"",color:"#8732A0"}},[a("v-list",[a("v-list-item",{attrs:{link:""}},[a("v-list-item-content",[a("v-list-item-title",{staticClass:" white--text text-h6 text-sm-left"},[t._v(" "+t._s(this.$store.state.nombreUser)+" ")]),a("v-list-item-subtitle",{staticClass:" white--text text-sm-left"},[t._v(t._s(this.$store.state.rol))])],1)],1)],1),a("v-divider"),a("v-list",["administrador"==this.$store.state.rol||"vendedor"==this.$store.state.rol?[a("v-list-item",{attrs:{to:{path:"/home"}}},[a("v-list-item-action",[a("v-icon",{staticClass:"white--text"},[t._v("mdi-home")])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:" white--text text-sm-left"},[t._v("Inicio")])],1)],1)]:t._e(),"administrador"==this.$store.state.rol||"vendedor"==this.$store.state.rol?[a("v-list-item",{attrs:{to:{path:"/facturacion"}}},[a("v-list-item-action",[a("v-icon",{staticClass:"white--text"},[t._v("mdi-cash-register")])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:" white--text text-sm-left"},[t._v("Facturacion")])],1)],1)]:t._e(),"administrador"==this.$store.state.rol||"vendedor"==this.$store.state.rol?[a("v-list-item",{attrs:{to:{path:"/crearSalida"}}},[a("v-list-item-action",[a("v-icon",{staticClass:"white--text"},[t._v("mdi-forklift")])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:" white--text text-sm-left"},[t._v("crear salida")])],1)],1)]:t._e(),"administrador"==this.$store.state.rol||"vendedor"==this.$store.state.rol?[a("v-list-item",{attrs:{to:{path:"/crearCompra"}}},[a("v-list-item-action",[a("v-icon",{staticClass:"white--text"},[t._v("mdi-dolly ")])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:" white--text text-sm-left"},[t._v("crear compra")])],1)],1)]:t._e(),"administrador"==this.$store.state.rol?t._l(t.items2,(function(e){return a("v-list-group",{key:e.title,staticClass:"white--text",attrs:{"no-action":""},scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-list-item-action",[a("v-icon",{staticClass:"white--text"},[t._v("mdi-file-swap-outline")])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:" white--text text-sm-left"},[t._v("Movimientos")])],1)]},proxy:!0}],null,!0),model:{value:e.active,callback:function(a){t.$set(e,"active",a)},expression:"item.active"}},t._l(e.items,(function(e){return a("v-list-item",{key:e.title,attrs:{to:e.ruta}},[a("v-list-item-content",{staticClass:"white--text"},[a("v-list-item-title",{staticClass:"text-sm-left",domProps:{textContent:t._s(e.title)}})],1)],1)})),1)})):t._e(),"administrador"==this.$store.state.rol?t._l(t.almacen2,(function(e){return a("v-list-group",{key:e.title,staticClass:"white--text",attrs:{"no-action":""},scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-list-item-action",[a("v-icon",{staticClass:"white--text"},[t._v("mdi-sitemap")])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:" white--text text-sm-left"},[t._v("Almacen")])],1)]},proxy:!0}],null,!0),model:{value:e.active,callback:function(a){t.$set(e,"active",a)},expression:"item.active"}},t._l(e.almacen,(function(e){return a("v-list-item",{key:e.title,attrs:{to:e.ruta}},[a("v-list-item-content",{staticClass:"white--text"},[a("v-list-item-title",{staticClass:"text-sm-left",domProps:{textContent:t._s(e.title)}})],1)],1)})),1)})):t._e(),"administrador"==this.$store.state.rol?[a("v-list-item",{attrs:{to:{path:"/clientes"}}},[a("v-list-item-action",[a("v-icon",{staticClass:"white--text"},[t._v("mdi-account-search-outline")])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:" white--text text-sm-left"},[t._v("Clientes")])],1)],1)]:t._e(),"administrador"==this.$store.state.rol?[a("v-list-item",{attrs:{to:{path:"/proveedores"}}},[a("v-list-item-action",[a("v-icon",{staticClass:"white--text"},[t._v("mdi-clipboard-account-outline")])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:" white--text text-sm-left"},[t._v("Proveedores")])],1)],1)]:t._e(),"administrador"==this.$store.state.rol?[a("v-list-item",{attrs:{to:{path:"/usuarios"}}},[a("v-list-item-action",[a("v-icon",{staticClass:"white--text"},[t._v("mdi-account-multiple-outline")])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:" white--text text-sm-left"},[t._v("Usuarios")])],1)],1)]:t._e(),"administrador"==this.$store.state.rol?[a("v-list-item",{attrs:{to:{path:"/informes"}}},[a("v-list-item-action",[a("v-icon",{staticClass:"white--text"},[t._v("mdi-finance")])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:" white--text text-sm-left"},[t._v("Informes")])],1)],1)]:t._e(),"administrador"==this.$store.state.rol?[a("v-list-item",{attrs:{to:{path:"/configuraciones"}}},[a("v-list-item-action",[a("v-icon",{staticClass:"white--text"},[t._v("mdi-wrench")])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:" white--text text-sm-left"},[t._v("Informacion")])],1)],1)]:t._e(),"administrador"==this.$store.state.rol||"vendedor"==this.$store.state.rol?[a("v-list-item",{on:{click:function(e){return t.cerrarSesion()}}},[a("v-list-item-action",[a("v-icon",{staticClass:"white--text"},[t._v("mdi-logout")])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"white--text text-sm-left"},[t._v("Salir")])],1)],1)]:t._e()],2)],1)],1):t._e()},n=[],l={name:"App",data:function(){return{token:"",drawer:"",items2:[{items:[{title:"Info Ventas",ruta:{path:"/movimientos/infoVentas"}},{title:"Info Compras",ruta:{path:"/movimientos/infoCompras"}},{title:"Info Salidas",ruta:{path:"/movimientos/infoSalidas"}}]}],almacen2:[{almacen:[{title:"Articulos",ruta:{path:"/articulos"}},{title:"Categorias",ruta:{path:"/categorias"}},{title:"Marcas",ruta:{path:"/marcas"}},{title:"Separadas",ruta:{path:"/separadas"}}]}]}},methods:{cerrarSesion:function(){this.$store.dispatch("setToken",this.token),this.$router.push("/")}}},c=l,d=a("2877"),u=a("6544"),m=a.n(u),p=a("ce7e"),v=a("132d"),f=a("8860"),h=a("56b0"),x=a("da13"),g=a("1800"),b=a("5d23"),C=a("f774"),_=Object(d["a"])(c,s,n,!1,null,null,null),k=_.exports;m()(_,{VDivider:p["a"],VIcon:v["a"],VList:f["a"],VListGroup:h["a"],VListItem:x["a"],VListItemAction:g["a"],VListItemContent:b["a"],VListItemSubtitle:b["b"],VListItemTitle:b["c"],VNavigationDrawer:C["a"]});var w={name:"App",components:{Cabecera:k}},E=w,y=(a("034f"),a("7496")),S=a("f6c4"),j=Object(d["a"])(E,r,i,!1,null,null,null),I=j.exports;m()(j,{VApp:y["a"],VMain:S["a"]});var D=a("8c4f"),F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-btn",{staticClass:"botonFactura",on:{click:function(e){return t.crearFactura()}}},[a("v-icon",[t._v("mdi-clipboard-account-outline")]),t._v(" Generar facutra ")],1),a("v-card",{staticStyle:{"margin-top":"70px","margin-left":"30px",width:"95%","box-shadow":"0 0 20px #A068B8"}},[a("v-row",[a("v-col",[a("v-checkbox",{staticStyle:{"margin-left":"10px"},attrs:{label:"No guardar cliente "+t.guardarDatos},model:{value:t.guardarDatos,callback:function(e){t.guardarDatos=e},expression:"guardarDatos"}}),a("div",{staticStyle:{"font-family":"'calibri'",color:"#00000","font-size":"20px","text-align":"left","margin-left":"30px","margin-top":"10px"}},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"texto"},[t._v("Tipo de factura:")]),a("v-radio-group",{staticStyle:{"margin-top":"1px"},model:{value:t.tipoFactura,callback:function(e){t.tipoFactura=e},expression:"tipoFactura"}},[a("v-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"Debito",color:"#72128E",value:"debito"}}),a("v-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"Abono sobre abono",color:"#72128E",value:"abonoAbono"}}),a("v-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"Venta",color:"#72128E",value:"venta"}})],1),"debito"==t.tipoFactura||"abonoAbono"==t.tipoFactura?a("v-radio-group",{attrs:{value:t.subTipoFactura=""}}):t._e(),"venta"==t.tipoFactura?a("v-radio-group",{model:{value:t.subTipoFactura,callback:function(e){t.subTipoFactura=e},expression:"subTipoFactura"}},[a("v-radio",{staticStyle:{"margin-left":"15px","margin-top":"-15px"},attrs:{label:"Venta",color:"#72128E",value:"venta"}}),a("v-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"Abono",color:"#72128E",value:"abono"}})],1):t._e()],1)])],1),a("v-col",[a("div",{staticClass:"form-group row comentario"},[a("v-textarea",{attrs:{color:"#72128E",outlined:"",counter:250,label:"Observaciones"},model:{value:t.comentario,callback:function(e){t.comentario=e},expression:"comentario"}})],1)])],1)],1),a("v-card",{staticStyle:{"margin-top":"20px","margin-left":"30px",width:"95%","box-shadow":"0 0 20px #A068B8"}},[a("v-row",[a("v-col",[a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"10px","margin-left":"0px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("No. factura:")]),a("label",{staticClass:"col-sm-2 col-form-label"},[t._v(t._s(t.numFactura))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"margin-left":"10px"}},[t._v("Numero documento:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cliente._id,expression:"cliente._id"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"text",placeholder:""},domProps:{value:t.cliente._id},on:{input:function(e){e.target.composing||t.$set(t.cliente,"_id",e.target.value)}}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"10px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.traerCliente()}}},[a("v-icon",[t._v("mdi-account-search-outline")])],1)],1),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"margin-left":"10px"}},[t._v("Tipo documento:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cliente.tipoDocumento,expression:"cliente.tipoDocumento"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"text",placeholder:""},domProps:{value:t.cliente.tipoDocumento},on:{input:function(e){e.target.composing||t.$set(t.cliente,"tipoDocumento",e.target.value)}}})]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"margin-left":"10px"}},[t._v("Nombre:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cliente.nombre,expression:"cliente.nombre"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"text",placeholder:""},domProps:{value:t.cliente.nombre},on:{input:function(e){e.target.composing||t.$set(t.cliente,"nombre",e.target.value)}}})])]),a("v-col",[a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"10px"}},[a("label",{staticClass:"col-sm-3 col-form-label",staticStyle:{height:"45px"}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"10px"}},[a("label",{staticClass:"col-sm-3 col-form-label"},[t._v("Direccion:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cliente.direccion,expression:"cliente.direccion"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"text",placeholder:""},domProps:{value:t.cliente.direccion},on:{input:function(e){e.target.composing||t.$set(t.cliente,"direccion",e.target.value)}}})]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-3 col-form-label"},[t._v("Ciudad:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cliente.ciudad,expression:"cliente.ciudad"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"text",placeholder:""},domProps:{value:t.cliente.ciudad},on:{input:function(e){e.target.composing||t.$set(t.cliente,"ciudad",e.target.value)}}})]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-3 col-form-label"},[t._v("Telefono:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cliente.telefono,expression:"cliente.telefono"}],staticClass:"form-control mb-4 textoInput",attrs:{type:"text",placeholder:""},domProps:{value:t.cliente.telefono},on:{input:function(e){e.target.composing||t.$set(t.cliente,"telefono",e.target.value)}}})]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-3 col-form-label"},[t._v("Email:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cliente.email,expression:"cliente.email"}],staticClass:"form-control mb-4 textoInput",attrs:{type:"text",placeholder:""},domProps:{value:t.cliente.email},on:{input:function(e){e.target.composing||t.$set(t.cliente,"email",e.target.value)}}})])])],1)],1),a("v-card",{staticStyle:{"margin-top":"40px","margin-left":"30px",width:"95%","box-shadow":"0 0 20px #A068B8",padding:"15px"}},["debito"==t.tipoFactura?[a("v-row",[a("v-col",[a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Saldo anterior:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.saldoAnterior,expression:"saldoAnterior"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.saldoAnterior},on:{input:function(e){e.target.composing||(t.saldoAnterior=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Efectivo:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.efectivo,expression:"efectivo"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.efectivo},on:{input:function(e){e.target.composing||(t.efectivo=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Nequi:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.nequi,expression:"nequi"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.nequi},on:{input:function(e){e.target.composing||(t.nequi=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Tarjeta:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tarjeta,expression:"tarjeta"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.tarjeta},on:{input:function(e){e.target.composing||(t.tarjeta=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Saldo actual:")]),a("label",{staticClass:"col-sm-4 col-form-label"},[t._v(t._s(t.saldoAnterior-t.efectivo-t.nequi-t.tarjeta))])])])],1)]:t._e(),"abonoAbono"==t.tipoFactura?[a("v-row",[a("v-col",[a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Saldo anterior:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.saldoAnterior,expression:"saldoAnterior"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.saldoAnterior},on:{input:function(e){e.target.composing||(t.saldoAnterior=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Abono:")]),a("label",{staticClass:"col-sm-4 col-form-label"},[t._v(t._s(-1*(-t.efectivo-t.nequi-t.tarjeta-t.credito)))])]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Saldo actual:")]),a("label",{staticClass:"col-sm-4 col-form-label"},[t._v(t._s(t.saldoAnterior-t.efectivo-t.nequi-t.tarjeta-t.credito))])])]),a("v-col",[a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Efectivo:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.efectivo,expression:"efectivo"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.efectivo},on:{input:function(e){e.target.composing||(t.efectivo=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Nequi:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.nequi,expression:"nequi"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.nequi},on:{input:function(e){e.target.composing||(t.nequi=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Tarjeta:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tarjeta,expression:"tarjeta"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.tarjeta},on:{input:function(e){e.target.composing||(t.tarjeta=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Credito:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.credito,expression:"credito"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.credito},on:{input:function(e){e.target.composing||(t.credito=e.target.value)}}})])])],1)]:t._e(),"venta"==t.tipoFactura?[a("v-row",[a("v-col",[a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Sub total:")]),a("label",{staticClass:"col-sm-4 col-form-label"},[t._v(t._s(t.totalVendido))])]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Descuento:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.descuento,expression:"descuento"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",placeholder:"$"},domProps:{value:t.descuento},on:{input:function(e){e.target.composing||(t.descuento=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Total:")]),a("label",{staticClass:"col-sm-4 col-form-label"},[t._v(t._s(t.totalVendido-t.descuento))])]),"abono"==t.subTipoFactura?[a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Abono:")]),a("label",{staticClass:"col-sm-4 col-form-label"},[t._v(t._s(-1*(-t.efectivo-t.nequi-t.tarjeta-t.credito)))])]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Saldo:")]),a("label",{staticClass:"col-sm-4 col-form-label"},[t._v(t._s(t.totalVendido-t.descuento-t.efectivo-t.nequi-t.tarjeta-t.credito))])])]:t._e()],2),a("v-col",[a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Efectivo:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.efectivo,expression:"efectivo"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.efectivo},on:{input:function(e){e.target.composing||(t.efectivo=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Nequi:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.nequi,expression:"nequi"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.nequi},on:{input:function(e){e.target.composing||(t.nequi=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Tarjeta:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tarjeta,expression:"tarjeta"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.tarjeta},on:{input:function(e){e.target.composing||(t.tarjeta=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Credito:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.credito,expression:"credito"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.credito},on:{input:function(e){e.target.composing||(t.credito=e.target.value)}}})]),"venta"==t.subTipoFactura?[a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"10px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"}),a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"border-top":"solid purple"}},[t._v(t._s(t.totalVendido-t.descuento-t.efectivo-t.nequi-t.tarjeta-t.credito))])])]:t._e()],2)],1)]:t._e()],2),"abonoAbono"==t.tipoFactura&&t.saldoAnterior-t.efectivo-t.nequi-t.tarjeta-t.credito==0?[a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"20px","margin-left":"10px"}},[a("v-row",[a("v-col",[a("v-data-table",{staticClass:" elevation-15 ancho-tabla",attrs:{headers:t.mostrarArticulosAbonoAbono,items:t.articulosMostradosVenta,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Todos")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}})],1)]},proxy:!0},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.facturar(o)}}},[t._v("mdi-cart ")])]}}],null,!1,1356111168)})],1),a("v-col",[a("v-data-table",{staticClass:" elevation-15 ancho-tabla",attrs:{headers:t.facturaArticulosAbonoAbono,items:t.facturaArticulos},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Facturados")]),a("v-spacer"),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}})],1)]},proxy:!0},{key:"item.cantidad",fn:function(e){return[a("v-text-field",{attrs:{min:"0",name:"quantity",outlined:"",type:"number"},model:{value:e.item.cantidad,callback:function(a){t.$set(e.item,"cantidad",a)},expression:"props.item.cantidad"}})]}},{key:"item.subtotal",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.precio*a.cantidad)+" ")]}},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.desfacturar(o)}}},[t._v("mdi-delete ")])]}}],null,!0)})],1)],1)],1)]:t._e(),"venta"==t.tipoFactura?[a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"20px","margin-left":"10px"}},[a("v-row",[a("v-col",[a("v-data-table",{staticClass:" elevation-15 ancho-tabla",attrs:{headers:t.articulosMostradosVentaTitle,items:t.articulosMostradosVenta,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Todos")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}})],1)]},proxy:!0},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.facturar(o)}}},[t._v("mdi-cart ")])]}}],null,!1,1356111168)})],1),a("v-col",[a("v-data-table",{staticClass:" elevation-15 ancho-tabla",attrs:{headers:t.facturaArticulosTitle,items:t.facturaArticulos},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Facturados")]),a("v-spacer"),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}})],1)]},proxy:!0},{key:"item.cantidad",fn:function(e){return[a("v-text-field",{attrs:{min:"0",name:"quantity",outlined:"",type:"number"},model:{value:e.item.cantidad,callback:function(a){t.$set(e.item,"cantidad",a)},expression:"props.item.cantidad"}})]}},{key:"item.subtotal",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.precio*a.cantidad)+" ")]}},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.desfacturar(o)}}},[t._v("mdi-delete ")])]}}],null,!0)})],1)],1)],1)]:t._e()],2)},A=[],T=(a("b0c0"),a("498a"),a("d81d"),a("a434"),a("fb6a"),a("d3b7"),a("25f0"),a("99af"),a("bc3a")),V=a.n(T),$=a("3d20"),N=a.n($),z=a("8baf"),P={data:function(){return{numFactura:0,guardarDatos:!1,existeCliente:!1,tipoFactura:"",subTipoFactura:"",comentario:"",saldoAnterior:0,efectivo:0,nequi:0,tarjeta:0,credito:0,descuento:0,cliente:{_id:"",tipoDocumento:"",nombre:"",direccion:"",ciudad:"",telefono:"",email:""},search:"",articulosTraidos:[],facturaArticulos:[],articulosMostradosVenta:[],articulosMostradosVentaTitle:[{text:"Referencia",value:"referencia",class:"purple darken-3 white--text"},{text:"Categoria",value:"categoriaName",class:"purple darken-3 white--text"},{text:"Marca",value:"marcaName",class:"purple darken-3 white--text"},{text:"Cantidad",value:"cantidad",class:"purple darken-3 white--text"},{text:"Precio",value:"precio",class:"purple darken-3 white--text"},{text:"Agregar",value:"actions",class:"purple darken-3 white--text"}],facturaArticulosTitle:[{text:"Referencia",value:"referencia",class:"grey darken-4 white--text"},{text:"Categoria",value:"categoriaName",class:"grey darken-4 white--text"},{text:"Cantidad",value:"cantidad",class:"grey darken-4 white--text"},{text:"Precio uni.",value:"precio",class:"grey darken-4 white--text"},{text:"Sub total",value:"subtotal",class:"grey darken-4 white--text",sortable:!1},{text:"Eliminar",value:"actions",class:"grey darken-4 white--text",sortable:!1}],mostrarArticulosAbonoAbono:[{text:"Referencia",value:"referencia",class:"purple darken-3 white--text"},{text:"Categoria",value:"categoriaName",class:"purple darken-3 white--text"},{text:"Marca",value:"marcaName",class:"purple darken-3 white--text"},{text:"Cantidad",value:"cantidad",class:"purple darken-3 white--text"},{text:"Agregar",value:"actions",class:"purple darken-3 white--text"}],facturaArticulosAbonoAbono:[{text:"Referencia",value:"referencia",class:"grey darken-4 white--text"},{text:"Categoria",value:"categoriaName",class:"grey darken-4 white--text"},{text:"Marca",value:"marcaName",class:"grey darken-4 white--text"},{text:"Cantidad",value:"cantidad",class:"grey darken-4 white--text"},{text:"Eliminar",value:"actions",class:"grey darken-4 white--text",sortable:!1}]}},created:function(){this.checkToken(),this.traerNumFactura(),this.traerArticulosActivos()},methods:{checkToken:function(){this.$store.state.token||"/"===this.$router.currentRoute.name||this.$router.push("/")},msjErrores:function(t){N.a.fire({position:"top",icon:"error",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:2e3})},msjExitoso:function(t){N.a.fire({position:"top",icon:"success",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:1e3})},traerCliente:function(){var t=this;if(""===this.cliente._id.trim())return this.msjErrores("Numero de documento obligatorio");var e={headers:{token:this.$store.state.token}};V.a.get("cliente/buscando?numDocumento=".concat(this.cliente._id),e).then((function(e){0==e.data.persona?t.agregarCliente():(t.cliente=e.data.persona,t.existeCliente=!0)})).catch((function(e){e.response.data.msg?(t.msgError=e.response.data.msg,t.msjErrores(t.msgError)):(t.msgError=e.response.data.errors[0].msg,t.msjErrores(t.msgError))}))},agregarCliente:function(){var t=this;N.a.fire({icon:"question",title:"No existe...¿Desea agregar?",confirmButtonText:"Agregar",showDenyButton:!1,showCancelButton:!0}).then((function(e){e.isConfirmed?(t.guardarDatos=!1,t.existeCliente=!1):e.isDenied&&N.a.fire("Changes are not saved","","info")}))},traerNumFactura:function(){var t=this,e={headers:{token:this.$store.state.token}};V.a.get("generalData/venta",e).then((function(e){t.numFactura=e.data.numFactura})).catch((function(e){e.response.data.msg?(t.msgError=e.response.data.msg,t.msjErrores(t.msgError)):(t.msgError=e.response.data.errors[0].msg,t.msjErrores(t.msgError))}))},traerArticulosActivos:function(){var t=this,e={headers:{token:this.$store.state.token}};V.a.get("articulo/activos",e).then((function(e){t.articulosTraidos=e.data.articulo,t.meterArticulos(t.articulosTraidos)})).catch((function(e){console.log(e.response),e.response.data.msg?(t.msgError=e.response.data.msg,console.log(e.response.data.msg),t.msgError=e.response.data.msg,t.msjErrores(t.msgError)):(console.log(e.response),t.msgError=e.response.data.errors[0].msg,t.msjErrores(t.msgError))}))},meterArticulos:function(t){var e=[];t.map((function(t){e.push({_id:t._id,categoriaName:t.categoria.nombre,categoria:t.categoria._id,marcaName:t.marca.nombre,marca:t.marca._id,referencia:t.referencia,cantidad:1,precio:t.precio,costo:t.costo})})),this.articulosMostradosVenta=e},facturar:function(t){this.editedIndex=this.articulosMostradosVenta.indexOf(t),this.facturaArticulos.push(t),this.articulosMostradosVenta.splice(this.editedIndex,1)},desfacturar:function(t){this.editedIndex=this.facturaArticulos.indexOf(t),this.articulosMostradosVenta.push(t),this.facturaArticulos.splice(this.editedIndex,1)},crearFactura:function(){var t=this;if(""===this.tipoFactura)return this.msjErrores("Tipo de factura obligatorio");if("venta"==this.tipoFactura){if(""==this.subTipoFactura)return this.msjErrores("SubTipo de factura obligatorio");if(0===this.facturaArticulos.length)return this.msjErrores("Artuculos obligatorios");var e=-1*(-this.efectivo-this.nequi-this.tarjeta-this.credito),a=this.totalVendido-this.descuento;if("venta"==this.subTipoFactura&&e!=a)return this.msjErrores("Saldos desiguales")}if("debito"==this.tipoFactura){if(0==this.saldoAnterior||""==this.saldoAnterior)return this.msjErrores("Saldo anterior obligatorio");if(0==this.efectivo&&0==this.nequi&&0==this.tarjeta||""==this.efectivo&&""==this.nequi&&""==this.tarjeta)return this.msjErrores("Completar almenos efectivo o nequi o tarjeta")}if("abonoAbono"==this.tipoFactura){if(0==this.saldoAnterior||""==this.saldoAnterior)return this.msjErrores("Saldo anterior obligatorio");if(0==this.efectivo&&0==this.nequi&&0==this.tarjeta&&0==this.credito||""==this.efectivo&&""==this.nequi&&""==this.tarjeta&&""==this.credito)return this.msjErrores("Completar almenos efectivo o nequi o tarjeta o credito");var o=this.saldoAnterior-this.efectivo-this.nequi-this.tarjeta-this.credito;if(0==o&&0===this.facturaArticulos.length)return this.msjErrores("Artuculos obligatorios")}if(this.comentario.length>250)return this.msjErrores("Comentario mayor a 250 caracteres");if(!this.guardarDatos){if(""===this.cliente._id)return this.msjErrores("Numero de documento obligatorio");if(""===this.cliente.nombre)return this.msjErrores("Nombre obligatorio")}console.log("enviar"),console.log(this.facturaArticulos),console.log("enviar");var r=this,i={headers:{token:this.$store.state.token}};V.a.post("venta",{usuario:this.$store.state.id,numFactura:this.numFactura,tipoFactura:this.tipoFactura,subTipoFactura:this.subTipoFactura,comentario:this.comentario,guardarDatos:this.guardarDatos,existeCliente:this.existeCliente,persona:this.cliente,saldoAnterior:this.saldoAnterior,efectivo:this.efectivo,nequi:this.nequi,tarjeta:this.tarjeta,credito:this.credito,descuento:this.descuento,totalPrecio:this.totalVendido,totalCosto:this.totalCosto,articulos:this.facturaArticulos},i).then((function(e){console.log(e),t.msjExitoso("estoy facturando"),t.traerNumFactura(),r.traerArticulosActivos(),r.crearPDF()})).catch((function(e){console.log(e.response),e.response.data.msg?(t.msgError=e.response.data.msg,console.log(e.response.data.msg),t.msjErrores(t.msgError)):(console.log(e.response),t.msgError=e.response.data.errors[0].msg,t.msjErrores(t.msgError))}))},limpiarTodo:function(){this.cliente={},this.existeCliente=!1,this.guardarDatos=!1,this.tipoFactura="",this.subTipoFactura="",this.saldoAnterior=0,this.efectivo=0,this.nequi=0,this.tarjeta=0,this.credito=0,this.descuento=0,this.facturaArticulos=[],this.comentario="",console.log("limiop")},crearPDF:function(){var t=10,e=this.cliente._id.slice(0,13),a=this.cliente.tipoDocumento.slice(0,9),o=this.cliente.nombre.slice(0,16),r=this.cliente.telefono.slice(0,14),i=this.cliente.direccion.slice(0,14),s=this.cliente.ciudad.slice(0,17),n=new Date,l=n.getDate(),c=["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],d=c[n.getMonth()],u=n.getFullYear(),m=n.getHours(),p=n.getMinutes(),v=84,f=[];if("debito"==this.tipoFactura){var h=parseInt(this.efectivo)+parseInt(this.nequi)+parseInt(this.tarjeta);f=[{referencia:" ",cantidad:"1",categoria:"Debito",precio:" ",total:h.toString()},{referencia:" ",cantidad:" ",categoria:" ",precio:" ",total:" "},{referencia:" ",cantidad:" ",categoria:" ",precio:" ",total:" "},{referencia:" ",cantidad:" ",categoria:" ",precio:" ",total:4},{referencia:" ",cantidad:" ",categoria:" ",precio:"Total",total:h.toString()}],v=120}else if("abonoAbono"==this.tipoFactura){var x=this.facturaArticulos;console.log(x),0!=x.length?x.map((function(t){f.push({referencia:t.referencia,categoria:t.categoriaName,cantidad:t.cantidad.toString(),precio:" ",total:" "})})):f.push({referencia:" ",cantidad:" ",categoria:" ",precio:" ",total:" "},{referencia:" ",cantidad:" ",categoria:" ",precio:" ",total:" "},{referencia:" ",cantidad:" ",categoria:" ",precio:" ",total:" "});var g=this.saldoAnterior.toString(),b=parseInt(this.efectivo)+parseInt(this.nequi)+parseInt(this.tarjeta)+parseInt(this.credito),C=parseInt(g)-(parseInt(this.efectivo)+parseInt(this.nequi)+parseInt(this.tarjeta)+parseInt(this.credito));f.push({referencia:"",cantidad:"",categoria:"",precio:"saldo A.",total:g},{referencia:"",cantidad:"",categoria:"",precio:"abono ",total:b.toString()},{referencia:"",cantidad:"",categoria:0,precio:"saldo ",total:C.toString()}),v+=40;var _=f.length;v+=8*(_-5)}else{this.facturaArticulos.map((function(t){f.push({referencia:t.referencia,categoria:t.categoriaName,cantidad:t.cantidad.toString(),precio:t.precio.toString(),total:(t.cantidad*t.precio).toString()})}));var k=(this.totalVendido-this.descuento).toString();if("venta"==this.subTipoFactura){f.push({referencia:"",cantidad:"",categoria:"",precio:"subtotal",total:this.totalVendido.toString()},{referencia:"",cantidad:"",categoria:"",precio:"descuento",total:this.descuento.toString()},{referencia:"",cantidad:"",categoria:0,precio:"total ",total:k}),v+=30;var w=f.length;v+=8*(w-3)}else{var E=parseInt(this.efectivo)+parseInt(this.nequi)+parseInt(this.tarjeta)+parseInt(this.credito),y=parseInt(k)-(parseInt(this.efectivo)+parseInt(this.nequi)+parseInt(this.tarjeta)+parseInt(this.credito));f.push({referencia:"",cantidad:"",categoria:"",precio:"subtotal",total:this.totalVendido.toString()},{referencia:"",cantidad:"",categoria:"",precio:"descuento",total:this.descuento.toString()},{referencia:"",cantidad:"",categoria:"",precio:"total ",total:k},{referencia:"",cantidad:"",categoria:"",precio:"abono ",total:E.toString()},{referencia:"",cantidad:"",categoria:0,precio:"saldo ",total:y.toString()}),v+=40;var S=f.length;v+=8*(S-5)}}var j=this.$store.state.nombreUser.slice(0,13),I=this.comentario.slice(0,251),D=2.9*(v+61),F=new z["a"];F.beginFormObject(0,0,200,D),F.setFont("helvetica","italic"),F.text("The Scala",20,8,{charSpace:.4,maxWidth:97}),F.setFontSize(18),F.setFont("helvetica","bold"),F.setFontSize(t),F.text("GINA PAOLA CEPEDA VERGARA",4,15,{charSpace:.2}),F.setFontSize(t),F.text("NIT: 52515303-7",4,20,{charSpace:.2}),F.text("REGIMEN SIMPLIFICADO",4,25,{charSpace:.2}),F.text("C.C EL PUENTE L.154",4,30,{charSpace:.2}),F.text("SAN GIL(SDER)",4,35,{charSpace:.2}),F.text("CELULAR : 311 893 8204",4,40,{charSpace:.2}),F.text("TELEFONO: 607 724 1748",4,45,{charSpace:.2}),F.text("NOMBRE: ".concat(o),4,55,{charSpace:.3}),F.text("TIPO DOCUMENTO: ".concat(a),4,60,{charSpace:.3}),F.text("DOCUMENTO: ".concat(e),4,65,{charSpace:.3}),F.text("TELEFONO: ".concat(r),4,70,{charSpace:.3}),F.text("DIRECCION: ".concat(i),4,75,{charSpace:.3}),F.text("CIUDAD: ".concat(s),4,80,{charSpace:.3}),F.line(1,81,68,81),F.text("Factura Venta  ".concat(this.numFactura),4,85,{charSpace:.3}),F.text("".concat(l,"-").concat(d,"-").concat(u,"    ").concat(m,":").concat(p,"   "),4,90,{charSpace:.3});var A=[{align:"center",width:22,id:"referencia",name:"referencia",prompt:"Refer"},{align:"center",width:18,id:"categoria",name:"categoria",prompt:"Desc."},{align:"center",width:13,id:"cantidad",name:"cantidad",prompt:"Cant"},{align:"center",width:18,id:"precio",name:"precio",prompt:"Vr Unit"},{align:"center",width:19.5,id:"total",name:"total",prompt:"Vr total"}];F.table(0,95,f,A,{fontName:"Arial",fontSize:"9",autoSize:!1,headerBackgroundColor:"#FFFFFF",padding:.3}),F.setFont("helvetica","bold"),F.setFontSize(t),F.text("Vendedor: ".concat(j),15,v+5,{charSpace:.2}),F.text("Metodo de pago",20,v+10,{charSpace:.3});var T=[];T="debito"==this.tipoFactura?[{efectivo:this.efectivo.toString(),tarjeta:this.tarjeta.toString(),nequi:this.nequi.toString(),credito:"0"}]:[{efectivo:this.efectivo.toString(),tarjeta:this.tarjeta.toString(),nequi:this.nequi.toString(),credito:this.credito.toString()}];var V=[{align:"center",width:22,id:"efectivo",name:"efectivo",prompt:"Efectivo"},{align:"center",width:22,id:"tarjeta",name:"tarjeta",prompt:"Tarjeta"},{align:"center",width:22,id:"nequi",name:"nequi",prompt:"Nequi"},{align:"center",width:25,id:"credito",name:"credito",prompt:"Sistecredito"}];F.table(0,v+15,T,V,{fontName:"Arial",fontSize:"9",autoSize:!1,headerBackgroundColor:"#FFFFFF",padding:.3}),F.text("Observaciones",28,v+30,{charSpace:.3}),F.text("".concat(I),4,v+35,{maxWidth:"52",charSpace:.3}),F.roundedRect(0,0,68,v+60,0,0),F.output("dataurlnewwindow")}},computed:{totalVendido:function(){return this.facturaArticulos.reduce((function(t,e){return t+parseInt(e.cantidad)*parseInt(e.precio)}),0)},totalCosto:function(){return this.facturaArticulos.reduce((function(t,e){return t+parseInt(e.cantidad)*parseInt(e.costo)}),0)}}},q=P,M=(a("43ff"),a("8336")),R=a("b0af"),O=a("ac7c"),B=a("62ad"),U=a("8fea"),L=a("67b6"),G=a("43a6"),H=a("0fd9"),K=a("2fa4"),W=a("8654"),Y=a("a844"),J=a("71d9"),X=a("2a7f"),Q=Object(d["a"])(q,F,A,!1,null,"5e06ceed",null),Z=Q.exports;m()(Q,{VBtn:M["a"],VCard:R["a"],VCheckbox:O["a"],VCol:B["a"],VDataTable:U["a"],VDivider:p["a"],VIcon:v["a"],VRadio:L["a"],VRadioGroup:G["a"],VRow:H["a"],VSpacer:K["a"],VTextField:W["a"],VTextarea:Y["a"],VToolbar:J["a"],VToolbarTitle:X["a"]});var tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-main",[a("v-form",{staticClass:"form-registro mx-auto mt-15",attrs:{width:"500"}},[a("v-card-title",{staticClass:"titulo"},[t._v("Iniciar Sesion")]),a("v-card-text",[a("v-text-field",{staticClass:"form-input",attrs:{id:"caja",label:"Usuario",color:"#72128E",required:"",rules:t.nameRules,"prepend-icon":"mdi-account-circle"},model:{value:t.nombre,callback:function(e){t.nombre=e},expression:"nombre"}}),a("v-text-field",{staticClass:"form-input",attrs:{id:"caja",label:"Contraseña",color:"#72128E",required:"",rules:t.passRules,type:t.mostrarContrasena?"text":"password","prepend-icon":"mdi-lock","append-icon":t.mostrarContrasena?"mdi-eye":"mdi-eye-off"},on:{"click:append":function(e){t.mostrarContrasena=!t.mostrarContrasena},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login()}},model:{value:t.pass,callback:function(e){t.pass=e},expression:"pass"}})],1),a("v-card-actions",[a("input",{staticClass:"boton",attrs:{type:"button",value:"Iniciar"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login()},click:function(e){return t.login()}}})])],1)],1),a("div",{staticClass:"burbujas"},[a("div",{staticClass:"burbuja"}),a("div",{staticClass:"burbuja"}),a("div",{staticClass:"burbuja"}),a("div",{staticClass:"burbuja"}),a("div",{staticClass:"burbuja"}),a("div",{staticClass:"burbuja"}),a("div",{staticClass:"burbuja"}),a("div",{staticClass:"burbuja"}),a("div",{staticClass:"burbuja"}),a("div",{staticClass:"burbuja"})])],1)},et=[],at={data:function(){return{mostrarContrasena:!1,nombre:"",pass:"",msgError:"",nameRules:[function(t){return!!t||"Email requerido"},function(t){return t.length<=50||"Email supero los 50 caracteres"}],passRules:[function(t){return!!t||"Contraseña requerida"},function(t){return t.length<=10||"Contraseña supera los 10 caracteres"}]}},methods:{msjAlerta:function(t){N.a.fire({position:"top",icon:"error",title:t,showConfirmButton:!1,background:"black",timer:3e3})},login:function(){var t=this;this.nombre&&this.pass?V.a.post("usuario/login",{nombreUser:this.nombre,password:this.pass}).then((function(e){t.$store.dispatch("setToken",e.data.token),t.$store.dispatch("setRol",e.data.rol),t.$store.dispatch("setId",e.data.id),t.$store.dispatch("setNameUser",e.data.nombreUser),t.$router.push("/home")})).catch((function(e){e.response.data.msg?(t.msgError=e.response.data.msg,t.msjAlerta(t.msgError)):(t.msgError=e.response.data.errors[0].msg,t.msjAlerta(t.msgError))})):(this.msgError="Usuario / contraseña  oblicagorios",this.msjAlerta(this.msgError))}}},ot=at,rt=(a("1652"),a("99d9")),it=a("4bd4"),st=Object(d["a"])(ot,tt,et,!1,null,"1c42cc20",null),nt=st.exports;m()(st,{VApp:y["a"],VCardActions:rt["a"],VCardText:rt["b"],VCardTitle:rt["c"],VForm:it["a"],VMain:S["a"],VTextField:W["a"]});var lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-app",[a("v-row",[a("v-col",["administrador"==this.$store.state.rol?[a("v-btn",{staticClass:"botonNew",staticStyle:{width:"150px",height:"150px"},attrs:{to:{path:"/facturacion"}}},[a("v-col",[a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-icon",{attrs:{size:"50",color:"#72128E"}},[t._v("mdi-cash-register")])],1)],1),a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("span",{staticClass:"textoBoton"},[t._v("FACTURACION")])])],1)],1)],1)]:t._e()],2),a("v-col",["administrador"==this.$store.state.rol?[a("v-btn",{staticClass:"botonNew",staticStyle:{width:"150px",height:"150px"},attrs:{to:{path:"/crearSalida"}}},[a("v-col",[a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-icon",{attrs:{size:"50",color:"#72128E"}},[t._v("mdi-forklift")])],1)],1),a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("span",{staticClass:"textoBoton"},[t._v("CREAR SALIDA")])])],1)],1)],1)]:t._e()],2),a("v-col",["administrador"==this.$store.state.rol?[a("v-btn",{staticClass:"botonNew",staticStyle:{width:"150px",height:"150px"},attrs:{to:{path:"/crearCompra"}}},[a("v-col",[a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-icon",{attrs:{size:"50",color:"#72128E"}},[t._v("mdi-dolly")])],1)],1),a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("span",{staticClass:"textoBoton"},[t._v("CREAR COMPRA")])])],1)],1)],1)]:t._e()],2),a("v-col",["administrador"==this.$store.state.rol?[a("v-btn",{staticClass:"botonNew",staticStyle:{width:"150px",height:"150px"},attrs:{to:{path:"/movimientos"}}},[a("v-col",[a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-icon",{attrs:{size:"50",color:"#72128E"}},[t._v("mdi-file-swap-outline")])],1)],1),a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("span",{staticClass:"textoBoton"},[t._v("MOVIMIENTOS")])])],1)],1)],1)]:t._e()],2)],1),a("v-row",[a("v-col",["administrador"==this.$store.state.rol?[a("v-btn",{staticClass:"botonNew",staticStyle:{width:"150px",height:"150px"},attrs:{to:{path:"/articulos"}}},[a("v-col",[a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-icon",{attrs:{size:"50",color:"#72128E"}},[t._v("mdi-tshirt-crew-outline")])],1)],1),a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("span",{staticClass:"textoBoton"},[t._v("ARTICULOS")])])],1)],1)],1)]:t._e()],2),a("v-col",["administrador"==this.$store.state.rol?[a("v-btn",{staticClass:"botonNew",staticStyle:{width:"150px",height:"150px"},attrs:{to:{path:"/categorias"}}},[a("v-col",[a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-icon",{attrs:{size:"50",color:"#72128E"}},[t._v("mdi-package-variant")])],1)],1),a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("span",{staticClass:"textoBoton"},[t._v("CATEGORIAS")])])],1)],1)],1)]:t._e()],2),a("v-col",["administrador"==this.$store.state.rol?[a("v-btn",{staticClass:"botonNew",staticStyle:{width:"150px",height:"150px"},attrs:{to:{path:"/marcas"}}},[a("v-col",[a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-icon",{attrs:{size:"50",color:"#72128E"}},[t._v("mdi-label-outline")])],1)],1),a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("span",{staticClass:"textoBoton"},[t._v("MARCAS")])])],1)],1)],1)]:t._e()],2),a("v-col",["administrador"==this.$store.state.rol?[a("v-btn",{staticClass:"botonNew",staticStyle:{width:"150px",height:"150px"},attrs:{to:{path:"/separadas"}}},[a("v-col",[a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-icon",{attrs:{size:"50",color:"#72128E"}},[t._v("mdi-warehouse")])],1)],1),a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("span",{staticClass:"textoBoton"},[t._v("SEPARADAS")])])],1)],1)],1)]:t._e()],2)],1),a("v-row",[a("v-col",["administrador"==this.$store.state.rol?[a("v-btn",{staticClass:"botonNew",staticStyle:{width:"150px",height:"150px"},attrs:{to:{path:"/clientes"}}},[a("v-col",[a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-icon",{attrs:{size:"50",color:"#72128E"}},[t._v("mdi-account-search-outline")])],1)],1),a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("span",{staticClass:"textoBoton"},[t._v("CLIENTES")])])],1)],1)],1)]:t._e()],2),a("v-col",["administrador"==this.$store.state.rol?[a("v-btn",{staticClass:"botonNew",staticStyle:{width:"150px",height:"150px"},attrs:{to:{path:"/proveedores"}}},[a("v-col",[a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-icon",{attrs:{size:"50",color:"#72128E"}},[t._v("mdi-clipboard-account-outline")])],1)],1),a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("span",{staticClass:"textoBoton"},[t._v("PROVEEDORES")])])],1)],1)],1)]:t._e()],2),a("v-col",["administrador"==this.$store.state.rol?[a("v-btn",{staticClass:"botonNew",staticStyle:{width:"150px",height:"150px"},attrs:{to:{path:"/usuarios"}}},[a("v-col",[a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-icon",{attrs:{size:"50",color:"#72128E"}},[t._v("mdi-account-multiple-outline")])],1)],1),a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("span",{staticClass:"textoBoton"},[t._v("USUARIOS")])])],1)],1)],1)]:t._e()],2),a("v-col",["administrador"==this.$store.state.rol?[a("v-btn",{staticClass:"botonNew",staticStyle:{width:"150px",height:"150px"},attrs:{to:{path:"/configuraciones"}}},[a("v-col",[a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-icon",{attrs:{size:"50",color:"#72128E"}},[t._v("mdi-wrench")])],1)],1),a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("span",{staticClass:"textoBoton"},[t._v("CONFIGURACION")])])],1)],1)],1)]:t._e()],2)],1)],1)],1)},ct=[],dt={created:function(){this.checkToken()},methods:{checkToken:function(){this.$store.state.token||"/"===this.$router.currentRoute.name||this.$router.push("/")}}},ut=dt,mt=(a("a098"),a("0e8f")),pt=Object(d["a"])(ut,lt,ct,!1,null,"4a24fd99",null),vt=pt.exports;m()(pt,{VApp:y["a"],VBtn:M["a"],VCol:B["a"],VFlex:mt["a"],VIcon:v["a"],VRow:H["a"]});var ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-app",[a("v-container",{attrs:{fluid:""}},[1==t.muestra?[a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"32px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Articulos")])]),a("v-spacer"),a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",staticStyle:{"margin-right":"30px","margin-left":"20px","margin-top":"50px"},attrs:{depressed:"",dark:""},on:{click:function(e){return t.exportExcel()}}},[a("v-icon",{attrs:{size:"25"}},[t._v("mdi-file-excel-outline")]),t._v("Exportar ")],1),a("div",{staticStyle:{"margin-top":"50px","margin-right":"30px"}},[a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",attrs:{depressed:"",dark:""},on:{click:function(e){return t.reset()}}},[a("v-icon",{attrs:{size:"20"}},[t._v("mdi-plus")]),t._v(" Nuevo ")],1)],1)],1),a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Categoria")])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"40px","margin-left":"30px"}},[a("v-autocomplete",{staticStyle:{width:"250px","margin-left":"10px"},attrs:{solo:"",items:t.categoriasFiltro},model:{value:t.categoriaFiltrada,callback:function(e){t.categoriaFiltrada=e},expression:"categoriaFiltrada"}})],1),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Marca")])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"40px","margin-left":"30px"}},[a("v-autocomplete",{staticStyle:{width:"250px","margin-left":"10px"},attrs:{solo:"",items:t.marcasFiltro},model:{value:t.marcaFiltrada,callback:function(e){t.marcaFiltrada=e},expression:"marcaFiltrada"}})],1),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"30px","margin-left":"30px"}},[a("v-btn",{staticStyle:{"margin-right":"10px","margin-left":"50px","margin-top":"20px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.filtarCateAndMarca()}}},[a("v-icon",{attrs:{size:"40"}},[t._v("mdi-magnify")])],1)],1)]),a("v-data-table",{staticClass:" elevation-15 ",staticStyle:{"margin-top":"50px"},attrs:{headers:t.columnas,items:t.articulos,objetos:[t.categorias,t.marcas],search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar por categoria, marca o referencia","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.totalCosto",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.cantDisponibles*a.costo)+" ")]}},{key:"item.totalPrecio",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.cantDisponibles*a.precio)+" ")]}},{key:"item.estado",fn:function(e){var o=e.item;return[o.estado?a("div",[a("span",{staticClass:"black--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])]}},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",on:{click:function(e){return t.editar(o)}}},[t._v(" mdi-pencil ")]),a("v-icon",{staticClass:"mr-2",on:{click:function(e){return t.eliminar(o)}}},[t._v(" mdi-delete ")]),a("v-icon",{staticClass:"mr-2",on:{click:function(e){return t.cambioPage(2,o._id)}}},[t._v("mdi-file-search-outline")]),o.estado?[a("v-icon",{staticClass:"mr-2",on:{click:function(e){return t.activarDesactivarItem(2,o)}}},[t._v(" mdi-check ")])]:[a("v-icon",{on:{click:function(e){return t.activarDesactivarItem(1,o)}}},[t._v(" mdi-block-helper ")])]]}}],null,!0)}),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v("Articulo")])]),a("v-card-text",[a("v-form",[a("v-row",[a("v-col",[a("v-autocomplete",{attrs:{rules:t.rulesCategoria,items:t.categorias,label:"Categoria",required:""},model:{value:t.editedItem.categoria,callback:function(e){t.$set(t.editedItem,"categoria",e)},expression:"editedItem.categoria"}})],1)],1),a("v-row",[a("v-col",[a("v-autocomplete",{attrs:{rules:t.rulesMarca,items:t.marcas,label:"Marcas",required:""},model:{value:t.editedItem.marca,callback:function(e){t.$set(t.editedItem,"marca",e)},expression:"editedItem.marca"}})],1)],1),a("v-row",[a("v-col",[a("v-text-field",{attrs:{rules:t.rulesReferencia,counter:50,label:"Referencia",required:""},model:{value:t.editedItem.referencia,callback:function(e){t.$set(t.editedItem,"referencia",e)},expression:"editedItem.referencia"}})],1)],1),a("v-row",[a("v-col",[a("v-text-field",{attrs:{type:"number",min:"0",rules:t.rulesNum,label:"Cantidad",required:""},model:{value:t.editedItem.cantDisponibles,callback:function(e){t.$set(t.editedItem,"cantDisponibles",e)},expression:"editedItem.cantDisponibles"}})],1),a("v-col",[a("v-text-field",{attrs:{type:"number",min:"0",rules:t.rulesNum,label:"Costo",required:""},model:{value:t.editedItem.costo,callback:function(e){t.$set(t.editedItem,"costo",e)},expression:"editedItem.costo"}})],1),a("v-col",[a("v-text-field",{attrs:{type:"number",min:"0",rules:t.rulesNum,label:"Precio",required:""},model:{value:t.editedItem.precio,callback:function(e){t.$set(t.editedItem,"precio",e)},expression:"editedItem.precio"}})],1)],1),a("v-btn",{staticClass:"mr-4",attrs:{color:"blue darken-1",text:""},on:{click:t.guardar}},[t._v(" Guardar ")]),a("v-btn",{staticClass:"mr-4",attrs:{color:"blue darken-1",text:""},on:{click:t.reset}},[t._v(" Limpiar ")]),a("v-btn",{staticClass:"mr-4",attrs:{color:"red darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Cancelar ")])],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog2,callback:function(e){t.dialog2=e},expression:"dialog2"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v("Editar articulo")])]),a("v-card-text",[a("v-form",[a("v-row",[a("v-autocomplete",{attrs:{rules:t.rulesCategoria,label:"Categoria",items:t.categorias},model:{value:t.editedItem.categoria,callback:function(e){t.$set(t.editedItem,"categoria",e)},expression:"editedItem.categoria"}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"25px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarCategoria(t.editedItem.categoria)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("v-row",[a("v-autocomplete",{attrs:{rules:t.rulesMarca,label:"Marca",items:t.marcas},model:{value:t.editedItem.marca,callback:function(e){t.$set(t.editedItem,"marca",e)},expression:"editedItem.marca"}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"25px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarMarca(t.editedItem.marca)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("v-row",[a("v-text-field",{attrs:{rules:t.rulesReferencia,label:"Referencia"},model:{value:t.editedItem.referencia,callback:function(e){t.$set(t.editedItem,"referencia",e)},expression:"editedItem.referencia"}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"25px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarReferencia(t.editedItem.referencia)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("v-row",[a("v-text-field",{attrs:{rules:t.rulesNum,label:"Costo"},model:{value:t.editedItem.costo,callback:function(e){t.$set(t.editedItem,"costo",e)},expression:"editedItem.costo"}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"25px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarCosto(t.editedItem.costo)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("v-row",[a("v-text-field",{attrs:{rules:t.rulesNum,label:"Precio"},model:{value:t.editedItem.precio,callback:function(e){t.$set(t.editedItem,"precio",e)},expression:"editedItem.precio"}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"25px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarPrecio(t.editedItem.precio)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("v-row",[a("v-text-field",{attrs:{rules:t.rulesNum,label:"Disponibles"},model:{value:t.editedItem.cantDisponibles,callback:function(e){t.$set(t.editedItem,"cantDisponibles",e)},expression:"editedItem.cantDisponibles"}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"25px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarDisponibles(t.editedItem.cantDisponibles)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("v-row",[a("v-text-field",{attrs:{rules:t.rulesNum,label:"Separadas"},model:{value:t.editedItem.cantSeparadas,callback:function(e){t.$set(t.editedItem,"cantSeparadas",e)},expression:"editedItem.cantSeparadas"}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"25px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarAlmacenadas(t.editedItem.cantSeparadas)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("v-row",[a("v-text-field",{attrs:{rules:t.rulesNum,label:"Vendieron"},model:{value:t.editedItem.cantVendieron,callback:function(e){t.$set(t.editedItem,"cantVendieron",e)},expression:"editedItem.cantVendieron"}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"25px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarVendieron(t.editedItem.cantVendieron)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("v-row",[a("v-text-field",{attrs:{rules:t.rulesNum,label:"Compradas"},model:{value:t.editedItem.cantCompradas,callback:function(e){t.$set(t.editedItem,"cantCompradas",e)},expression:"editedItem.cantCompradas"}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"25px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarCompradas(t.editedItem.cantCompradas)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("v-row",[a("v-text-field",{attrs:{rules:t.rulesNum,label:"Salieron"},model:{value:t.editedItem.cantSalieron,callback:function(e){t.$set(t.editedItem,"cantSalieron",e)},expression:"editedItem.cantSalieron"}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"25px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarSalieron(t.editedItem.cantSalieron)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("v-btn",{staticClass:"mr-4",attrs:{color:"red darken-1",text:""},on:{click:function(e){t.dialog2=!1}}},[t._v(" Cancelar ")])],1)],1)],1)],1)]:t._e(),2==t.muestra?[a("div",[a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-btn",{staticClass:"mb-4",staticStyle:{"margin-left":"50px","margin-top":"50px"},attrs:{icon:"",color:"#AF7AC5"},on:{click:function(e){return t.cambioPage(1,!1)}}},[a("v-icon",{attrs:{size:"50"}},[t._v("mdi-arrow-left-bold-circle-outline")])],1)],1),a("v-row",[a("v-col",[a("v-card",{staticStyle:{"margin-top":"20px","box-shadow":"0 0 20px #A068B8",width:"100%"}},[a("div",[a("v-layout",{attrs:{"justify-left":""}},[a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"text-align":"left"}},[t._v("Categoria:")]),a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"text-align":"left"}},[t._v(t._s(this.articulosDetallesCategoria))])])],1),a("div",[a("v-layout",{attrs:{"justify-left":""}},[a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"text-align":"left"}},[t._v("Marca:")]),a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"text-align":"left"}},[t._v(t._s(this.articulosDetallesMarca))])])],1),a("div",[a("v-layout",{attrs:{"justify-left":""}},[a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"text-align":"left"}},[t._v("Referencia:")]),a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"text-align":"left"}},[t._v(t._s(this.articuloDetallesReferencia))])])],1)])],1),a("v-col",[a("v-card",{staticStyle:{"margin-top":"20px","box-shadow":"0 0 20px #A068B8",width:"100%"}},[a("div",[a("v-layout",{attrs:{"justify-left":""}},[a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"text-align":"left"}},[t._v("Precio unidad:")]),a("div",{staticStyle:{width:"150px"}},[a("v-text-field",{model:{value:t.articulosDetallesPrecio,callback:function(e){t.articulosDetallesPrecio=e},expression:"articulosDetallesPrecio"}})],1),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"10px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarPrecio(t.articulosDetallesPrecio)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1)],1),a("div",[a("v-layout",{attrs:{"justify-left":""}},[a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"text-align":"left"}},[t._v("Costo unidad:")]),a("div",{staticStyle:{width:"150px"}},[a("v-text-field",{model:{value:t.articulosDetallesCosto,callback:function(e){t.articulosDetallesCosto=e},expression:"articulosDetallesCosto"}})],1),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"10px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarCosto(t.articulosDetallesCosto)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1)],1),a("div",[a("v-layout",{attrs:{"justify-left":""}},[a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"text-align":"left"}},[t._v("Rentabilidad unidad:")]),a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"text-align":"left"}},[t._v("$ "+t._s(t.articulosDetallesRentabilidad)+" %")])])],1)])],1)],1),a("v-row",[a("table",{staticClass:"table1"},[a("thead",[a("tr",[a("th"),a("th",{attrs:{scope:"col"}},[t._v("Unidades")]),a("th",{attrs:{scope:"col"}},[t._v("Total Costo")]),a("th",{attrs:{scope:"col"}},[t._v("Total Precio")])])]),a("tbody",[a("tr",[a("th",{attrs:{scope:"row"}},[t._v("Disponibles")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.articulosDetallesDisponible,expression:"articulosDetallesDisponible"}],staticClass:"form-control mb-3 llenarTexto",attrs:{type:"text"},domProps:{value:t.articulosDetallesDisponible},on:{input:function(e){e.target.composing||(t.articulosDetallesDisponible=e.target.value)}}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"0px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarDisponibles(t.articulosDetallesDisponible)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("td",[t._v(" "+t._s(t.articulosDetallesDisponible*t.articulosDetallesCosto)+" ")]),a("td",[t._v(" "+t._s(t.articulosDetallesDisponible*t.articulosDetallesPrecio)+" ")])]),a("tr",[a("th",{attrs:{scope:"row"}},[t._v("Separadas")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.articulosDetallesSeparadas,expression:"articulosDetallesSeparadas"}],staticClass:"form-control mb-3 llenarTexto",attrs:{type:"text"},domProps:{value:t.articulosDetallesSeparadas},on:{input:function(e){e.target.composing||(t.articulosDetallesSeparadas=e.target.value)}}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"0px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarDisponibles(t.articulosDetallesSeparadas)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("td",[t._v(" "+t._s(t.articulosDetallesSeparadas*t.articulosDetallesCosto)+" ")]),a("td",[t._v(" "+t._s(t.articulosDetallesSeparadas*t.articulosDetallesPrecio)+" ")])]),a("tr",[a("th",{attrs:{scope:"row"}},[t._v("Vendieron")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.articulosDetallesVendidas,expression:"articulosDetallesVendidas"}],staticClass:"form-control mb-3 llenarTexto",attrs:{type:"text"},domProps:{value:t.articulosDetallesVendidas},on:{input:function(e){e.target.composing||(t.articulosDetallesVendidas=e.target.value)}}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"0px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarDisponibles(t.articulosDetallesVendidas)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("td",[t._v(" "+t._s(t.articulosDetallesVendidas*t.articulosDetallesCosto)+" ")]),a("td",[t._v(" "+t._s(t.articulosDetallesVendidas*t.articulosDetallesPrecio)+" ")])]),a("tr",[a("th",{attrs:{scope:"row"}},[t._v("Compradas")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.articulosDetallesCompradas,expression:"articulosDetallesCompradas"}],staticClass:"form-control mb-3 llenarTexto",attrs:{type:"text"},domProps:{value:t.articulosDetallesCompradas},on:{input:function(e){e.target.composing||(t.articulosDetallesCompradas=e.target.value)}}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"0px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarDisponibles(t.articulosDetallesCompradas)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("td",[t._v(" "+t._s(t.articulosDetallesCompradas*t.articulosDetallesCosto)+" ")]),a("td",[t._v(" "+t._s(t.articulosDetallesCompradas*t.articulosDetallesPrecio)+" ")])]),a("tr",[a("th",{attrs:{scope:"row"}},[t._v("Salieron")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.articulosDetallesSalieron,expression:"articulosDetallesSalieron"}],staticClass:"form-control mb-3 llenarTexto",attrs:{type:"text"},domProps:{value:t.articulosDetallesSalieron},on:{input:function(e){e.target.composing||(t.articulosDetallesSalieron=e.target.value)}}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"0px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarDisponibles(t.articulosDetallesSalieron)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("td",[t._v(" "+t._s(t.articulosDetallesSalieron*t.articulosDetallesCosto)+" ")]),a("td",[t._v(" "+t._s(t.articulosDetallesSalieron*t.articulosDetallesPrecio)+" ")])])])])])],1)],1)]:t._e()],2)],1)],1)},ht=[],xt=(a("b680"),a("1146")),gt=a.n(xt),bt={data:function(){return{muestra:1,search:"",dialog:!1,dialog2:!1,categoriaFiltrada:"",marcaFiltrada:"",categoriasFiltro:[],marcasFiltro:[],categorias:[],marcas:[],articulos:[],columnas:[{text:"Categoria",value:"categoria.nombre",class:"purple darken-3 white--text"},{text:"Marca",value:"marca.nombre",class:"purple darken-3 white--text"},{text:"Referencia",value:"referencia",class:"purple darken-3 white--text"},{text:"disponibles",value:"cantDisponibles",class:"purple darken-3 white--text"},{text:"Costo",value:"costo",class:"purple darken-3 white--text"},{text:"Precio",value:"precio",class:"purple darken-3 white--text"},{text:"Total costo",value:"totalCosto",class:"purple darken-3 white--text"},{text:"Total precio",value:"totalPrecio",class:"purple darken-3 white--text"},{text:"Estado",value:"estado",class:"purple darken-3 white--text"},{text:"Opciones",value:"actions",class:"purple darken-3 white--text",width:"150px",sortable:!1}],rulesCategoria:[function(t){return!!t||"Requerido"}],rulesMarca:[function(t){return!!t||"Requerido"}],rulesReferencia:[function(t){return!!t||"Requiredo"},function(t){return t&&t.length<=50||"Max 50 caracteres"}],rulesNum:[function(t){return!!t||"Requerido"},function(t){return t>=0||"Numero negativo"}],articulosDetallesPrecio:0,articulosDetallesCosto:0,articulosDetallesDisponible:0,articulosDetallesSeparadas:0,articulosDetallesCompradas:0,articulosDetallesVendidas:0,articulosDetallesSalieron:0,articulosDetallesCategoria:"",articulosDetallesMarca:"",articuloDetallesReferencia:"",editedItem:{categoria:"",marca:"",referencia:"",precio:"",costo:"",estado:"",cantDisponibles:"",cantSeparadas:"",cantVendieron:"",cantCompradas:"",cantSalieron:""}}},created:function(){this.checkToken(),this.traerCategorias(),this.traerMarcas()},methods:{checkToken:function(){this.$store.state.token||"/"===this.$router.currentRoute.name||this.$router.push("/")},msjError:function(t){N.a.fire({position:"top",icon:"error",title:t,showConfirmButton:!1,timer:2e3,backdrop:"rgba(55,55,55,0.8)"})},msjExisto:function(t){N.a.fire({position:"top",icon:"success",title:t,showConfirmButton:!1,timer:2e3,backdrop:"rgba(55,55,55,0.8)"})},cambioPage:function(t,e){1==t?(this.muestra=1,this.borrarArticuloDetalle()):(this.muestra=2,this.articulos=[],this.traerArticulo(e))},traerCategorias:function(){var t=this,e=this,a=[],o={headers:{token:this.$store.state.token}};V.a.get("categoria/activas",o).then((function(o){a=o.data.categoria,a.length>0?a.map((function(t){e.categoriasFiltro.push({text:t.nombre,value:t._id}),e.categorias.push({text:t.nombre,value:t._id})})):t.msjExisto("No hay categorias activas"),e.categoriasFiltro.unshift("")})).catch((function(t){if(t.response.data.msg){var e=t.response.data.msg;this.msjError(e)}else{var a=t.response.data.errors[0].msg;this.msjError(a)}}))},traerMarcas:function(){var t=this,e=this,a=[],o={headers:{token:this.$store.state.token}};V.a.get("marca/activas",o).then((function(o){a=o.data.marca,a.length>0?a.map((function(t){e.marcasFiltro.push({text:t.nombre,value:t._id}),e.marcas.push({text:t.nombre,value:t._id})})):t.msjExisto("No hay marcas activas"),e.marcasFiltro.unshift("")})).catch((function(t){if(t.response.data.msg){var e=t.response.data.msg;this.msjError(e)}else{var a=t.response.data.errors[0].msg;this.msjError(a)}}))},filtarCateAndMarca:function(){var t=this,e={headers:{token:this.$store.state.token}};V.a.post("articulo/categoriaAndMarca",{categoria:this.categoriaFiltrada,marca:this.marcaFiltrada},e).then((function(e){t.articulos=e.data.articulo,t.categoriaFiltrada="",t.marcaFiltrada="",0==t.articulos.length&&t.msjExisto("No hay articulos con esos caracteres")})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},traerArticulo:function(t){var e=this,a={headers:{token:this.$store.state.token}};V.a.get("/articulo/articulo/".concat(t),a).then((function(t){e.limpiarArticulo(t.data.articulo)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},limpiarArticulo:function(t){this.id=t._id,this.articulosDetallesPrecio=t.precio,this.articulosDetallesCosto=t.costo,this.articulosDetallesDisponible=t.cantDisponibles,this.articulosDetallesSeparadas=t.cantSeparadas,this.articulosDetallesCompradas=t.cantCompradas,this.articulosDetallesVendidas=t.cantVendieron,this.articulosDetallesSalieron=t.cantSalieron,this.articulosDetallesCategoria=t.categoria.nombre,this.articulosDetallesMarca=t.marca.nombre,this.articuloDetallesReferencia=t.referencia},borrarArticuloDetalle:function(){this.id="",this.articulosDetallesPrecio=0,this.articulosDetallesCosto=0,this.articulosDetallesDisponible=0,this.articulosDetallesSeparadas=0,this.articulosDetallesCompradas=0,this.articulosDetallesVendidas=0,this.articulosDetallesSalieron=0,this.articulosDetallesCategoria="",this.articulosDetallesMarca="",this.articuloDetallesReferencia=""},reset:function(){this.dialog=!0,this.editedItem.categoria="",this.editedItem.marca="",this.editedItem.referencia="",this.editedItem.precio="",this.editedItem.costo="",this.editedItem.cantDisponibles="",this.editedItem.cantSeparadas="",this.editedItem.cantVendieron="",this.editedItem.cantCompradas="",this.editedItem.cantSalieron=""},editar:function(t){this.id=t._id,this.editedItem.categoria=t.categoria,this.editedItem.marca=t.marca,this.editedItem.referencia=t.referencia,this.editedItem.costo=t.costo,this.editedItem.precio=t.precio,this.editedItem.cantDisponibles=t.cantDisponibles,this.editedItem.cantSeparadas=t.cantSeparadas,this.editedItem.cantCompradas=t.cantCompradas,this.editedItem.cantSalieron=t.cantSalieron,this.editedItem.cantVendieron=t.cantVendieron,this.dialog2=!0},guardar:function(){var t=this,e={headers:{token:this.$store.state.token}},a=this;return""==this.editedItem.categoria||""==this.editedItem.marca||""==this.editedItem.referencia||""==this.editedItem.precio||""==this.editedItem.costo||""==this.editedItem.cantDisponibles?this.msjError("faltan campos"):this.editedItem.referencia.trim().length>50?this.msjError("Referencia superior a 50 carácteres"):void V.a.post("articulo",{categoria:this.editedItem.categoria,marca:this.editedItem.marca,referencia:this.editedItem.referencia,precio:this.editedItem.precio,costo:this.editedItem.costo,cantDisponibles:this.editedItem.cantDisponibles},e).then((function(e){t.msjExisto(e.data.msg),a.reset(),t.dialog=!1})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},activarDesactivarItem:function(t,e){var a=this,o=e._id,r=e.categoria._id,i=e.marca._id;if(2==t){var s={headers:{token:this.$store.state.token}};V.a.put("articulo/desactivar/".concat(o),{},s).then((function(t){a.msjExisto(t.data.msg),a.despuesActualiar(r,i)})).catch((function(t){if(t.response.data.msg){var e=t.response.data.msg;a.msjError(e)}else{var o=t.response.data.errors[0].msg;a.msjError(o)}}))}else if(1==t){var n={headers:{token:this.$store.state.token}};V.a.put("articulo/activar/".concat(o),{},n).then((function(t){a.msjExisto(t.data.msg),a.despuesActualiar(r,i)})).catch((function(t){if(t.response.data.msg){var e=t.response.data.msg;a.msjError(e)}else{var o=t.response.data.errors[0].msg;a.msjError(o)}}))}},despuesActualiar:function(t,e){var a=this,o={headers:{token:this.$store.state.token}};V.a.post("articulo/categoriaAndMarca",{categoria:t,marca:e},o).then((function(t){a.articulos=t.data.articulo,a.categoriaFiltrada="",a.marcaFiltrada="",0==a.articulos.length&&a.msjExisto("No hay articulos con esos caracteres")})).catch((function(t){if(t.response.data.msg){var e=t.response.data.msg;a.msjError(e)}else{var o=t.response.data.errors[0].msg;a.msjError(o)}}))},eliminar:function(t){var e=this,a=t._id,o={headers:{token:this.$store.state.token}};V.a.delete("articulo/".concat(a),o).then((function(a){e.msjExisto(a.data.msg);var o=e.articulos.indexOf(t);e.articulos.splice(o,1)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarCategoria:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};V.a.put("articulo/actualizarCategoria/".concat(a),{categoria:t},o).then((function(t){e.msjExisto(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarMarca:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};V.a.put("articulo/actualizarMarca/".concat(a),{marca:t},o).then((function(t){e.msjExisto(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarReferencia:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};V.a.put("articulo/actualizarReferencia/".concat(a),{referencia:t},o).then((function(t){e.msjExisto(t.data.msg)})).catch((function(t){if(console.log(t),t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarCosto:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};V.a.put("articulo/actualizarCosto/".concat(a),{costo:t},o).then((function(t){e.msgError=t.data.msg,e.msjExisto(e.msgError)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarPrecio:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};V.a.put("articulo/actualizarPrecio/".concat(a),{precio:t},o).then((function(t){e.msjExisto(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarDisponibles:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};V.a.put("articulo/actualizarCantDisponible/".concat(a),{cantDisponibles:t},o).then((function(t){e.msjExisto(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarAlmacenadas:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};V.a.put("articulo/actualizarCantSeparadas/".concat(a),{cantSeparadas:t},o).then((function(t){e.msjExisto(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarVendieron:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};V.a.put("articulo/actualizarCantVendieron/".concat(a),{cantVendieron:t},o).then((function(t){e.msjExisto(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarCompradas:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};V.a.put("articulo/actualizarCantCompradas/".concat(a),{cantCompradas:t},o).then((function(t){e.msjExisto(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarSalieron:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};V.a.put("articulo/actualizarCantSalieron/".concat(a),{cantSalieron:t},o).then((function(t){e.msjExisto(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},exportExcel:function(){var t=[],e=this;if(e.articulos.length>1e3)return this.msjError("Max. 1000 datos");e.articulos.map((function(e){t.push({categoria:e.categoria.nombre,marca:e.marca.nombre,referencia:e.referencia,costo:e.costo,precio:e.precio,cantDisponibles:e.cantDisponibles,cantVendieron:e.cantVendieron,cantSeparadas:e.cantSeparadas,cantSalieron:e.cantSalieron,cantCompradas:e.cantCompradas})}));var a=gt.a.utils.json_to_sheet(t),o=gt.a.utils.book_new(),r="articulos";gt.a.utils.book_append_sheet(o,a,r),gt.a.writeFile(o,"".concat(r,".xlsx"))}},computed:{articulosDetallesRentabilidad:function(){var t=100*(this.articulosDetallesPrecio/this.articulosDetallesCosto-1);return t=t.toFixed(2),t}}},Ct=bt,_t=(a("9824"),a("c6a6")),kt=a("a523"),wt=a("169a"),Et=a("a722"),yt=Object(d["a"])(Ct,ft,ht,!1,null,"0ffa0b17",null),St=yt.exports;m()(yt,{VApp:y["a"],VAutocomplete:_t["a"],VBtn:M["a"],VCard:R["a"],VCardText:rt["b"],VCardTitle:rt["c"],VCol:B["a"],VContainer:kt["a"],VDataTable:U["a"],VDialog:wt["a"],VForm:it["a"],VIcon:v["a"],VLayout:Et["a"],VRow:H["a"],VSpacer:K["a"],VTextField:W["a"],VToolbar:J["a"]});var jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-app",[a("v-container",{attrs:{fluid:""}},[[a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"32px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Categorias")])]),a("v-spacer"),a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",staticStyle:{"margin-right":"30px","margin-left":"20px","margin-top":"50px"},attrs:{depressed:"",dark:""},on:{click:function(e){return t.exportExcel()}}},[a("v-icon",{attrs:{size:"25"}},[t._v("mdi-file-excel-outline")]),t._v("Exportar ")],1),a("div",{staticStyle:{"margin-top":"50px","margin-right":"30px"}},[a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",attrs:{depressed:"",dark:""},on:{click:function(e){return t.agregarCategoria()}}},[a("v-icon",{attrs:{size:"20"}},[t._v("mdi-plus")]),t._v(" Nuevo ")],1)],1)],1),a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Buscar:")])]),a("div",{staticStyle:{color:"#72128E",width:"450px","font-size":"20px","text-align":"center","margin-top":"40px","margin-left":"30px"}},[a("v-text-field",{staticStyle:{width:"450px"},attrs:{solo:"",label:"Traer categorias por nombre. (Ejemplo:categoria1)"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.obtenerCategorias()}},model:{value:t.buscarCategoriaLetras,callback:function(e){t.buscarCategoriaLetras=e},expression:"buscarCategoriaLetras"}})],1),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("v-btn",{staticStyle:{"margin-left":"10px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.obtenerCategorias()}}},[a("v-icon",{attrs:{size:"40"}},[t._v("mdi-magnify")])],1)],1)])],[a("v-data-table",{staticClass:"elevation-15 ",staticStyle:{"margin-top":"50px"},attrs:{headers:t.columnas,items:t.categorias,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar por nombre","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.estado",fn:function(e){var o=e.item;return[o.estado?a("div",[a("span",{staticClass:"black--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])]}},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editar(o)}}},[t._v("mdi-pencil")]),o.estado?[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.activarDesactivarItem(2,o)}}},[t._v("mdi-check")])]:[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarItem(1,o)}}},[t._v(" mdi-block-helper ")])]]}}],null,!0)}),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v("Categorias")])]),a("v-card-text",[a("v-text-field",{attrs:{counter:50,label:"Nombre",rules:t.rulesNombre,required:""},model:{value:t.editedItem.nombre,callback:function(e){t.$set(t.editedItem,"nombre",e)},expression:"editedItem.nombre"}}),a("v-btn",{staticClass:"mr-4",attrs:{color:"blue darken-1",text:""},on:{click:t.guardar}},[t._v(" Guardar ")]),a("v-btn",{staticClass:"mr-4",attrs:{color:"blue darken-1",text:""},on:{click:t.reset}},[t._v(" Limpiar ")]),a("v-btn",{staticClass:"mr-4",attrs:{color:"red darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Cancelar ")])],1)],1)],1)]],2)],1)],1)},It=[],Dt={data:function(){return{buscarCategoriaLetras:"",dialog:!1,msgError:"",search:"",bd:0,rulesNombre:[function(t){return!!t||"Required."},function(t){return t&&t.length<=50||"Max 3 caracteres"}],columnas:[{text:"Nombre",value:"nombre",class:"purple darken-3 white--text"},{text:"Estado",value:"estado",class:"purple darken-3 white--text",width:"30%"},{text:"Opciones",value:"actions",class:"purple darken-3 white--text",width:"10%",sortable:!1}],categorias:[],editedItem:{nombre:""}}},created:function(){this.checkToken()},methods:{checkToken:function(){this.$store.state.token||"/"===this.$router.currentRoute.name||this.$router.push("/")},msjError:function(t){N.a.fire({position:"top",icon:"error",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:3e3})},msjExisto:function(t){N.a.fire({position:"top",icon:"success",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:2e3})},agregarCategoria:function(){this.dialog=!0,this.editedItem.nombre=""},reset:function(){this.editedItem.nombre=""},editar:function(t){this.bd=1,this.id=t._id,this.editedItem.nombre=t.nombre,this.dialog=!0},obtenerCategorias:function(){var t=this,e=this.buscarCategoriaLetras.trim(),a={headers:{token:this.$store.state.token}};V.a.get("categoria?value=".concat(e),a).then((function(e){t.categorias=e.data.categoria,0==t.categorias.length&&t.msjExisto("No hay categorias")})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},obtenerCategoriasActualizada:function(t){var e=this,a={headers:{token:this.$store.state.token}};V.a.get("categoria?value=".concat(t),a).then((function(t){e.categorias=t.data.categoria,0==e.categorias.length&&e.msjExisto("No hay categorias")})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},guardar:function(){var t=this;if(0==this.bd){var e={headers:{token:this.$store.state.token}},a=this;""===this.editedItem.nombre.trim()?this.msjError("Nombre obligatorio"):this.editedItem.nombre.length>50?this.msjError("Supero los 50 carácteres"):V.a.post("categoria",{nombre:this.editedItem.nombre},e).then((function(e){t.msjExisto(e.data.msg),a.obtenerCategoriasActualizada(t.editedItem.nombre),a.reset(),t.dialog=!1})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))}else{var o={headers:{token:this.$store.state.token}},r=this;""===this.editedItem.nombre.trim()?this.msjError("Nombre obligatorio"):this.editedItem.nombre.length>50?this.msjError("Supero los 50 carácteres"):V.a.put("categoria/actualizar/".concat(this.id),{nombre:this.editedItem.nombre},o).then((function(e){t.msjExisto(e.data.msg),r.obtenerCategoriasActualizada(t.editedItem.nombre),t.dialog=!1})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))}},activarDesactivarItem:function(t,e){var a=this,o=e._id,r=e.nombre;if(2==t){var i=this,s={headers:{token:this.$store.state.token}};V.a.put("categoria/desactivar/".concat(o),{},s).then((function(t){i.obtenerCategoriasActualizada(r),a.msjExisto(t.data.msg)})).catch((function(t){if(t.response.data.msg){var e=t.response.data.msg;a.msjError(e)}else{var o=t.response.data.errors[0].msg;a.msjError(o)}}))}else if(1==t){var n=this,l={headers:{token:this.$store.state.token}};V.a.put("categoria/activar/".concat(o),{},l).then((function(t){n.obtenerCategoriasActualizada(r),a.msjExisto(t.data.msg)})).catch((function(t){if(t.response.data.msg){var e=t.response.data.msg;a.msjError(e)}else{var o=t.response.data.errors[0].msg;a.msjError(o)}}))}},exportExcel:function(){var t=this,e=[];if(t.categorias.length>1e3)return this.msjError("Max. 1000 datos");t.categorias.map((function(t){e.push({categoria:t.nombre,estado:t.estado})}));var a=gt.a.utils.json_to_sheet(e),o=gt.a.utils.book_new(),r="Categorias";gt.a.utils.book_append_sheet(o,a,r),gt.a.writeFile(o,"".concat(r,".xlsx"))}}},Ft=Dt,At=Object(d["a"])(Ft,jt,It,!1,null,null,null),Tt=At.exports;m()(At,{VApp:y["a"],VBtn:M["a"],VCard:R["a"],VCardText:rt["b"],VCardTitle:rt["c"],VContainer:kt["a"],VDataTable:U["a"],VDialog:wt["a"],VIcon:v["a"],VRow:H["a"],VSpacer:K["a"],VTextField:W["a"],VToolbar:J["a"]});var Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-app",[a("v-container",{attrs:{fluid:""}},[[a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"32px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Marcas")])]),a("v-spacer"),a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",staticStyle:{"margin-right":"30px","margin-left":"20px","margin-top":"50px"},attrs:{depressed:"",dark:""},on:{click:function(e){return t.exportExcel()}}},[a("v-icon",{attrs:{size:"25"}},[t._v("mdi-file-excel-outline")]),t._v("Exportar ")],1),a("div",{staticStyle:{"margin-top":"50px","margin-right":"30px"}},[a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",attrs:{depressed:"",dark:""},on:{click:function(e){return t.agregarMarca()}}},[a("v-icon",{attrs:{size:"20"}},[t._v("mdi-plus")]),t._v(" Nuevo ")],1)],1)],1),a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Buscar:")])]),a("div",{staticStyle:{color:"#72128E",width:"450px","font-size":"20px","text-align":"center","margin-top":"40px","margin-left":"30px"}},[a("v-text-field",{staticStyle:{width:"450px"},attrs:{solo:"",label:"Traer marcas por nombre. (Ejemplo:marca1)"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.obtenerMarcas()}},model:{value:t.buscarMarcasLetras,callback:function(e){t.buscarMarcasLetras=e},expression:"buscarMarcasLetras"}})],1),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("v-btn",{staticStyle:{"margin-left":"10px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.obtenerMarcas()}}},[a("v-icon",{attrs:{size:"40"}},[t._v("mdi-magnify")])],1)],1)])],[a("v-data-table",{staticClass:"elevation-15 ",staticStyle:{"margin-top":"50px"},attrs:{headers:t.columnas,items:t.marcas,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar por nombre","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.estado",fn:function(e){var o=e.item;return[o.estado?a("div",[a("span",{staticClass:"black--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])]}},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editar(o)}}},[t._v("mdi-pencil")]),o.estado?[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.activarDesactivarItem(2,o)}}},[t._v("mdi-check")])]:[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarItem(1,o)}}},[t._v(" mdi-block-helper ")])]]}}],null,!0)})],[a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v("Marcas")])]),a("v-card-text",[a("v-text-field",{attrs:{counter:50,label:"Nombre",rules:t.rulesNombre,required:""},model:{value:t.editedItem.nombre,callback:function(e){t.$set(t.editedItem,"nombre",e)},expression:"editedItem.nombre"}}),a("v-btn",{staticClass:"mr-4",attrs:{color:"blue darken-1",text:""},on:{click:t.guardar}},[t._v(" Guardar ")]),a("v-btn",{staticClass:"mr-4",attrs:{color:"blue darken-1",text:""},on:{click:t.reset}},[t._v(" Limpiar ")]),a("v-btn",{staticClass:"mr-4",attrs:{color:"red darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Cancelar ")])],1)],1)],1)]],2)],1)],1)},$t=[],Nt={data:function(){return{buscarMarcasLetras:"",dialog:!1,msgError:"",search:"",bd:0,rulesNombre:[function(t){return!!t||"Required."},function(t){return t&&t.length<=50||"Max 3 caracteres"}],columnas:[{text:"Nombre",value:"nombre",class:"purple darken-3 white--text"},{text:"Estado",value:"estado",class:"purple darken-3 white--text",width:"30%"},{text:"Opciones",value:"actions",class:"purple darken-3 white--text",width:"10%",sortable:!1}],marcas:[],editedItem:{nombre:""}}},created:function(){this.checkToken()},methods:{checkToken:function(){this.$store.state.token||"/"===this.$router.currentRoute.name||this.$router.push("/")},msjError:function(t){N.a.fire({position:"top",icon:"error",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:3e3})},msjExisto:function(t){N.a.fire({position:"top",icon:"success",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:2e3})},agregarMarca:function(){this.dialog=!0,this.editedItem.nombre=""},obtenerMarcas:function(){var t=this,e=this.buscarMarcasLetras.trim(),a={headers:{token:this.$store.state.token}};V.a.get("marca?value=".concat(e),a).then((function(e){t.marcas=e.data.marca,0==t.marcas.length&&t.msjExisto("No hay marcas")})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},obtenerMarcaActualizada:function(t){var e=this,a={headers:{token:this.$store.state.token}};V.a.get("marca?value=".concat(t),a).then((function(t){e.marcas=t.data.marca,0==e.marcas.length&&e.msjExisto("No hay marcas")})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},reset:function(){this.editedItem.nombre=""},editar:function(t){this.bd=1,this.id=t._id,this.editedItem.nombre=t.nombre,this.dialog=!0},guardar:function(){var t=this;if(0==this.bd){var e={headers:{token:this.$store.state.token}},a=this;""===this.editedItem.nombre.trim()?this.msjError("Nombre obligatorio"):this.editedItem.nombre.length>50?this.msjError("Supero los 50 carácteres"):V.a.post("marca",{nombre:this.editedItem.nombre},e).then((function(e){t.msjExisto(e.data.msg),a.obtenerMarcaActualizada(t.editedItem.nombre),a.reset(),t.dialog=!1})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))}else{var o={headers:{token:this.$store.state.token}},r=this;""===this.editedItem.nombre.trim()?this.msjError("Nombre obligatorio"):this.editedItem.nombre.length>50?this.msjError("Supero los 50 carácteres"):V.a.put("marca/actualizar/".concat(this.id),{nombre:this.editedItem.nombre},o).then((function(e){t.msjExisto(e.data.msg),r.obtenerMarcaActualizada(t.editedItem.nombre),t.dialog=!1})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))}},activarDesactivarItem:function(t,e){var a=this,o=e._id,r=e.nombre;if(2==t){var i=this,s={headers:{token:this.$store.state.token}};V.a.put("marca/desactivar/".concat(o),{},s).then((function(t){i.obtenerMarcaActualizada(r),i.msjExisto(t.data.msg)})).catch((function(t){if(t.response.data.msg){var e=t.response.data.msg;a.msjError(e)}else{var o=t.response.data.errors[0].msg;a.msjError(o)}}))}else if(1==t){var n=this,l={headers:{token:this.$store.state.token}};V.a.put("marca/activar/".concat(o),{},l).then((function(t){n.obtenerMarcaActualizada(r),n.msjExisto(t.data.msg)})).catch((function(t){if(t.response.data.msg){var e=t.response.data.msg;a.msjError(e)}else{var o=t.response.data.errors[0].msg;a.msjError(o)}}))}},exportExcel:function(){var t=this,e=[];if(t.marcas.length>1e3)return this.msjError("Max. 1000 datos");t.marcas.map((function(t){e.push({marcas:t.nombre,estado:t.estado})}));var a=gt.a.utils.json_to_sheet(e),o=gt.a.utils.book_new(),r="Marcas";gt.a.utils.book_append_sheet(o,a,r),gt.a.writeFile(o,"".concat(r,".xlsx"))}}},zt=Nt,Pt=Object(d["a"])(zt,Vt,$t,!1,null,null,null),qt=Pt.exports;m()(Pt,{VApp:y["a"],VBtn:M["a"],VCard:R["a"],VCardText:rt["b"],VCardTitle:rt["c"],VContainer:kt["a"],VDataTable:U["a"],VDialog:wt["a"],VIcon:v["a"],VRow:H["a"],VSpacer:K["a"],VTextField:W["a"],VToolbar:J["a"]});var Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",{attrs:{fluid:""}},[[a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"32px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Unidades separadas")])]),a("v-spacer"),a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",staticStyle:{"margin-right":"30px","margin-left":"20px","margin-top":"50px"},attrs:{depressed:"",dark:""},on:{click:function(e){return t.exportExcel()}}},[a("v-icon",{attrs:{size:"25"}},[t._v("mdi-file-excel-outline")]),t._v("Exportar ")],1)],1),a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Categoria")])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"40px","margin-left":"30px"}},[a("v-autocomplete",{staticStyle:{width:"250px","margin-left":"10px"},attrs:{solo:"",items:t.categoriasFiltro},model:{value:t.categoriaFiltrada,callback:function(e){t.categoriaFiltrada=e},expression:"categoriaFiltrada"}})],1),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Marca")])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"40px","margin-left":"30px"}},[a("v-autocomplete",{staticStyle:{width:"250px","margin-left":"10px"},attrs:{solo:"",items:t.marcasFiltro},model:{value:t.marcaFiltrada,callback:function(e){t.marcaFiltrada=e},expression:"marcaFiltrada"}})],1),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"30px","margin-left":"30px"}},[a("v-btn",{staticStyle:{"margin-right":"10px","margin-left":"50px","margin-top":"20px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.filtarCateAndMarca()}}},[a("v-icon",{attrs:{size:"40"}},[t._v("mdi-magnify")])],1)],1)]),a("v-row",{staticStyle:{"margin-left":"10px","margin-top":"10px"}},[a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"margin-left":"10px"}},[t._v("Total prendas:")]),a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.totalPrendas))])])]),a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"margin-left":"10px"}},[t._v("Total Ingreso:")]),a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.totalIngreso))])])]),a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"margin-left":"10px"}},[t._v("Total Costo:")]),a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.totalCosto))])])])],1)],[a("v-data-table",{staticClass:" elevation-15 ",staticStyle:{"margin-top":"50px"},attrs:{headers:t.columnas,items:t.articulos,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar categoria, marca o referencia","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v("Editar articulo")])]),a("v-card-text",[a("v-form",[a("v-row",[a("v-text-field",{attrs:{rules:t.rulesNum,label:"Separadas"},model:{value:t.editedItem.cantSeparadas,callback:function(e){t.$set(t.editedItem,"cantSeparadas",e)},expression:"editedItem.cantSeparadas"}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"25px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarAlmacenadas(t.editedItem.cantSeparadas)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("v-btn",{staticClass:"mr-4",attrs:{color:"red darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Cancelar ")])],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.totalCosto",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.cantSeparadas*a.costo)+" ")]}},{key:"item.totalPrecio",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.cantSeparadas*a.precio)+" ")]}},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",on:{click:function(e){return t.editar(o)}}},[t._v(" mdi-pencil ")])]}}],null,!0)})]],2)],1)},Rt=[],Ot={data:function(){return{categoriaFiltrada:"",marcaFiltrada:"",categoriasFiltro:[],marcasFiltro:[],dialog:!1,articulos:[],search:"",columnas:[{text:"Categoria",value:"categoria.nombre",class:"purple darken-3 white--text"},{text:"Marca",value:"marca.nombre",class:"purple darken-3 white--text"},{text:"Referencia",value:"referencia",class:"purple darken-3 white--text"},{text:"Unidades",value:"cantSeparadas",class:"purple darken-3 white--text"},{text:"Costo",value:"costo",class:"purple darken-3 white--text"},{text:"Precio",value:"precio",class:"purple darken-3 white--text"},{text:"Total costo",value:"totalCosto",class:"purple darken-3 white--text"},{text:"Total precio",value:"totalPrecio",class:"purple darken-3 white--text"},{text:"Opciones",value:"actions",class:"purple darken-3 white--text",width:"150px",sortable:!1}],editedItem:{},rulesNum:[function(t){return!!t||"Requerido"},function(t){return t>=0||"Numero negativo"}]}},created:function(){this.checkToken(),this.traerCategorias(),this.traerMarcas()},methods:{checkToken:function(){this.$store.state.token||"/"===this.$router.currentRoute.name||this.$router.push("/")},msjError:function(t){N.a.fire({position:"top",icon:"error",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:3e3})},msjExito:function(t){N.a.fire({position:"top",icon:"success",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:2e3})},traerCategorias:function(){var t=this,e=this,a=[],o={headers:{token:this.$store.state.token}};V.a.get("categoria/activas",o).then((function(o){a=o.data.categoria,a.length>0?a.map((function(t){e.categoriasFiltro.push({text:t.nombre,value:t._id})})):t.msjExisto("No hay categorias activas"),e.categoriasFiltro.unshift("")})).catch((function(t){if(t.response.data.msg){var e=t.response.data.msg;this.msjError(e)}else{var a=t.response.data.errors[0].msg;this.msjError(a)}}))},traerMarcas:function(){var t=this,e=this,a=[],o={headers:{token:this.$store.state.token}};V.a.get("marca/activas",o).then((function(o){a=o.data.marca,a.length>0?a.map((function(t){e.marcasFiltro.push({text:t.nombre,value:t._id})})):t.msjExisto("No hay marcas activas"),e.marcasFiltro.unshift("")})).catch((function(t){if(t.response.data.msg){var e=t.response.data.msg;this.msjError(e)}else{var a=t.response.data.errors[0].msg;this.msjError(a)}}))},filtarCateAndMarca:function(){var t=this,e={headers:{token:this.$store.state.token}};V.a.get("articulo/separados?categoria=".concat(this.categoriaFiltrada,"&marca=").concat(this.marcaFiltrada),e).then((function(e){t.articulos=e.data.articulo,0==t.articulos.length&&t.msjExito("No hay articulos")})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},editar:function(t){this.id=t._id,this.editedItem.cantSeparadas=t.cantSeparadas,this.dialog=!0},actualizarAlmacenadas:function(t){var e=this,a=this.id,o=this,r={headers:{token:this.$store.state.token}};V.a.put("articulo/actualizarCantSeparadas/".concat(a),{cantSeparadas:t},r).then((function(t){e.msjExito(t.data.msg),o.traerSeparados(),o.dialog=!1})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},exportExcel:function(){var t=[],e=this;if(e.articulos.length>1e3)return this.msjError("Max. 1000 datos");e.articulos.map((function(e){t.push({categoria:e.categoria.nombre,marca:e.marca.nombre,referencia:e.referencia,costo:e.costo,precio:e.precio,cantSeparadas:e.cantSeparadas})}));var a=gt.a.utils.json_to_sheet(t),o=gt.a.utils.book_new(),r="En_almacen";gt.a.utils.book_append_sheet(o,a,r),gt.a.writeFile(o,"".concat(r,".xlsx"))}},computed:{totalPrendas:function(){return this.articulos.reduce((function(t,e){return t+parseInt(e.cantSeparadas)}),0)},totalIngreso:function(){return this.articulos.reduce((function(t,e){return t+parseInt(e.cantSeparadas)*parseInt(e.precio)}),0)},totalCosto:function(){return this.articulos.reduce((function(t,e){return t+parseInt(e.cantSeparadas)*parseInt(e.costo)}),0)}}},Bt=Ot,Ut=(a("9ec5"),Object(d["a"])(Bt,Mt,Rt,!1,null,"13160f50",null)),Lt=Ut.exports;m()(Ut,{VAutocomplete:_t["a"],VBtn:M["a"],VCard:R["a"],VCardText:rt["b"],VCardTitle:rt["c"],VCol:B["a"],VContainer:kt["a"],VDataTable:U["a"],VDialog:wt["a"],VForm:it["a"],VIcon:v["a"],VRow:H["a"],VSpacer:K["a"],VTextField:W["a"],VToolbar:J["a"]});var Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return""!=this.$store.state.token?a("div",[a("v-container",{attrs:{fluid:""}},[[a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"32px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Proveedores")])]),a("v-spacer"),a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",staticStyle:{"margin-right":"30px","margin-left":"20px","margin-top":"50px"},attrs:{depressed:"",dark:""},on:{click:function(e){return t.exportExcel()}}},[a("v-icon",{attrs:{size:"25"}},[t._v("mdi-file-excel-outline")]),t._v("Exportar ")],1),a("div",{staticStyle:{"margin-top":"50px","margin-right":"30px"}},[a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",attrs:{depressed:"",dark:""},on:{click:function(e){return t.reset()}}},[a("v-icon",{attrs:{size:"20"}},[t._v("mdi-plus")]),t._v(" Nuevo ")],1)],1)],1),a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Buscar:")])]),a("div",{staticStyle:{color:"#72128E",width:"600px","font-size":"20px","text-align":"center","margin-top":"40px","margin-left":"30px"}},[a("v-text-field",{staticStyle:{width:"600px"},attrs:{solo:"",label:"Traer clientes por tipo y numero de documento, nombre, dirección, ciudad, telefono o email. (Ejemplo:cliente1)"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.obtenerPersonas()}},model:{value:t.buscarClienteLetras,callback:function(e){t.buscarClienteLetras=e},expression:"buscarClienteLetras"}})],1),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("v-btn",{staticStyle:{"margin-left":"10px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.obtenerProveedores()}}},[a("v-icon",{attrs:{size:"40"}},[t._v("mdi-magnify")])],1)],1)])],[a("v-data-table",{staticClass:" elevation-15 ",staticStyle:{"margin-top":"50px"},attrs:{headers:t.columnas,items:t.personas,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar cliente por documento, nombre, dirección, ciudad, telefono o email","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v("Proveedor")])]),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{counter:200,rules:t.rulesNombre,label:"Nombre*",required:""},model:{value:t.editedItem.nombre,callback:function(e){t.$set(t.editedItem,"nombre",e)},expression:"editedItem.nombre"}}),a("v-text-field",{attrs:{counter:150,rules:t.rulesDireccion,label:"Dirección"},model:{value:t.editedItem.direccion,callback:function(e){t.$set(t.editedItem,"direccion",e)},expression:"editedItem.direccion"}}),a("v-text-field",{attrs:{counter:150,rules:t.rulesTelefono,label:"Telefono"},model:{value:t.editedItem.telefono,callback:function(e){t.$set(t.editedItem,"telefono",e)},expression:"editedItem.telefono"}}),a("v-btn",{staticClass:"mr-4",attrs:{color:"blue darken-1",text:""},on:{click:t.guardar}},[t._v(" Guardar ")]),a("v-btn",{staticClass:"mr-4",attrs:{color:"blue darken-1",text:""},on:{click:t.reset}},[t._v(" Limpiar ")]),a("v-btn",{staticClass:"mr-4",attrs:{color:"red darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Cancelar ")])],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog2,callback:function(e){t.dialog2=e},expression:"dialog2"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v("Editar cliente")])]),a("v-card-text",[a("v-form",[a("v-row",[a("v-text-field",{attrs:{counter:70,rules:t.rulesNombre,label:"Nombre*",required:""},model:{value:t.editedItem.nombre,callback:function(e){t.$set(t.editedItem,"nombre",e)},expression:"editedItem.nombre"}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"25px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarNombre(t.editedItem.nombre)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("v-row",[a("v-text-field",{attrs:{counter:70,rules:t.rulesDireccion,label:"Dirección"},model:{value:t.editedItem.direccion,callback:function(e){t.$set(t.editedItem,"direccion",e)},expression:"editedItem.direccion"}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"25px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarDireccion(t.editedItem.direccion)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("v-row",[a("v-text-field",{attrs:{counter:70,rules:t.rulesTelefono,label:"Telefono"},model:{value:t.editedItem.telefono,callback:function(e){t.$set(t.editedItem,"telefono",e)},expression:"editedItem.telefono"}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"25px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarTelefono(t.editedItem.telefono)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("v-btn",{staticClass:"mr-4",attrs:{color:"red darken-1",text:""},on:{click:function(e){t.dialog2=!1}}},[t._v(" Cancelar ")])],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.estado",fn:function(e){var o=e.item;return[o.estado?a("div",[a("span",{staticClass:"black--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])]}},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",on:{click:function(e){return t.editar(o)}}},[t._v(" mdi-pencil ")]),o.estado?[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.activarDesactivarItem(2,o)}}},[t._v(" mdi-check ")])]:[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarItem(1,o)}}},[t._v(" mdi-block-helper ")])]]}}],null,!0)})]],2)],1):t._e()},Ht=[],Kt={data:function(){return{buscarClienteLetras:"",search:"",dialog:!1,dialog2:!1,rulesNombre:[function(t){return!!t||"Required."},function(t){return t&&t.length<=200||"Max 70 caracteres"}],rulesDireccion:[function(t){return t.length<=150||"Max 70 caracteres"}],rulesTelefono:[function(t){return t.length<=150||"Max 70 caracteres"}],columnas:[{text:"Nombre",value:"nombre",class:"purple darken-3 white--text"},{text:"Dirección",value:"direccion",class:"purple darken-3 white--text"},{text:"Telefono",value:"telefono",class:"purple darken-3 white--text",sortable:!1},{text:"Estado",value:"estado",class:"purple darken-3 white--text"},{text:"Opciones",value:"actions",class:"purple darken-3 white--text",width:"10%",sortable:!1}],personas:[],editedItem:{nombre:"",direccion:"",telefono:""}}},created:function(){this.checkToken()},methods:{checkToken:function(){this.$store.state.token||"/"===this.$router.currentRoute.name||this.$router.push("/")},msjError:function(t){N.a.fire({position:"top",icon:"error",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:3e3})},msjExito:function(t){N.a.fire({position:"top",icon:"success",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:2e3})},reset:function(){this.editedItem._id="",this.editedItem.nombre="",this.editedItem.direccion="",this.editedItem.telefono="",this.dialog=!0},editar:function(t){this.id=t._id,this.editedItem._id=t._id,this.editedItem.nombre=t.nombre,this.editedItem.direccion=t.direccion,this.editedItem.telefono=t.telefono,this.dialog2=!0},obtenerProveedores:function(){var t=this,e=this.buscarClienteLetras.trim(),a={headers:{token:this.$store.state.token}};V.a.get("proveedor/proveedores?value=".concat(e),a).then((function(e){t.personas=e.data.proveedor,0==t.personas.length&&t.msjExito("No hay Proveedores")})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},obtenerProveedoreActivoDesactivo:function(t){var e=this,a={headers:{token:this.$store.state.token}};V.a.get("proveedor/proveedores?value=".concat(t),a).then((function(t){e.personas=t.data.proveedor,0==e.personas.length&&e.msjExito("No hay Proveedores")})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},guardar:function(){var t=this,e={headers:{token:this.$store.state.token}},a=this;""===this.editedItem.nombre.trim()?this.msjError("Nombre obligatorio"):this.editedItem.nombre.length>150||this.editedItem.direccion.length>150||this.editedItem.telefono.length>150?this.msjError("Supero el número de carácteres permintidos en un campo"):V.a.post("proveedor",{nombre:this.editedItem.nombre,direccion:this.editedItem.direccion,telefono:this.editedItem.telefono},e).then((function(e){t.dialog=!1,a.msjExito(e.data.msg)})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},activarDesactivarItem:function(t,e){var a=this,o=e._id;if(2==t){var r={headers:{token:this.$store.state.token}};V.a.put("proveedor/desactivar/".concat(o),{},r).then((function(t){a.msjExito(t.data.msg),a.obtenerProveedoreActivoDesactivo(e.nombre)})).catch((function(t){if(t.response.data.msg){var e=t.response.data.msg;a.msjError(e)}else{var o=t.response.data.errors[0].msg;a.msjError(o)}}))}else{var i={headers:{token:this.$store.state.token}};V.a.put("proveedor/activar/".concat(o),{},i).then((function(t){a.msjExito(t.data.msg),a.obtenerProveedoreActivoDesactivo(e.nombre)})).catch((function(t){if(t.response.data.msg){var e=t.response.data.msg;a.msjError(e)}else{var o=t.response.data.errors[0].msg;a.msjError(o)}}))}},actualizarNombre:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};""===t.trim()?this.msjError("Nombre obligatorio"):t.length>200?this.msjError("Nombre demasiado largo"):V.a.put("proveedor/nombre/".concat(a),{nombre:t},o).then((function(t){e.msjExito(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarDireccion:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};""===t.trim()?this.msjError("Dirección obligatorio"):t.length>150?this.msjError("Dirección demasiada larga"):V.a.put("proveedor/direccion/".concat(a),{direccion:t},o).then((function(t){e.msjExito(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarTelefono:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};""===t.trim()?this.msjError("Telefono obligatorio"):t.length>150?this.msjError("Telefono demasiada larga"):V.a.put("proveedor/telefono/".concat(a),{telefono:t},o).then((function(t){e.msjExito(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},exportExcel:function(){var t=[],e=this;if(e.personas.length>1e3)return this.msjError("Max. 1000 datos");e.personas.map((function(e){t.push({nombre:e.nombre,telefono:e.telefono,direccion:e.direccion})}));var a=gt.a.utils.json_to_sheet(t),o=gt.a.utils.book_new(),r="proveedores";gt.a.utils.book_append_sheet(o,a,r),gt.a.writeFile(o,"".concat(r,".xlsx"))}}},Wt=Kt,Yt=Object(d["a"])(Wt,Gt,Ht,!1,null,null,null),Jt=Yt.exports;m()(Yt,{VBtn:M["a"],VCard:R["a"],VCardText:rt["b"],VCardTitle:rt["c"],VContainer:kt["a"],VDataTable:U["a"],VDialog:wt["a"],VForm:it["a"],VIcon:v["a"],VRow:H["a"],VSpacer:K["a"],VTextField:W["a"],VToolbar:J["a"]});var Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-app",[a("v-container",{attrs:{fluid:""}},[[a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"32px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Clientes")])]),a("v-spacer"),a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",staticStyle:{"margin-right":"30px","margin-left":"20px","margin-top":"50px"},attrs:{depressed:"",dark:""},on:{click:function(e){return t.inportarExcel()}}},[a("v-icon",{attrs:{size:"25"}},[t._v("mdi-cloud-upload")]),t._v("   Importar ")],1),a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",staticStyle:{"margin-right":"30px","margin-left":"20px","margin-top":"50px"},attrs:{depressed:"",dark:""},on:{click:function(e){return t.exportExcel()}}},[a("v-icon",{attrs:{size:"25"}},[t._v("mdi-file-excel-outline")]),t._v("Exportar ")],1),a("div",{staticStyle:{"margin-top":"50px","margin-right":"30px"}},[a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",attrs:{depressed:"",dark:""},on:{click:function(e){return t.reset()}}},[a("v-icon",{attrs:{size:"20"}},[t._v("mdi-plus")]),t._v(" Nuevo ")],1)],1)],1),a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Buscar:")])]),a("div",{staticStyle:{color:"#72128E",width:"600px","font-size":"20px","text-align":"center","margin-top":"40px","margin-left":"30px"}},[a("v-text-field",{staticStyle:{width:"600px"},attrs:{solo:"",label:"Traer clientes por tipo y numero de documento, nombre, dirección, ciudad, telefono o email. (Ejemplo:cliente1)"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.obtenerPersonas()}},model:{value:t.buscarClienteLetras,callback:function(e){t.buscarClienteLetras=e},expression:"buscarClienteLetras"}})],1),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("v-btn",{staticStyle:{"margin-left":"10px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.obtenerPersonas()}}},[a("v-icon",{attrs:{size:"40"}},[t._v("mdi-magnify")])],1)],1)])],[a("v-data-table",{staticClass:" elevation-15 ",staticStyle:{"margin-top":"50px"},attrs:{headers:t.columnas,items:t.personas,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar cliente por documento, nombre, dirección, ciudad, telefono o email","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",on:{click:function(e){return t.editar(o)}}},[t._v(" mdi-pencil ")]),a("v-icon",{staticClass:"mr-2",on:{click:function(e){return t.eliminar(o)}}},[t._v(" mdi-delete ")])]}}],null,!0)})],[a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v("Cliente")])]),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{rules:t.rulesTipoDocumento,label:"Tipo de Documento*",required:""},model:{value:t.editedItem.tipoDocumento,callback:function(e){t.$set(t.editedItem,"tipoDocumento",e)},expression:"editedItem.tipoDocumento"}}),a("v-text-field",{attrs:{counter:30,rules:t.rules_id,label:"Número de Documento*",required:""},model:{value:t.editedItem._id,callback:function(e){t.$set(t.editedItem,"_id",e)},expression:"editedItem._id"}}),a("v-text-field",{attrs:{counter:70,rules:t.rulesNombre,label:"Nombre*",required:""},model:{value:t.editedItem.nombre,callback:function(e){t.$set(t.editedItem,"nombre",e)},expression:"editedItem.nombre"}}),a("v-text-field",{attrs:{counter:70,rules:t.rulesDireccion,label:"Dirección"},model:{value:t.editedItem.direccion,callback:function(e){t.$set(t.editedItem,"direccion",e)},expression:"editedItem.direccion"}}),a("v-text-field",{attrs:{counter:70,rules:t.rulesCiudad,label:"Ciudad"},model:{value:t.editedItem.ciudad,callback:function(e){t.$set(t.editedItem,"ciudad",e)},expression:"editedItem.ciudad"}}),a("v-text-field",{attrs:{counter:70,rules:t.rulesTelefono,label:"Telefono"},model:{value:t.editedItem.telefono,callback:function(e){t.$set(t.editedItem,"telefono",e)},expression:"editedItem.telefono"}}),a("v-text-field",{attrs:{counter:70,rules:t.rulesEmail,label:"Email"},model:{value:t.editedItem.email,callback:function(e){t.$set(t.editedItem,"email",e)},expression:"editedItem.email"}}),a("v-btn",{staticClass:"mr-4",attrs:{color:"blue darken-1",text:""},on:{click:t.guardar}},[t._v(" Guardar ")]),a("v-btn",{staticClass:"mr-4",attrs:{color:"blue darken-1",text:""},on:{click:t.reset}},[t._v(" Limpiar ")]),a("v-btn",{staticClass:"mr-4",attrs:{color:"red darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Cancelar ")])],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog2,callback:function(e){t.dialog2=e},expression:"dialog2"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v("Editar cliente")])]),a("v-card-text",[a("v-form",[a("v-row",[a("label",{staticClass:"col-form-label",staticStyle:{color:"#72128E","margin-top":"40px","margin-bottom":"40px"}},[a("v-icon",{attrs:{color:"#72128E"}},[t._v("mdi-card-bulleted")]),t._v(" Numer de documento : "+t._s(t.editedItem._id)+" ")],1)]),a("v-row",[a("v-text-field",{attrs:{rules:t.rulesTipoDocumento,label:"Tipo de Documento"},model:{value:t.editedItem.tipoDocumento,callback:function(e){t.$set(t.editedItem,"tipoDocumento",e)},expression:"editedItem.tipoDocumento"}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"25px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarTipodoc(t.editedItem.tipoDocumento)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("v-row",[a("v-text-field",{attrs:{counter:70,rules:t.rulesNombre,label:"Nombre*",required:""},model:{value:t.editedItem.nombre,callback:function(e){t.$set(t.editedItem,"nombre",e)},expression:"editedItem.nombre"}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"25px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarNombre(t.editedItem.nombre)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("v-row",[a("v-text-field",{attrs:{counter:70,rules:t.rulesDireccion,label:"Dirección"},model:{value:t.editedItem.direccion,callback:function(e){t.$set(t.editedItem,"direccion",e)},expression:"editedItem.direccion"}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"25px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarDireccion(t.editedItem.direccion)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("v-row",[a("v-text-field",{attrs:{counter:70,rules:t.rulesCiudad,label:"Ciudad"},model:{value:t.editedItem.ciudad,callback:function(e){t.$set(t.editedItem,"ciudad",e)},expression:"editedItem.ciudad"}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"25px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarCiudad(t.editedItem.ciudad)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("v-row",[a("v-text-field",{attrs:{counter:70,rules:t.rulesTelefono,label:"Telefono"},model:{value:t.editedItem.telefono,callback:function(e){t.$set(t.editedItem,"telefono",e)},expression:"editedItem.telefono"}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"25px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarTelefono(t.editedItem.telefono)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("v-row",[a("v-text-field",{attrs:{counter:70,rules:t.rulesEmail,label:"Email*",required:""},model:{value:t.editedItem.email,callback:function(e){t.$set(t.editedItem,"email",e)},expression:"editedItem.email"}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"25px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarEmail(t.editedItem.email)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1),a("v-btn",{staticClass:"mr-4",attrs:{color:"red darken-1",text:""},on:{click:function(e){t.dialog2=!1}}},[t._v(" Cancelar ")])],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog3,callback:function(e){t.dialog3=e},expression:"dialog3"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v("Excel con clientes")])]),a("v-card-text",[a("v-form",[a("v-row",[a("v-file-input",{staticClass:"inputVuetify",attrs:{solo:"","show-size":"",label:"Excel con articulos",accept:".xlsx",placeholder:"Click para seleccionar archivo .xlsx"},on:{change:t.onChangess}})],1),a("v-btn",{staticClass:"botonCargar",on:{click:function(e){return t.enviarDataExcel()}}},[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-label",[a("v-icon",{attrs:{size:"40",color:"#72128E"}},[t._v("mdi-cloud-upload-outline")]),t._v(" Subir ")],1)],1)],1)],1)],1)],1)],1)]],2)],1)],1)},Qt=[],Zt={data:function(){return{buscarClienteLetras:"",search:"",dialog:!1,dialog2:!1,dialog3:!1,rulesTipoDocumento:[function(t){return!!t||"Requerido"}],rules_id:[function(t){return!!t||"Requerido"},function(t){return t.length<=70||"Max 70 caracteres"}],rulesNombre:[function(t){return!!t||"Required."},function(t){return t&&t.length<=70||"Max 70 caracteres"}],rulesDireccion:[function(t){return t.length<=70||"Max 70 caracteres"}],rulesCiudad:[function(t){return t.length<=70||"Max 70 caracteres"}],rulesTelefono:[function(t){return t.length<=70||"Max 70 caracteres"}],rulesEmail:[function(t){return t.length<=70||"Max 70 caracteres"}],columnas:[{text:"Tipo Doc",value:"tipoDocumento",class:"purple darken-3 white--text"},{text:"Número Doc",value:"_id",class:"purple darken-3 white--text"},{text:"Nombre",value:"nombre",class:"purple darken-3 white--text"},{text:"Dirección",value:"direccion",class:"purple darken-3 white--text"},{text:"Ciudad",value:"ciudad",class:"purple darken-3 white--text"},{text:"Telefono",value:"telefono",class:"purple darken-3 white--text",width:"10%",sortable:!1},{text:"Email",value:"email",class:"purple darken-3 white--text"},{text:"Opciones",value:"actions",class:"purple darken-3 white--text",width:"10%",sortable:!1}],personas:[],editedItem:{tipoPersona:"",nombre:"",tipoDocumento:"",_id:"",direccion:"",telefono:"",email:""},dataExcel:[]}},created:function(){this.checkToken()},methods:{checkToken:function(){this.$store.state.token||"/"===this.$router.currentRoute.name||this.$router.push("/")},msjError:function(t){N.a.fire({position:"top",icon:"error",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:3e3})},msjExisto:function(t){N.a.fire({position:"top",icon:"success",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:2e3})},msjProceso:function(){N.a.fire({title:"Registrando compra",html:"Procesando...",allowOutsideClick:!1,showConfirmButton:!1,willOpen:function(){N.a.showLoading()}})},reset:function(){this.dialog=!0,this.editedItem.tipoDocumento="",this.editedItem._id="",this.editedItem.nombre="",this.editedItem.direccion="",this.editedItem.ciudad="",this.editedItem.telefono="",this.editedItem.email=""},editar:function(t){this.id=t._id,this.editedItem.tipoDocumento=t.tipoDocumento,this.editedItem._id=t._id,this.editedItem.nombre=t.nombre,this.editedItem.direccion=t.direccion,this.editedItem.ciudad=t.ciudad,this.editedItem.telefono=t.telefono,this.editedItem.email=t.email,this.dialog2=!0},obtenerPersonas:function(){var t=this,e=this.buscarClienteLetras.trim(),a={headers:{token:this.$store.state.token}};V.a.get("cliente/clientes?value=".concat(e),a).then((function(e){t.personas=e.data.persona,0==t.personas.length&&t.msjExisto("No hay clientes")})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},guardar:function(){var t=this,e={headers:{token:this.$store.state.token}},a=this;""===this.editedItem.tipoDocumento.trim()||""===this.editedItem._id.trim()||""===this.editedItem.nombre.trim()?this.msjError("(*) Son campos obligatorios"):this.editedItem.tipoDocumento.length>70||this.editedItem._id.length>30||this.editedItem.nombre.length>70||this.editedItem.direccion.length>70||this.editedItem.ciudad.length>70||this.editedItem.telefono.length>70||this.editedItem.email.length>70?this.msjError("Supero el número de carácteres permintidos en un campo"):V.a.post("cliente",{tipoDocumento:this.editedItem.tipoDocumento,_id:this.editedItem._id,nombre:this.editedItem.nombre,direccion:this.editedItem.direccion,ciudad:this.editedItem.ciudad,telefono:this.editedItem.telefono,email:this.editedItem.email},e).then((function(e){t.dialog=!1,a.msjExisto(e.data.msg)})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},eliminar:function(t){var e=this,a=t._id,o={headers:{token:this.$store.state.token}};V.a.delete("cliente/".concat(a),o).then((function(a){e.msjExisto(a.data.msg);var o=e.personas.indexOf(t);e.personas.splice(o,1)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarTipodoc:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};""===t.trim()?this.msjError("Tipo de documento vacio"):V.a.put("cliente/actualizarTipoDoc/".concat(a),{tipoDocumento:t},o).then((function(t){e.msjExisto(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarNombre:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};""===t.trim()?this.msjError("Nombre obligatorio"):t.length>70?this.msjError("Nombre demasiado largo"):V.a.put("cliente/actualizarNombre/".concat(a),{nombre:t},o).then((function(t){e.msjExisto(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarDireccion:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};""===t.trim()?this.msjError("Dirección obligatorio"):t.length>70?this.msjError("Dirección demasiada larga"):V.a.put("cliente/actualizarDireccion/".concat(a),{direccion:t},o).then((function(t){e.msjExisto(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarCiudad:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};""===t.trim()?this.msjError("Ciudad obligatorio"):t.length>70?this.msjError("Ciudad demasiada larga"):V.a.put("cliente/actualizarCiudad/".concat(a),{ciudad:t},o).then((function(t){e.msjExisto(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarTelefono:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};""===t.trim()?this.msjError("Telefono obligatorio"):t.length>70?this.msjError("Telefono demasiada larga"):V.a.put("cliente/actualizarTelefono/".concat(a),{telefono:t},o).then((function(t){e.msjExisto(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarEmail:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};""===t.trim()?this.msjError("Email obligatorio"):t.length>70?this.msjError("Email demasiada larga"):V.a.put("cliente/actualizarEmail/".concat(a),{email:t},o).then((function(t){e.msjExisto(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},exportExcel:function(){var t=this,e=[];if(t.personas.length>1e3)return this.msjError("Max. 1000 datos");t.personas.map((function(t){e.push({tipoDocumento:t.tipoDocumento,numDocumento:t._id,nombre:t.nombre,direccion:t.direccion,ciudad:t.ciudad,telefono:t.telefono,email:t.email})}));var a=gt.a.utils.json_to_sheet(e),o=gt.a.utils.book_new(),r="Clientes";gt.a.utils.book_append_sheet(o,a,r),gt.a.writeFile(o,"".concat(r,".xlsx"))},inportarExcel:function(){this.dialog3=!0},onChangess:function(t){var e=this;if(this.file=t||null,this.file){var a=new FileReader;a.onload=function(t){var a=t.target.result,o=gt.a.read(a,{type:"binary"}),r=o.SheetNames[0],i=o.Sheets[r];e.dataExcel=gt.a.utils.sheet_to_json(i)},a.readAsBinaryString(this.file)}},enviarDataExcel:function(){var t=this;if(this.msjProceso(),0==this.dataExcel.length)this.msjError("Excel sin datos");else if(this.dataExcel.length>250)this.msjError("Demasiados articulos, max 250");else{var e={headers:{token:this.$store.state.token}};V.a.post("cliente/subirClientes",{clientes:this.dataExcel},e).then((function(e){t.file=null,t.dataExcel=[],N.a.close(),t.msjExisto(e.data.msg),t.dialog3=!1})).catch((function(e){if(console.log(e.response),e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))}}}},te=Zt,ee=(a("3ea2"),a("23a7")),ae=a("24c9"),oe=Object(d["a"])(te,Xt,Qt,!1,null,"4601a980",null),re=oe.exports;m()(oe,{VApp:y["a"],VBtn:M["a"],VCard:R["a"],VCardText:rt["b"],VCardTitle:rt["c"],VContainer:kt["a"],VDataTable:U["a"],VDialog:wt["a"],VFileInput:ee["a"],VFlex:mt["a"],VForm:it["a"],VIcon:v["a"],VLabel:ae["a"],VRow:H["a"],VSpacer:K["a"],VTextField:W["a"],VToolbar:J["a"]});var ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return""!=this.$store.state.token?a("div",[a("v-container",{attrs:{fluid:""}},[1==t.muestra?[a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"32px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Usuarios")])]),a("v-spacer"),a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",staticStyle:{"margin-right":"30px","margin-left":"20px","margin-top":"50px"},attrs:{depressed:"",dark:""},on:{click:function(e){return t.exportExcel()}}},[a("v-icon",{attrs:{size:"25"}},[t._v("mdi-file-excel-outline")]),t._v("Exportar ")],1),a("div",{staticStyle:{"margin-top":"50px","margin-right":"30px"}},[a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",attrs:{depressed:"",dark:""},on:{click:function(e){return t.reset()}}},[a("v-icon",{attrs:{size:"20"}},[t._v("mdi-plus")]),t._v(" Nuevo ")],1)],1)],1),a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Buscar:")])]),a("div",{staticStyle:{color:"#72128E",width:"600px","font-size":"20px","text-align":"center","margin-top":"40px","margin-left":"30px"}},[a("v-text-field",{staticStyle:{width:"600px"},attrs:{solo:"",label:"Traer usuarios por nombre de usuario, rol, nombre, cedula"},model:{value:t.buscarUsuario,callback:function(e){t.buscarUsuario=e},expression:"buscarUsuario"}})],1),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("v-btn",{staticStyle:{"margin-left":"10px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.obtenerUsuarios()}}},[a("v-icon",{attrs:{size:"40"}},[t._v("mdi-magnify")])],1)],1)]),a("v-data-table",{staticClass:" elevation-15 ",staticStyle:{"margin-top":"50px"},attrs:{headers:t.usuariosTitle,items:t.usuarios,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar usuario por rol, usuario y nombre","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.estado",fn:function(e){var o=e.item;return[o.estado?a("div",[a("span",{staticClass:"black--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])]}},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.cambioPage(2,o._id)}}},[t._v("mdi-file-search-outline")]),o._id!=t.$store.state.id?[o.estado?[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.activarDesactivarItem(2,o)}}},[t._v(" mdi-check ")])]:[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarItem(1,o)}}},[t._v(" mdi-block-helper ")])]]:t._e()]}}],null,!0)}),[a("v-dialog",{attrs:{"max-width":"80%"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v("Usuario")])]),a("v-card-text",[a("v-form",[a("v-row",[a("v-col",[a("v-select",{attrs:{items:t.roles,solo:"",label:"Rol"},model:{value:t.rol,callback:function(e){t.rol=e},expression:"rol"}})],1),a("v-col",[a("v-text-field",{attrs:{rules:t.rulesNombre,label:"Usuario*",required:"",counter:50},model:{value:t.nombreUser,callback:function(e){t.nombreUser=e},expression:"nombreUser"}})],1),a("v-col",[a("v-text-field",{attrs:{rules:t.rulesPassword,label:"Contraseña*",required:"",counter:10},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),a("v-row",[a("v-col",[a("v-text-field",{attrs:{rules:t.rulesNombrePila,label:"Nombre*",required:"",counter:100},model:{value:t.nombre,callback:function(e){t.nombre=e},expression:"nombre"}})],1),a("v-col",[a("v-text-field",{attrs:{rules:t.rulesCedula,label:"Cedula*",required:"",counter:100},model:{value:t.cedula,callback:function(e){t.cedula=e},expression:"cedula"}})],1)],1),a("v-row",[a("v-col",[a("v-text-field",{attrs:{rules:t.rulesOtros,label:"Telefono",counter:100},model:{value:t.telefono,callback:function(e){t.telefono=e},expression:"telefono"}})],1),a("v-col",[a("v-text-field",{attrs:{rules:t.rulesOtros,label:"Direccion",counter:100},model:{value:t.direccion,callback:function(e){t.direccion=e},expression:"direccion"}})],1)],1),a("v-row",[a("v-col",[a("v-text-field",{attrs:{rules:t.rulesOtros,label:"Tipo de cuenta",counter:100},model:{value:t.tipoCuenta,callback:function(e){t.tipoCuenta=e},expression:"tipoCuenta"}})],1),a("v-col",[a("v-text-field",{attrs:{rules:t.rulesOtros,label:"Numero de cuenta",counter:100},model:{value:t.numCuenta,callback:function(e){t.numCuenta=e},expression:"numCuenta"}})],1)],1),a("v-row",[a("v-col",[a("v-text-field",{attrs:{rules:t.rulesOtros,label:"Banco",counter:100},model:{value:t.banco,callback:function(e){t.banco=e},expression:"banco"}})],1)],1),a("v-row",[a("v-col",[a("v-text-field",{attrs:{rules:t.rulesOtros,label:"Numero de contrato",counter:100},model:{value:t.numContrato,callback:function(e){t.numContrato=e},expression:"numContrato"}})],1)],1),a("v-btn",{staticClass:"mr-4",attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.almacenarUsuario()}}},[t._v(" Guardar ")]),a("v-btn",{staticClass:"mr-4",attrs:{color:"blue darken-1",text:""},on:{click:t.reset}},[t._v(" Limpiar ")]),a("v-btn",{staticClass:"mr-4",attrs:{color:"red darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Cancelar ")])],1)],1)],1)],1)]]:t._e(),2==t.muestra?[a("v-container",[a("v-row",[a("v-btn",{staticClass:"mb-4",staticStyle:{"margin-left":"50px","margin-top":"40px"},attrs:{icon:"",color:"#AF7AC5"},on:{click:function(e){return t.cambioPage(1,!1)}}},[a("v-icon",{attrs:{size:"50"}},[t._v("mdi-arrow-left-bold-circle-outline")])],1),a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"32px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Editar usuario")])])])],1)],1),a("v-row",[a("v-col",[a("v-row",[a("div",{staticStyle:{"margin-top":"50px"}},[a("v-layout",{attrs:{"justify-left":""}},[a("label",{staticClass:"col-form-label",staticStyle:{"margin-left":"30px","text-align":"left"}},[t._v("Nombre de usuario:")]),a("div",{staticStyle:{width:"400px","margin-top":"-20px","margin-left":"40px"}},[a("v-text-field",{model:{value:t.usuarioDetalle.nombreUser,callback:function(e){t.$set(t.usuarioDetalle,"nombreUser",e)},expression:"usuarioDetalle.nombreUser"}})],1),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"0px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarNombreUser(t.usuarioDetalle.nombreUser)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1)],1)]),a("v-row",[a("div",{staticStyle:{"margin-top":"0px"}},[a("v-layout",{attrs:{"justify-left":""}},[a("label",{staticClass:"col-form-label",staticStyle:{"text-align":"left","margin-left":"30px"}},[t._v("Rol de usuario:")]),a("label",{staticClass:"col-form-label",staticStyle:{"text-align":"left","margin-left":"70px"}},[t._v(t._s(t.usuarioDetalle.rol))])])],1)]),a("v-row",[a("div",{staticStyle:{"margin-top":"20px"}},[a("v-layout",{attrs:{"justify-left":""}},[a("label",{staticClass:"col-form-label",staticStyle:{"text-align":"left","margin-left":"30px"}},[t._v("Clave:")]),a("div",{staticStyle:{width:"400px","margin-top":"-20px","margin-left":"135px"}},[a("v-text-field",{model:{value:t.passwordNew,callback:function(e){t.passwordNew=e},expression:"passwordNew"}})],1),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"0px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarPassword(t.passwordNew)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1)],1)]),a("v-row",[a("div",{staticStyle:{"margin-top":"0px","margin-left":"30px"}},[a("v-layout",{attrs:{"justify-left":""}},[a("label",{staticClass:" col-form-label",staticStyle:{"text-align":"left"}},[t._v("Nombre:")]),a("div",{staticStyle:{width:"400px","margin-top":"-20px","margin-left":"120px"}},[a("v-text-field",{model:{value:t.usuarioDetalle.nombre,callback:function(e){t.$set(t.usuarioDetalle,"nombre",e)},expression:"usuarioDetalle.nombre"}})],1),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"0px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarNombre(t.usuarioDetalle.nombre)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1)],1)]),a("v-row",[a("div",{staticStyle:{"margin-top":"0px","margin-left":"30px"}},[a("v-layout",{attrs:{"justify-left":""}},[a("label",{staticClass:" col-form-label",staticStyle:{"text-align":"left"}},[t._v("Documento:")]),a("div",{staticStyle:{width:"400px","margin-top":"-20px","margin-left":"90px"}},[a("v-text-field",{model:{value:t.usuarioDetalle.cedula,callback:function(e){t.$set(t.usuarioDetalle,"cedula",e)},expression:"usuarioDetalle.cedula"}})],1),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"0px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarCedula(t.usuarioDetalle.cedula)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1)],1)]),a("v-row",[a("div",{staticStyle:{"margin-top":"0px","margin-left":"30px"}},[a("v-layout",{attrs:{"justify-left":""}},[a("label",{staticClass:" col-form-label",staticStyle:{"text-align":"left"}},[t._v("Telefono:")]),a("div",{staticStyle:{width:"400px","margin-top":"-20px","margin-left":"110px"}},[a("v-text-field",{model:{value:t.usuarioDetalle.telefono,callback:function(e){t.$set(t.usuarioDetalle,"telefono",e)},expression:"usuarioDetalle.telefono"}})],1),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"0px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarTelefono(t.usuarioDetalle.telefono)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1)],1)]),a("v-row",[a("div",{staticStyle:{"margin-top":"0px","margin-left":"30px"}},[a("v-layout",{attrs:{"justify-left":""}},[a("label",{staticClass:" col-form-label",staticStyle:{"text-align":"left"}},[t._v("Direccion:")]),a("div",{staticStyle:{width:"400px","margin-top":"-20px","margin-left":"105px"}},[a("v-text-field",{model:{value:t.usuarioDetalle.direccion,callback:function(e){t.$set(t.usuarioDetalle,"direccion",e)},expression:"usuarioDetalle.direccion"}})],1),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"0px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarDireccion(t.usuarioDetalle.direccion)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1)],1)]),a("v-row",[a("div",{staticStyle:{"margin-top":"0px","margin-left":"30px"}},[a("v-layout",{attrs:{"justify-left":""}},[a("label",{staticClass:" col-form-label",staticStyle:{"text-align":"left"}},[t._v("Numero de cuenta:")]),a("div",{staticStyle:{width:"400px","margin-top":"-20px","margin-left":"40px"}},[a("v-text-field",{model:{value:t.usuarioDetalle.numCuenta,callback:function(e){t.$set(t.usuarioDetalle,"numCuenta",e)},expression:"usuarioDetalle.numCuenta"}})],1),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"0px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarNumCuenta(t.usuarioDetalle.numCuenta)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1)],1)]),a("v-row",[a("div",{staticStyle:{"margin-top":"0px","margin-left":"30px"}},[a("v-layout",{attrs:{"justify-left":""}},[a("label",{staticClass:" col-form-label",staticStyle:{"text-align":"left"}},[t._v("Tipo de cuenta:")]),a("div",{staticStyle:{width:"400px","margin-top":"-20px","margin-left":"65px"}},[a("v-text-field",{model:{value:t.usuarioDetalle.tipoCuenta,callback:function(e){t.$set(t.usuarioDetalle,"tipoCuenta",e)},expression:"usuarioDetalle.tipoCuenta"}})],1),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"0px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarTipoCuenta(t.usuarioDetalle.tipoCuenta)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1)],1)]),a("v-row",[a("div",{staticStyle:{"margin-top":"0px","margin-left":"30px"}},[a("v-layout",{attrs:{"justify-left":""}},[a("label",{staticClass:" col-form-label",staticStyle:{"text-align":"left"}},[t._v("Banco:")]),a("div",{staticStyle:{width:"400px","margin-top":"-20px","margin-left":"125px"}},[a("v-text-field",{model:{value:t.usuarioDetalle.banco,callback:function(e){t.$set(t.usuarioDetalle,"banco",e)},expression:"usuarioDetalle.banco"}})],1),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"0px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarBanco(t.usuarioDetalle.banco)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1)],1)]),a("v-row",[a("div",{staticStyle:{"margin-top":"0px","margin-left":"30px"}},[a("v-layout",{attrs:{"justify-left":""}},[a("label",{staticClass:" col-form-label",staticStyle:{"text-align":"left"}},[t._v("Contrato:")]),a("div",{staticStyle:{width:"400px","margin-top":"-20px","margin-left":"105px"}},[a("v-text-field",{model:{value:t.usuarioDetalle.numContrato,callback:function(e){t.$set(t.usuarioDetalle,"numContrato",e)},expression:"usuarioDetalle.numContrato"}})],1),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"0px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarNumContrato(t.usuarioDetalle.numContrato)}}},[a("v-icon",[t._v("mdi-reload")])],1)],1)],1)])],1)],1)]:t._e()],2)],1):t._e()},se=[],ne={data:function(){return{muestra:1,dialog:!1,buscarUsuario:"",roles:["administrador","vendedor"],rol:"",nombreUser:"",password:"",nombre:"",cedula:"",telefono:"",direccion:"",tipoCuenta:"",numCuenta:"",banco:"",numContrato:"",passwordNew:"",usuarioDetalle:{},search:"",usuarios:[],usuariosTitle:[{text:"Rol",value:"rol",class:"purple darken-3 white--text"},{text:"Usuario",value:"nombreUser",class:"purple darken-3 white--text"},{text:"Nombre",value:"nombre",class:"purple darken-3 white--text"},{text:"Documento",value:"cedula",class:"purple darken-3 white--text"},{text:"Estado",value:"estado",class:"purple darken-3 white--text"},{text:"Opciones",value:"actions",class:"purple darken-3 white--text",width:"10%",sortable:!1}],rulesNombre:[function(t){return!!t||"Required."},function(t){return t&&t.length<=50||"Max 50 caracteres"}],rulesPassword:[function(t){return!!t||"Requerido"},function(t){return t&&t.length<=10||"Max 10 caracteres"}],rulesNombrePila:[function(t){return!!t||"Requerido"},function(t){return t&&t.length<=100||"Max 100 caracteres"}],rulesCedula:[function(t){return!!t||"Requerido"},function(t){return t&&t.length<=100||"Max 100 caracteres"}],rulesOtros:[function(t){return t.length<=100||"Max 100 caracteres"}]}},created:function(){this.checkToken()},methods:{checkToken:function(){this.$store.state.token||"/"===this.$router.currentRoute.name||this.$router.push("/")},msjError:function(t){N.a.fire({position:"top",icon:"error",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:3e3})},msjExito:function(t){N.a.fire({position:"top",icon:"success",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:2e3})},cambioPage:function(t,e){1==t?this.muestra=1:(this.muestra=2,this.id=e,this.traerUsuarioById(e))},reset:function(){this.rol="",this.nombreUser="",this.password="",this.nombre="",this.cedula="",this.telefono="",this.direccion="",this.tipoCuenta="",this.numCuenta="",this.banco="",this.numContrato="",this.dialog=!0},almacenarUsuario:function(){var t=this,e=this;if(""===this.rol.trim()||""===this.nombreUser.trim()||""===this.nombre.trim()||""===this.cedula.trim()||""===this.password.trim())this.msjError("(*) Son campos obligatorios");else if("administrador"!=this.rol.trim().toLowerCase()&&"vendedor"!=this.rol.trim().toLowerCase())this.msjError("Roles: administrador o vendedor");else if(this.nombreUser.length>50||this.nombre.length>100||this.cedula.length>100||this.password.length>10||this.telefono.length>100||this.direccion.length>100||this.tipoCuenta.length>100||this.numCuenta.length>100||this.banco.length>100||this.numContrato.length>100)this.msjError("Supero el número de carácteres permintidos en un campo");else{var a={headers:{token:this.$store.state.token}};V.a.post("usuario",{password:this.password,rol:this.rol,nombreUser:this.nombreUser,nombre:this.nombre,cedula:this.cedula,telefono:this.telefono,direccion:this.direccion,tipoCuenta:this.tipoCuenta,numCuenta:this.numCuenta,banco:this.banco,numContrato:this.numContrato},a).then((function(t){e.dialog=!1,e.msjExito(t.data.msg)})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))}},obtenerUsuarios:function(){var t=this,e={headers:{token:this.$store.state.token}};V.a.get("usuario?value=".concat(this.buscarUsuario),e).then((function(e){t.usuarios=e.data.usuario,0==t.usuarios.length&&t.msjExito("No hay usuarios")})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},traerUsuarioById:function(t){var e=this,a={headers:{token:this.$store.state.token}};V.a.get("usuario/usuario/".concat(t),a).then((function(t){e.usuarioDetalle=t.data.usuario})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},traerDespuesActivarDesactivar:function(t){var e=this,a={headers:{token:this.$store.state.token}};V.a.get("usuario?value=".concat(t),a).then((function(t){e.usuarios=t.data.usuario})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},activarDesactivarItem:function(t,e){var a=this,o=e._id;if(2==t){var r={headers:{token:this.$store.state.token}};V.a.put("usuario/desactivar/".concat(o),{},r).then((function(t){a.msjExito(t.data.msg),a.traerDespuesActivarDesactivar(e.nombreUser)})).catch((function(t){if(t.response.data.msg){var e=t.response.data.msg;a.msjError(e)}else{var o=t.response.data.errors[0].msg;a.msjError(o)}}))}else{var i={headers:{token:this.$store.state.token}};V.a.put("usuario/activar/".concat(o),{},i).then((function(t){a.msjExito(t.data.msg),a.traerDespuesActivarDesactivar(e.nombreUser)})).catch((function(t){if(t.response.data.msg){var e=t.response.data.msg;a.msjError(e)}else{var o=t.response.data.errors[0].msg;a.msjError(o)}}))}},exportExcel:function(){var t=[],e=this;if(e.usuarios.length>1e3)return this.msjError("Max. 1000 datos");e.usuarios.map((function(e){t.push({cedula:e.cedula,nombre:e.nombre,nombreUser:e.nombreUser,estado:e.estado,rol:e.rol})}));var a=gt.a.utils.json_to_sheet(t),o=gt.a.utils.book_new(),r="usuarios";gt.a.utils.book_append_sheet(o,a,r),gt.a.writeFile(o,"".concat(r,".xlsx"))},actualizarNombreUser:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};""===t.trim()?this.msjError("Nombre de usuario obligatorio"):t.length>50?this.msjError("Nombre de usuario mayor a 50 carácteres"):V.a.put("usuario/actualizarNombreUser/".concat(a),{nombreUser:t},o).then((function(t){e.msjExito(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarPassword:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};""===t.trim()?this.msjError("Contraseña obligatoria"):t.length>10?this.msjError("Contraseña mayor a 10 carácteres"):V.a.put("usuario/actualizarPass/".concat(a),{password:t},o).then((function(t){e.msjExito(t.data.msg),e.passwordNew=""})).catch((function(t){t.response.data.msg?(e.msgErrores=t.response.data.msg,e.msjError(e.msgErrores)):(e.msgErrores=t.response.data.errors[0].msg,e.msjError(e.msgErrores))}))},actualizarNombre:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};""===t.trim()?this.msjError("Nombre obligatorio"):t.length>100?this.msjError("Nombre mayor a 100 carácteres"):V.a.put("usuario/actualizarNombrePila/".concat(a),{nombre:t},o).then((function(t){e.msjExito(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarCedula:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};""===t.trim()?this.msjError("Cedula obligatorio"):t.length>100?this.msjError("Cedula mayor a 100 carácteres"):V.a.put("usuario/actualizarCedula/".concat(a),{cedula:t},o).then((function(t){e.msjExito(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarTelefono:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};""===t.trim()?this.msjError("Telefono obligatorio"):t.length>100?this.msjError("Telefono mayor a 100 carácteres"):V.a.put("usuario/actualizarTelefono/".concat(a),{telefono:t},o).then((function(t){e.msjExito(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarDireccion:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};""===t.trim()?this.msjError("Dirección obligatoria"):t.length>100?this.msjError("Dirección mayor a 100 carácteres"):V.a.put("usuario/actualizarDireccion/".concat(a),{direccion:t},o).then((function(t){e.msjExito(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarNumCuenta:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};""===t.trim()?this.msjError("Numero de cuenta obligatori"):t.length>100?this.msjError("Numero de cuenta mayor a 100 carácteres"):V.a.put("usuario/actualizarNumcuenta/".concat(a),{numCuenta:t},o).then((function(t){e.msjExito(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarTipoCuenta:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};""===t.trim()?this.msjError("Tipo de cuenta obligatori"):t.length>100?this.msjError("Tipo de cuenta mayor a 100 carácteres"):V.a.put("usuario/actualizarTypecuenta/".concat(a),{tipoCuenta:t},o).then((function(t){e.msjExito(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarBanco:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};""===t.trim()?this.msjError("Banco obligatori"):t.length>100?this.msjError("Banco mayor a 100 carácteres"):V.a.put("usuario/actualizarBanco/".concat(a),{banco:t},o).then((function(t){e.msjExito(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},actualizarNumContrato:function(t){var e=this,a=this.id,o={headers:{token:this.$store.state.token}};""===t.trim()?this.msjError("Contrato obligatori"):t.length>100?this.msjError("Contrato mayor a 100 carácteres"):V.a.put("usuario/actualizarContrato/".concat(a),{numContrato:t},o).then((function(t){e.msjExito(t.data.msg)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))}}},le=ne,ce=a("b974"),de=Object(d["a"])(le,ie,se,!1,null,null,null),ue=de.exports;m()(de,{VBtn:M["a"],VCard:R["a"],VCardText:rt["b"],VCardTitle:rt["c"],VCol:B["a"],VContainer:kt["a"],VDataTable:U["a"],VDialog:wt["a"],VForm:it["a"],VIcon:v["a"],VLayout:Et["a"],VRow:H["a"],VSelect:ce["a"],VSpacer:K["a"],VTextField:W["a"],VToolbar:J["a"]});var me=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("v-row",[o("v-col",[o("div",{staticStyle:{"margin-top":"50px"}},[o("v-card",{staticStyle:{margin:"auto",width:"250px",height:"250"}},[o("img",{staticStyle:{"margin-left":"10px","margin-top":"10px"},attrs:{src:a("d012b"),alt:"",contain:"",height:"90%",width:"90%"}})])],1),o("div",{staticStyle:{color:"#72128E","font-size":"32px","text-align":"center","margin-top":"10px","margin-left":"30px"}},[o("label",[t._v("Informacion")])])])],1),o("v-row",[o("v-col",{staticStyle:{"margin-top":"50px"}},[o("v-card",{staticStyle:{margin:"auto",width:"90%"}},[o("div",{staticClass:"form-group row texto"},[o("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"margin-left":"10px"}},[o("v-icon",[t._v("mdi-store")]),t._v(" Nombre:")],1),o("input",{directives:[{name:"model",rawName:"v-model",value:t.datosAlmacen.nameStore,expression:"datosAlmacen.nameStore"}],staticClass:"form-control col-sm-6 llenarTexto",attrs:{type:"text"},domProps:{value:t.datosAlmacen.nameStore},on:{input:function(e){e.target.composing||t.$set(t.datosAlmacen,"nameStore",e.target.value)}}}),o("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"10px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarNameStore()}}},[o("v-icon",[t._v("mdi-reload")])],1)],1),o("div",{staticClass:"form-group row texto"},[o("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"margin-left":"10px"}},[o("v-icon",[t._v("mdi-card-bulleted")]),t._v(" Nit:")],1),o("input",{directives:[{name:"model",rawName:"v-model",value:t.datosAlmacen.nit,expression:"datosAlmacen.nit"}],staticClass:"form-control col-sm-6 llenarTexto",attrs:{type:"text"},domProps:{value:t.datosAlmacen.nit},on:{input:function(e){e.target.composing||t.$set(t.datosAlmacen,"nit",e.target.value)}}}),o("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"10px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarNit()}}},[o("v-icon",[t._v("mdi-reload")])],1)],1),o("div",{staticClass:"form-group row texto"},[o("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"margin-left":"10px"}},[o("v-icon",[t._v("mdi-file-multiple-outline")]),t._v(" Regimen:")],1),o("input",{directives:[{name:"model",rawName:"v-model",value:t.datosAlmacen.regimen,expression:"datosAlmacen.regimen"}],staticClass:"form-control col-sm-6 llenarTexto",attrs:{type:"text"},domProps:{value:t.datosAlmacen.regimen},on:{input:function(e){e.target.composing||t.$set(t.datosAlmacen,"regimen",e.target.value)}}}),o("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"10px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarRegimen()}}},[o("v-icon",[t._v("mdi-reload")])],1)],1),o("div",{staticClass:"form-group row texto"},[o("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"margin-left":"10px"}},[o("v-icon",[t._v("mdi-account")]),t._v(" Reprecentatne Camara comercio:")],1),o("input",{directives:[{name:"model",rawName:"v-model",value:t.datosAlmacen.representanteCC,expression:"datosAlmacen.representanteCC"}],staticClass:"form-control col-sm-6 llenarTexto",attrs:{type:"text"},domProps:{value:t.datosAlmacen.representanteCC},on:{input:function(e){e.target.composing||t.$set(t.datosAlmacen,"representanteCC",e.target.value)}}}),o("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"10px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarRepresenante()}}},[o("v-icon",[t._v("mdi-reload")])],1)],1),o("div",{staticClass:"form-group row texto"},[o("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"margin-left":"10px"}},[o("v-icon",[t._v("mdi-earth")]),t._v(" Departamento:")],1),o("input",{directives:[{name:"model",rawName:"v-model",value:t.datosAlmacen.departamento,expression:"datosAlmacen.departamento"}],staticClass:"form-control col-sm-6 llenarTexto",attrs:{type:"text"},domProps:{value:t.datosAlmacen.departamento},on:{input:function(e){e.target.composing||t.$set(t.datosAlmacen,"departamento",e.target.value)}}}),o("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"10px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarDepartamento()}}},[o("v-icon",[t._v("mdi-reload")])],1)],1),o("div",{staticClass:"form-group row texto"},[o("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"margin-left":"10px"}},[o("v-icon",[t._v("mdi-map-legend")]),t._v(" Ciudad:")],1),o("input",{directives:[{name:"model",rawName:"v-model",value:t.datosAlmacen.ciudad,expression:"datosAlmacen.ciudad"}],staticClass:"form-control col-sm-6 llenarTexto",attrs:{type:"text"},domProps:{value:t.datosAlmacen.ciudad},on:{input:function(e){e.target.composing||t.$set(t.datosAlmacen,"ciudad",e.target.value)}}}),o("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"10px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarCiudad()}}},[o("v-icon",[t._v("mdi-reload")])],1)],1),o("div",{staticClass:"form-group row texto"},[o("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"margin-left":"10px"}},[o("v-icon",[t._v("mdi-map-marker")]),t._v(" Direccion:")],1),o("input",{directives:[{name:"model",rawName:"v-model",value:t.datosAlmacen.direccion,expression:"datosAlmacen.direccion"}],staticClass:"form-control col-sm-6 llenarTexto",attrs:{type:"text"},domProps:{value:t.datosAlmacen.direccion},on:{input:function(e){e.target.composing||t.$set(t.datosAlmacen,"direccion",e.target.value)}}}),o("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"10px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarDireccion()}}},[o("v-icon",[t._v("mdi-reload")])],1)],1),o("div",{staticClass:"form-group row texto"},[o("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"margin-left":"10px"}},[o("v-icon",[t._v("mdi-whatsapp")]),t._v(" Celular:")],1),o("input",{directives:[{name:"model",rawName:"v-model",value:t.datosAlmacen.celular,expression:"datosAlmacen.celular"}],staticClass:"form-control col-sm-6 llenarTexto",attrs:{type:"text"},domProps:{value:t.datosAlmacen.celular},on:{input:function(e){e.target.composing||t.$set(t.datosAlmacen,"celular",e.target.value)}}}),o("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"10px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarCelular()}}},[o("v-icon",[t._v("mdi-reload")])],1)],1),o("div",{staticClass:"form-group row texto"},[o("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"margin-left":"10px"}},[o("v-icon",[t._v("mdi-phone-hangup-outline")]),t._v(" Telefono:")],1),o("input",{directives:[{name:"model",rawName:"v-model",value:t.datosAlmacen.telefono,expression:"datosAlmacen.telefono"}],staticClass:"form-control col-sm-6 llenarTexto",attrs:{type:"text"},domProps:{value:t.datosAlmacen.telefono},on:{input:function(e){e.target.composing||t.$set(t.datosAlmacen,"telefono",e.target.value)}}}),o("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"10px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarTelefono()}}},[o("v-icon",[t._v("mdi-reload")])],1)],1),o("div",{staticClass:"form-group row texto"},[o("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"margin-left":"10px"}},[o("v-icon",[t._v("mdi-email")]),t._v(" Email:")],1),o("input",{directives:[{name:"model",rawName:"v-model",value:t.datosAlmacen.email,expression:"datosAlmacen.email"}],staticClass:"form-control col-sm-6 llenarTexto",attrs:{type:"text"},domProps:{value:t.datosAlmacen.email},on:{input:function(e){e.target.composing||t.$set(t.datosAlmacen,"email",e.target.value)}}}),o("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"10px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.actualizarEmail()}}},[o("v-icon",[t._v("mdi-reload")])],1)],1)])],1)],1)],1)},pe=[],ve={data:function(){return{datosAlmacen:{nameStore:"",nit:"",regimen:"",representanteCC:"",departamento:"",ciudad:"",direccion:"",celular:"",telefono:"",email:""}}},created:function(){this.checkToken(),this.traerDatos()},methods:{checkToken:function(){this.$store.state.token||"/"===this.$router.currentRoute.name||this.$router.push("/")},msjError:function(t){N.a.fire({position:"top",icon:"error",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:3e3})},msjExisto:function(t){N.a.fire({position:"top",icon:"success",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:2e3})},traerDatos:function(){var t=this,e={headers:{token:this.$store.state.token}};V.a.get("setting",e).then((function(e){t.datosAlmacen=e.data.configuraciones})).catch((function(e){if(e.response.data.msg)if(0==e.response.data.msg)t.msjError("Configuracion basica no creada");else{var a=e.response.data.msg;t.msjError(a)}else t.msgError=e.response.data.errors[0].msg,t.msjError(t.msgError)}))},actualizarNameStore:function(){var t=this,e={headers:{token:this.$store.state.token}};""===this.datosAlmacen.nameStore.trim()?this.msjError("Nombre obligatorio"):this.datosAlmacen.nameStore.legend>100?this.msjError("Nombre mayor a 100 carácteres"):V.a.put("setting/nameStore",{nameStore:this.datosAlmacen.nameStore},e).then((function(e){t.msjExisto(e.data.msg),t.traerDatos()})).catch((function(e){if(e.response.data.msg)if(0==e.response.data.msg)t.msjError("Configuracion basica no creada");else{var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},actualizarNit:function(){var t=this,e={headers:{token:this.$store.state.token}};""===this.datosAlmacen.nit.trim()?this.msjError("Nit obligatorio"):this.datosAlmacen.nit.legend>100?this.msjError("Nit mayor a 100 carácteres"):V.a.put("setting/nit",{nit:this.datosAlmacen.nit},e).then((function(e){t.msjExisto(e.data.msg),t.traerDatos()})).catch((function(e){if(e.response.data.msg)if(0==e.response.data.msg)t.msjError("Configuracion basica no creada");else{var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},actualizarRegimen:function(){var t=this,e={headers:{token:this.$store.state.token}};""===this.datosAlmacen.regimen.trim()?this.msjError("Regimen obligatorio"):this.datosAlmacen.regimen.legend>100?this.msjError("Regimen mayor a 100 carácteres"):V.a.put("setting/regimen",{regimen:this.datosAlmacen.regimen},e).then((function(e){t.msjExisto(e.data.msg),t.traerDatos()})).catch((function(e){if(e.response.data.msg)if(0==e.response.data.msg)t.msjError("Configuracion basica no creada");else{var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},actualizarRepresenante:function(){var t=this,e={headers:{token:this.$store.state.token}};""===this.datosAlmacen.representanteCC.trim()?this.msjError("Representante obligatorio"):this.datosAlmacen.representanteCC.legend>100?this.msjError("Representante mayor a 100 carácteres"):V.a.put("setting/representanteCC",{representanteCC:this.datosAlmacen.representanteCC},e).then((function(e){t.msjExisto(e.data.msg),t.traerDatos()})).catch((function(e){if(e.response.data.msg)if(0==e.response.data.msg)t.msjError("Configuracion basica no creada");else{var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},actualizarDepartamento:function(){var t=this,e={headers:{token:this.$store.state.token}};""===this.datosAlmacen.departamento.trim()?this.msjError("Departamento obligatorio"):this.datosAlmacen.departamento.legend>100?this.msjError("Departamento mayor a 100 carácteres"):V.a.put("setting/departamento",{departamento:this.datosAlmacen.departamento},e).then((function(e){t.msjExisto(e.data.msg),t.traerDatos()})).catch((function(e){if(e.response.data.msg)if(0==e.response.data.msg)t.msjError("Configuracion basica no creada");else{var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},actualizarCiudad:function(){var t=this,e={headers:{token:this.$store.state.token}};""===this.datosAlmacen.ciudad.trim()?this.msjError("Ciudad obligatorio"):this.datosAlmacen.ciudad.legend>100?this.msjError("Ciudad mayor a 100 carácteres"):V.a.put("setting/ciudad",{ciudad:this.datosAlmacen.ciudad},e).then((function(e){t.msjExisto(e.data.msg),t.traerDatos()})).catch((function(e){if(e.response.data.msg)if(0==e.response.data.msg)t.msjError("Configuracion basica no creada");else{var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},actualizarDireccion:function(){var t=this,e={headers:{token:this.$store.state.token}};""===this.datosAlmacen.direccion.trim()?this.msjError("Direccion obligatorio"):this.datosAlmacen.direccion.legend>100?this.msjError("Direccion mayor a 100 carácteres"):V.a.put("setting/direccion",{direccion:this.datosAlmacen.direccion},e).then((function(e){t.msjExisto(e.data.msg),t.traerDatos()})).catch((function(e){if(e.response.data.msg)if(0==e.response.data.msg)t.msjError("Configuracion basica no creada");else{var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},actualizarCelular:function(){var t=this,e={headers:{token:this.$store.state.token}};""===this.datosAlmacen.celular.trim()?this.msjError("Celular obligatorio"):this.datosAlmacen.celular.legend>100?this.msjError("Celular mayor a 100 carácteres"):V.a.put("setting/celular",{celular:this.datosAlmacen.celular},e).then((function(e){t.msjExisto(e.data.msg),t.traerDatos()})).catch((function(e){if(e.response.data.msg)if(0==e.response.data.msg)t.msjError("Configuracion basica no creada");else{var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},actualizarTelefono:function(){var t=this,e={headers:{token:this.$store.state.token}};""===this.datosAlmacen.telefono.trim()?this.msjError("Telefono obligatorio"):this.datosAlmacen.telefono.legend>100?this.msjError("Telefono mayor a 100 carácteres"):V.a.put("setting/telefono",{telefono:this.datosAlmacen.telefono},e).then((function(e){t.msjExisto(e.data.msg),t.traerDatos()})).catch((function(e){if(e.response.data.msg)if(0==e.response.data.msg)t.msjError("Configuracion basica no creada");else{var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},actualizarEmail:function(){var t=this,e={headers:{token:this.$store.state.token}};""===this.datosAlmacen.email.trim()?this.msjError("Email obligatorio"):this.datosAlmacen.email.legend>100?this.msjError("Email mayor a 100 carácteres"):V.a.put("setting/email",{email:this.datosAlmacen.email},e).then((function(e){t.msjExisto(e.data.msg),t.traerDatos()})).catch((function(e){if(e.response.data.msg)if(0==e.response.data.msg)t.msjError("Configuracion basica no creada");else{var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))}}},fe=ve,he=(a("5caf"),Object(d["a"])(fe,me,pe,!1,null,"564d40dd",null)),xe=he.exports;m()(he,{VBtn:M["a"],VCard:R["a"],VCol:B["a"],VIcon:v["a"],VRow:H["a"]});var ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-btn",{staticClass:"botonFactura",on:{click:function(e){return t.crearFactura()}}},[a("v-icon",[t._v("mdi-clipboard-account-outline")]),t._v(" Generar facutra ")],1),a("v-card",{staticStyle:{"margin-top":"70px","margin-left":"30px",width:"95%","box-shadow":"0 0 20px #A068B8"}},[a("v-row",[a("v-col",[a("v-checkbox",{staticStyle:{"margin-left":"10px"},attrs:{label:"No guardar cliente"},model:{value:t.guardarDatos,callback:function(e){t.guardarDatos=e},expression:"guardarDatos"}}),a("div",{staticStyle:{"font-family":"'calibri'",color:"#00000","font-size":"20px","text-align":"left","margin-left":"30px","margin-top":"10px"}},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"texto"},[t._v("Tipo de factura:")]),a("v-radio-group",{staticStyle:{"margin-top":"1px"},model:{value:t.tipoFactura,callback:function(e){t.tipoFactura=e},expression:"tipoFactura"}},[a("v-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"Debito",color:"#72128E",value:"debito"}}),a("v-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"Abono sobre abono",color:"#72128E",value:"abonoAbono"}}),a("v-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"Venta",color:"#72128E",value:"venta"}})],1),"debito"==t.tipoFactura||"abonoAbono"==t.tipoFactura?a("v-radio-group",{attrs:{value:t.subTipoFactura=""}}):t._e(),"venta"==t.tipoFactura?a("v-radio-group",{model:{value:t.subTipoFactura,callback:function(e){t.subTipoFactura=e},expression:"subTipoFactura"}},[a("v-radio",{staticStyle:{"margin-left":"15px","margin-top":"-15px"},attrs:{label:"Venta",color:"#72128E",value:"venta"}}),a("v-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"Abono",color:"#72128E",value:"abono"}})],1):t._e()],1)])],1),a("v-col",[a("div",{staticClass:"form-group row comentario"},[a("v-textarea",{attrs:{color:"#72128E",outlined:"",counter:250,label:"Observaciones"},model:{value:t.comentario,callback:function(e){t.comentario=e},expression:"comentario"}})],1)])],1)],1),a("v-card",{staticStyle:{"margin-top":"20px","margin-left":"30px",width:"95%","box-shadow":"0 0 20px #A068B8"}},[a("v-row",[a("v-col",[a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"10px","margin-left":"0px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("No. factura:")]),a("label",{staticClass:"col-sm-2 col-form-label"},[t._v(t._s(t.numFactura))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"margin-left":"10px"}},[t._v("Numero documento:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cliente._id,expression:"cliente._id"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"text",placeholder:""},domProps:{value:t.cliente._id},on:{input:function(e){e.target.composing||t.$set(t.cliente,"_id",e.target.value)}}}),a("v-btn",{staticClass:"botones",staticStyle:{"margin-top":"10px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.traerCliente()}}},[a("v-icon",[t._v("mdi-account-search-outline")])],1)],1),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"margin-left":"10px"}},[t._v("Tipo documento:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cliente.tipoDocumento,expression:"cliente.tipoDocumento"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"text",placeholder:""},domProps:{value:t.cliente.tipoDocumento},on:{input:function(e){e.target.composing||t.$set(t.cliente,"tipoDocumento",e.target.value)}}})]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"margin-left":"10px"}},[t._v("Nombre:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cliente.nombre,expression:"cliente.nombre"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"text",placeholder:""},domProps:{value:t.cliente.nombre},on:{input:function(e){e.target.composing||t.$set(t.cliente,"nombre",e.target.value)}}})])]),a("v-col",[a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"10px"}},[a("label",{staticClass:"col-sm-3 col-form-label",staticStyle:{height:"45px"}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"10px"}},[a("label",{staticClass:"col-sm-3 col-form-label"},[t._v("Direccion:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cliente.direccion,expression:"cliente.direccion"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"text",placeholder:""},domProps:{value:t.cliente.direccion},on:{input:function(e){e.target.composing||t.$set(t.cliente,"direccion",e.target.value)}}})]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-3 col-form-label"},[t._v("Ciudad:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cliente.ciudad,expression:"cliente.ciudad"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"text",placeholder:""},domProps:{value:t.cliente.ciudad},on:{input:function(e){e.target.composing||t.$set(t.cliente,"ciudad",e.target.value)}}})]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-3 col-form-label"},[t._v("Telefono:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cliente.telefono,expression:"cliente.telefono"}],staticClass:"form-control mb-4 textoInput",attrs:{type:"text",placeholder:""},domProps:{value:t.cliente.telefono},on:{input:function(e){e.target.composing||t.$set(t.cliente,"telefono",e.target.value)}}})]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-3 col-form-label"},[t._v("Email:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cliente.email,expression:"cliente.email"}],staticClass:"form-control mb-4 textoInput",attrs:{type:"text",placeholder:""},domProps:{value:t.cliente.email},on:{input:function(e){e.target.composing||t.$set(t.cliente,"email",e.target.value)}}})])])],1)],1),a("v-card",{staticStyle:{"margin-top":"40px","margin-left":"30px",width:"95%","box-shadow":"0 0 20px #A068B8",padding:"15px"}},["debito"==t.tipoFactura?[a("v-row",[a("v-col",[a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Saldo anterior:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.saldoAnterior,expression:"saldoAnterior"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.saldoAnterior},on:{input:function(e){e.target.composing||(t.saldoAnterior=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Efectivo:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.efectivo,expression:"efectivo"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.efectivo},on:{input:function(e){e.target.composing||(t.efectivo=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Nequi:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.nequi,expression:"nequi"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.nequi},on:{input:function(e){e.target.composing||(t.nequi=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Tarjeta:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tarjeta,expression:"tarjeta"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.tarjeta},on:{input:function(e){e.target.composing||(t.tarjeta=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Saldo actual:")]),a("label",{staticClass:"col-sm-4 col-form-label"},[t._v(t._s(t.saldoAnterior-t.efectivo-t.nequi-t.tarjeta))])])])],1)]:t._e(),"abonoAbono"==t.tipoFactura?[a("v-row",[a("v-col",[a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Saldo anterior:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.saldoAnterior,expression:"saldoAnterior"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.saldoAnterior},on:{input:function(e){e.target.composing||(t.saldoAnterior=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Abono:")]),a("label",{staticClass:"col-sm-4 col-form-label"},[t._v(t._s(-1*(-t.efectivo-t.nequi-t.tarjeta-t.credito)))])]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Saldo actual:")]),a("label",{staticClass:"col-sm-4 col-form-label"},[t._v(t._s(t.saldoAnterior-t.efectivo-t.nequi-t.tarjeta-t.credito))])])]),a("v-col",[a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Efectivo:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.efectivo,expression:"efectivo"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.efectivo},on:{input:function(e){e.target.composing||(t.efectivo=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Nequi:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.nequi,expression:"nequi"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.nequi},on:{input:function(e){e.target.composing||(t.nequi=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Tarjeta:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tarjeta,expression:"tarjeta"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.tarjeta},on:{input:function(e){e.target.composing||(t.tarjeta=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Credito:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.credito,expression:"credito"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.credito},on:{input:function(e){e.target.composing||(t.credito=e.target.value)}}})])])],1)]:t._e(),"venta"==t.tipoFactura?[a("v-row",[a("v-col",[a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Sub total:")]),a("label",{staticClass:"col-sm-4 col-form-label"},[t._v(t._s(t.totalVendido))])]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Descuento:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.descuento,expression:"descuento"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",placeholder:"$"},domProps:{value:t.descuento},on:{input:function(e){e.target.composing||(t.descuento=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Total:")]),a("label",{staticClass:"col-sm-4 col-form-label"},[t._v(t._s(t.totalVendido-t.descuento))])]),"abono"==t.subTipoFactura?[a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Abono:")]),a("label",{staticClass:"col-sm-4 col-form-label"},[t._v(t._s(-1*(-t.efectivo-t.nequi-t.tarjeta-t.credito)))])]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Saldo:")]),a("label",{staticClass:"col-sm-4 col-form-label"},[t._v(t._s(t.totalVendido-t.descuento-t.efectivo-t.nequi-t.tarjeta-t.credito))])])]:t._e()],2),a("v-col",[a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Efectivo:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.efectivo,expression:"efectivo"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.efectivo},on:{input:function(e){e.target.composing||(t.efectivo=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Nequi:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.nequi,expression:"nequi"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.nequi},on:{input:function(e){e.target.composing||(t.nequi=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Tarjeta:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tarjeta,expression:"tarjeta"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.tarjeta},on:{input:function(e){e.target.composing||(t.tarjeta=e.target.value)}}})]),a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"2px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Credito:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.credito,expression:"credito"}],staticClass:"form-control mb-3 textoInput",attrs:{type:"number",min:"0",placeholder:"$"},domProps:{value:t.credito},on:{input:function(e){e.target.composing||(t.credito=e.target.value)}}})]),"venta"==t.subTipoFactura?[a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"10px","margin-left":"10px"}},[a("label",{staticClass:"col-sm-4 col-form-label"}),a("label",{staticClass:"col-sm-4 col-form-label",staticStyle:{"border-top":"solid purple"}},[t._v(t._s(t.totalVendido-t.descuento-t.efectivo-t.nequi-t.tarjeta-t.credito))])])]:t._e()],2)],1)]:t._e()],2),"abonoAbono"==t.tipoFactura&&t.saldoAnterior-t.efectivo-t.nequi-t.tarjeta-t.credito==0?[a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"20px","margin-left":"10px"}},[a("v-row",[a("v-col",[a("v-data-table",{staticClass:" elevation-15 ancho-tabla",attrs:{headers:t.mostrarArticulosAbonoAbono,items:t.articulosMostradosVenta,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Todos")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}})],1)]},proxy:!0},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.facturar(o)}}},[t._v("mdi-cart ")])]}}],null,!1,1356111168)})],1),a("v-col",[a("v-data-table",{staticClass:" elevation-15 ancho-tabla",attrs:{headers:t.facturaArticulosAbonoAbono,items:t.facturaArticulos},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Facturados")]),a("v-spacer"),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}})],1)]},proxy:!0},{key:"item.cantidad",fn:function(e){return[a("v-text-field",{attrs:{min:"0",name:"quantity",outlined:"",type:"number"},model:{value:e.item.cantidad,callback:function(a){t.$set(e.item,"cantidad",a)},expression:"props.item.cantidad"}})]}},{key:"item.subtotal",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.precio*a.cantidad)+" ")]}},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.desfacturar(o)}}},[t._v("mdi-delete ")])]}}],null,!0)})],1)],1)],1)]:t._e(),"venta"==t.tipoFactura?[a("div",{staticClass:"form-group row texto",staticStyle:{"margin-top":"20px","margin-left":"10px"}},[a("v-row",[a("v-col",[a("v-data-table",{staticClass:" elevation-15 ancho-tabla",attrs:{headers:t.articulosMostradosVentaTitle,items:t.articulosMostradosVenta,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Todos")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}})],1)]},proxy:!0},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.facturar(o)}}},[t._v("mdi-cart ")])]}}],null,!1,1356111168)})],1),a("v-col",[a("v-data-table",{staticClass:" elevation-15 ancho-tabla",attrs:{headers:t.facturaArticulosTitle,items:t.facturaArticulos},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Facturados")]),a("v-spacer"),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}})],1)]},proxy:!0},{key:"item.cantidad",fn:function(e){return[a("v-text-field",{attrs:{min:"0",name:"quantity",outlined:"",type:"number"},model:{value:e.item.cantidad,callback:function(a){t.$set(e.item,"cantidad",a)},expression:"props.item.cantidad"}})]}},{key:"item.subtotal",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.precio*a.cantidad)+" ")]}},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.desfacturar(o)}}},[t._v("mdi-delete ")])]}}],null,!0)})],1)],1)],1)]:t._e()],2)},be=[],Ce=(a("ac1f"),a("1276"),{data:function(){return{datosAlmacen:{nameStore:"",nit:"",regimen:"",representanteCC:"",departamento:"",ciudad:"",direccion:"",celular:"",telefono:"",email:""},numFactura:0,guardarDatos:!1,existeCliente:!1,tipoFactura:"",subTipoFactura:"",comentario:"",saldoAnterior:0,efectivo:0,nequi:0,tarjeta:0,credito:0,descuento:0,cliente:{_id:"",tipoDocumento:"",nombre:"",direccion:"",ciudad:"",telefono:"",email:""},search:"",articulosTraidos:[],facturaArticulos:[],articulosMostradosVenta:[],articulosMostradosVentaTitle:[{text:"Referencia",value:"referencia",class:"purple darken-3 white--text"},{text:"Categoria",value:"categoriaName",class:"purple darken-3 white--text"},{text:"Marca",value:"marcaName",class:"purple darken-3 white--text"},{text:"Cantidad",value:"cantidad",class:"purple darken-3 white--text"},{text:"Precio",value:"precio",class:"purple darken-3 white--text"},{text:"Agregar",value:"actions",class:"purple darken-3 white--text"}],facturaArticulosTitle:[{text:"Referencia",value:"referencia",class:"grey darken-4 white--text"},{text:"Categoria",value:"categoriaName",class:"grey darken-4 white--text"},{text:"Cantidad",value:"cantidad",class:"grey darken-4 white--text"},{text:"Precio uni.",value:"precio",class:"grey darken-4 white--text"},{text:"Sub total",value:"subtotal",class:"grey darken-4 white--text",sortable:!1},{text:"Eliminar",value:"actions",class:"grey darken-4 white--text",sortable:!1}],mostrarArticulosAbonoAbono:[{text:"Referencia",value:"referencia",class:"purple darken-3 white--text"},{text:"Categoria",value:"categoriaName",class:"purple darken-3 white--text"},{text:"Marca",value:"marcaName",class:"purple darken-3 white--text"},{text:"Cantidad",value:"cantidad",class:"purple darken-3 white--text"},{text:"Agregar",value:"actions",class:"purple darken-3 white--text"}],facturaArticulosAbonoAbono:[{text:"Referencia",value:"referencia",class:"grey darken-4 white--text"},{text:"Categoria",value:"categoriaName",class:"grey darken-4 white--text"},{text:"Marca",value:"marcaName",class:"grey darken-4 white--text"},{text:"Cantidad",value:"cantidad",class:"grey darken-4 white--text"},{text:"Eliminar",value:"actions",class:"grey darken-4 white--text",sortable:!1}]}},created:function(){this.checkToken(),this.traerNumFactura(),this.traerArticulosActivos(),this.traerDatos()},methods:{checkToken:function(){this.$store.state.token||"/"===this.$router.currentRoute.name||this.$router.push("/")},msjErrores:function(t){N.a.fire({position:"top",icon:"error",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:2e3})},msjExitoso:function(t){N.a.fire({position:"top",icon:"success",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:1e3})},traerDatos:function(){var t=this,e={headers:{token:this.$store.state.token}};V.a.get("setting",e).then((function(e){t.datosAlmacen=e.data.configuraciones})).catch((function(e){if(e.response.data.msg)if(0==e.response.data.msg)t.msjError("Configuracion basica no creada");else{var a=e.response.data.msg;t.msjError(a)}else t.msgError=e.response.data.errors[0].msg,t.msjError(t.msgError)}))},traerCliente:function(){var t=this;if(""===this.cliente._id.trim())return this.msjErrores("Numero de documento obligatorio");var e={headers:{token:this.$store.state.token}};V.a.get("cliente/buscando?numDocumento=".concat(this.cliente._id),e).then((function(e){0==e.data.persona?t.agregarCliente():(t.cliente=e.data.persona,t.existeCliente=!0)})).catch((function(e){e.response.data.msg?(t.msgError=e.response.data.msg,t.msjErrores(t.msgError)):(t.msgError=e.response.data.errors[0].msg,t.msjErrores(t.msgError))}))},agregarCliente:function(){var t=this;N.a.fire({icon:"question",title:"No existe...¿Desea agregar?",confirmButtonText:"Agregar",showDenyButton:!1,showCancelButton:!0}).then((function(e){e.isConfirmed?(t.guardarDatos=!1,t.existeCliente=!1):e.isDenied&&N.a.fire("Changes are not saved","","info")}))},traerNumFactura:function(){var t=this,e={headers:{token:this.$store.state.token}};V.a.get("generalData/venta",e).then((function(e){t.numFactura=e.data.numFactura})).catch((function(e){e.response.data.msg?(t.msgError=e.response.data.msg,t.msjErrores(t.msgError)):(t.msgError=e.response.data.errors[0].msg,t.msjErrores(t.msgError))}))},traerArticulosActivos:function(){var t=this,e={headers:{token:this.$store.state.token}};V.a.get("articulo/activos",e).then((function(e){t.articulosTraidos=e.data.articulo,t.meterArticulos(t.articulosTraidos)})).catch((function(e){e.response.data.msg?(t.msgError=e.response.data.msg,t.msgError=e.response.data.msg,t.msjErrores(t.msgError)):(t.msgError=e.response.data.errors[0].msg,t.msjErrores(t.msgError))}))},meterArticulos:function(t){var e=[];t.map((function(t){e.push({_id:t._id,categoriaName:t.categoria.nombre,categoria:t.categoria._id,marcaName:t.marca.nombre,marca:t.marca._id,referencia:t.referencia,cantidad:1,precio:t.precio,costo:t.costo})})),this.articulosMostradosVenta=e},facturar:function(t){this.editedIndex=this.articulosMostradosVenta.indexOf(t),this.facturaArticulos.push(t),this.articulosMostradosVenta.splice(this.editedIndex,1)},desfacturar:function(t){this.editedIndex=this.facturaArticulos.indexOf(t),this.articulosMostradosVenta.push(t),this.facturaArticulos.splice(this.editedIndex,1)},crearFactura:function(){var t=this;if(""===this.tipoFactura)return this.msjErrores("Tipo de factura obligatorio");if("venta"==this.tipoFactura){if(""==this.subTipoFactura)return this.msjErrores("SubTipo de factura obligatorio");if(0===this.facturaArticulos.length)return this.msjErrores("Artuculos obligatorios");var e=-1*(-this.efectivo-this.nequi-this.tarjeta-this.credito),a=this.totalVendido-this.descuento;if("venta"==this.subTipoFactura&&e!=a)return this.msjErrores("Saldos desiguales")}if("debito"==this.tipoFactura){if(0==this.saldoAnterior||""==this.saldoAnterior)return this.msjErrores("Saldo anterior obligatorio");if(0==this.efectivo&&0==this.nequi&&0==this.tarjeta||""==this.efectivo&&""==this.nequi&&""==this.tarjeta)return this.msjErrores("Completar almenos efectivo o nequi o tarjeta")}if("abonoAbono"==this.tipoFactura){if(0==this.saldoAnterior||""==this.saldoAnterior)return this.msjErrores("Saldo anterior obligatorio");if(0==this.efectivo&&0==this.nequi&&0==this.tarjeta&&0==this.credito||""==this.efectivo&&""==this.nequi&&""==this.tarjeta&&""==this.credito)return this.msjErrores("Completar almenos efectivo o nequi o tarjeta o credito");var o=this.saldoAnterior-this.efectivo-this.nequi-this.tarjeta-this.credito;if(0==o&&0===this.facturaArticulos.length)return this.msjErrores("Artuculos obligatorios")}if(this.comentario.length>250)return this.msjErrores("Comentario mayor a 250 caracteres");if(!this.guardarDatos){if(""===this.cliente._id)return this.msjErrores("Numero de documento obligatorio");if(""===this.cliente.nombre)return this.msjErrores("Nombre obligatorio")}var r=this,i={headers:{token:this.$store.state.token}};V.a.post("venta",{usuario:this.$store.state.id,numFactura:this.numFactura,tipoFactura:this.tipoFactura,subTipoFactura:this.subTipoFactura,comentario:this.comentario,guardarDatos:this.guardarDatos,existeCliente:this.existeCliente,persona:this.cliente,saldoAnterior:this.saldoAnterior,efectivo:this.efectivo,nequi:this.nequi,tarjeta:this.tarjeta,credito:this.credito,descuento:this.descuento,totalPrecio:this.totalVendido,totalCosto:this.totalCosto,articulos:this.facturaArticulos},i).then((function(e){t.msjExitoso(e.data.msg),t.traerNumFactura(),r.traerArticulosActivos(),r.crearPDF()})).catch((function(e){e.response.data.msg?(t.msgError=e.response.data.msg,t.msjErrores(t.msgError)):(t.msgError=e.response.data.errors[0].msg,t.msjErrores(t.msgError))}))},limpiarTodo:function(){this.cliente={},this.existeCliente=!1,this.guardarDatos=!1,this.tipoFactura="",this.subTipoFactura="",this.saldoAnterior=0,this.efectivo=0,this.nequi=0,this.tarjeta=0,this.credito=0,this.descuento=0,this.facturaArticulos=[],this.comentario=""},crearPDF:function(){var t=10,e=this.datosAlmacen.nameStore.split(0,15),a=this.datosAlmacen.representanteCC.split(0,24),o=this.datosAlmacen.nit.split(0,20),r=this.datosAlmacen.regimen.split(0,16),i=this.datosAlmacen.direccion.split(0,23),s=this.datosAlmacen.ciudad.split(0,10),n=this.datosAlmacen.departamento.split(0,10),l=this.datosAlmacen.celular.split(0,16),c=this.datosAlmacen.telefono.split(0,15),d=this.cliente._id.slice(0,13),u=this.cliente.tipoDocumento.slice(0,9),m=this.cliente.nombre.slice(0,16),p=this.cliente.telefono.slice(0,14),v=this.cliente.direccion.slice(0,14),f=this.cliente.ciudad.slice(0,17),h=new Date,x=h.getDate(),g=["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],b=g[h.getMonth()],C=h.getFullYear(),_=h.getHours(),k=h.getMinutes(),w=84,E=[],y=this.efectivo,S=this.nequi,j=this.credito,I=this.tarjeta;if("debito"==this.tipoFactura){var D=parseInt(y)+parseInt(S)+parseInt(I);E=[{referencia:" ",cantidad:"1",categoria:"Debito",precio:" ",total:D.toString()},{referencia:" ",cantidad:" ",categoria:" ",precio:" ",total:" "},{referencia:" ",cantidad:" ",categoria:" ",precio:" ",total:" "},{referencia:" ",cantidad:" ",categoria:" ",precio:" ",total:4},{referencia:" ",cantidad:" ",categoria:" ",precio:"Total",total:D.toString()}],w=120}else if("abonoAbono"==this.tipoFactura){var F=this.facturaArticulos;0!=F.length?F.map((function(t){E.push({referencia:t.referencia,categoria:t.categoriaName,cantidad:t.cantidad.toString(),precio:" ",total:" "})})):E.push({referencia:" ",cantidad:" ",categoria:" ",precio:" ",total:" "},{referencia:" ",cantidad:" ",categoria:" ",precio:" ",total:" "},{referencia:" ",cantidad:" ",categoria:" ",precio:" ",total:" "});var A=this.saldoAnterior.toString(),T=parseInt(y)+parseInt(S)+parseInt(I)+parseInt(j),V=parseInt(A)-(parseInt(y)+parseInt(S)+parseInt(I)+parseInt(j));E.push({referencia:"",cantidad:"",categoria:"",precio:"saldo A.",total:A},{referencia:"",cantidad:"",categoria:"",precio:"abono ",total:T.toString()},{referencia:"",cantidad:"",categoria:0,precio:"saldo ",total:V.toString()}),w+=30;var $=E.length;w+=8*($-3)}else{this.facturaArticulos.map((function(t){E.push({referencia:t.referencia,categoria:t.categoriaName,cantidad:t.cantidad.toString(),precio:t.precio.toString(),total:(t.cantidad*t.precio).toString()})}));var N=(this.totalVendido-this.descuento).toString();if("venta"==this.subTipoFactura){E.push({referencia:"",cantidad:"",categoria:"",precio:"subtotal",total:this.totalVendido.toString()},{referencia:"",cantidad:"",categoria:"",precio:"desc.",total:this.descuento.toString()},{referencia:"",cantidad:"",categoria:0,precio:"total ",total:N}),w+=30;var P=E.length;w+=8*(P-3)}else{var q=parseInt(y)+parseInt(S)+parseInt(I)+parseInt(j),M=parseInt(N)-(parseInt(y)+parseInt(S)+parseInt(I)+parseInt(j));E.push({referencia:"",cantidad:"",categoria:"",precio:"subtotal",total:this.totalVendido.toString()},{referencia:"",cantidad:"",categoria:"",precio:"desc.",total:this.descuento.toString()},{referencia:"",cantidad:"",categoria:"",precio:"total ",total:N},{referencia:"",cantidad:"",categoria:"",precio:"abono ",total:q.toString()},{referencia:"",cantidad:"",categoria:0,precio:"saldo ",total:M.toString()}),w+=40;var R=E.length;w+=10*(R-5)}}var O=this.$store.state.nombreUser.slice(0,13),B=this.comentario.slice(0,251),U=2.9*(w+61);this.checkTokenFine();var L=new z["a"];L.beginFormObject(0,0,200,U),L.setFont("helvetica","italic"),L.text("".concat(e),0,8,{charSpace:.4}),L.setFontSize(18),L.setFont("helvetica","bold"),L.setFontSize(t),L.text("".concat(a),0,15,{charSpace:.2}),L.setFontSize(t),L.text("NIT: ".concat(o),4,20,{charSpace:.2}),L.text("REGIMEN: ".concat(r),4,25,{charSpace:.2}),L.text("".concat(i),4,30,{charSpace:.2}),L.text("".concat(s,"(").concat(n,")"),4,35,{charSpace:.2}),L.text("CELULAR: ".concat(l),4,40,{charSpace:.2}),L.text("TELEFONO: ".concat(c),4,45,{charSpace:.2}),L.text("NOMBRE: ".concat(m),4,55,{charSpace:.3}),L.text("TIPO DOCUMENTO: ".concat(u),4,60,{charSpace:.3}),L.text("DOCUMENTO: ".concat(d),4,65,{charSpace:.3}),L.text("TELEFONO: ".concat(p),4,70,{charSpace:.3}),L.text("DIRECCION: ".concat(v),4,75,{charSpace:.3}),L.text("CIUDAD: ".concat(f),4,80,{charSpace:.3}),L.line(1,81,68,81),L.text("Factura Venta  ".concat(this.numFactura),4,85,{charSpace:.3}),L.text("".concat(x,"-").concat(b,"-").concat(C,"    ").concat(_,":").concat(k,"   "),4,90,{charSpace:.3});var G=[{align:"center",width:22,id:"referencia",name:"referencia",prompt:"Refer"},{align:"center",width:18,id:"categoria",name:"categoria",prompt:"Desc."},{align:"center",width:13,id:"cantidad",name:"cantidad",prompt:"Cant"},{align:"center",width:18,id:"precio",name:"precio",prompt:"Vr Unit"},{align:"center",width:19.5,id:"total",name:"total",prompt:"Vr total"}];L.table(0,95,E,G,{fontName:"Arial",fontSize:"9",autoSize:!1,headerBackgroundColor:"#FFFFFF",padding:.3}),L.setFont("helvetica","bold"),L.setFontSize(t),L.text("Vendedor: ".concat(O),15,w+5,{charSpace:.2}),L.text("Metodo de pago",20,w+10,{charSpace:.3});var H=[];H="debito"==this.tipoFactura?[{efectivo:y.toString(),tarjeta:I.toString(),nequi:S.toString(),credito:"0"}]:[{efectivo:y.toString(),tarjeta:I.toString(),nequi:S.toString(),credito:j.toString()}];var K=[{align:"center",width:22,id:"efectivo",name:"efectivo",prompt:"Efectivo"},{align:"center",width:22,id:"tarjeta",name:"tarjeta",prompt:"Tarjeta"},{align:"center",width:22,id:"nequi",name:"nequi",prompt:"Nequi"},{align:"center",width:25,id:"credito",name:"credito",prompt:"Sistecredito"}];L.table(0,w+15,H,K,{fontName:"Arial",fontSize:"9",autoSize:!1,headerBackgroundColor:"#FFFFFF",padding:.3}),L.text("Observaciones",28,w+30,{charSpace:.3}),L.text("".concat(B),4,w+35,{maxWidth:"52",charSpace:.3}),L.roundedRect(0,0,68,w+63,0,0),L.output("dataurlnewwindow")},checkTokenFine:function(){this.$router.push("/home")}},computed:{totalVendido:function(){return this.facturaArticulos.reduce((function(t,e){return t+parseInt(e.cantidad)*parseInt(e.precio)}),0)},totalCosto:function(){return this.facturaArticulos.reduce((function(t,e){return t+parseInt(e.cantidad)*parseInt(e.costo)}),0)}}}),_e=Ce,ke=(a("8d23"),Object(d["a"])(_e,ge,be,!1,null,"fcec9e96",null)),we=ke.exports;m()(ke,{VBtn:M["a"],VCard:R["a"],VCheckbox:O["a"],VCol:B["a"],VDataTable:U["a"],VDivider:p["a"],VIcon:v["a"],VRadio:L["a"],VRadioGroup:G["a"],VRow:H["a"],VSpacer:K["a"],VTextField:W["a"],VTextarea:Y["a"],VToolbar:J["a"],VToolbarTitle:X["a"]});var Ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-btn",{staticClass:"botonFactura",on:{click:function(e){return t.crearSalida()}}},[a("v-icon",[t._v("mdi-clipboard-account-outline")]),t._v("Crear salida ")],1),a("v-card",{staticStyle:{"margin-top":"70px","margin-left":"30px",width:"95%","box-shadow":"0 0 20px #A068B8"}},[a("v-row",[a("v-col",[a("div",{staticClass:"form-group row comentario"},[a("v-textarea",{attrs:{color:"#72128E",outlined:"",counter:250,label:"Descripcion"},model:{value:t.comentario,callback:function(e){t.comentario=e},expression:"comentario"}})],1)])],1)],1),a("v-container",{attrs:{fluid:""}},[a("v-row",{staticStyle:{"margin-top":"50px"}},[[a("v-col",[a("v-data-table",{staticClass:" elevation-15 ancho-tabla",attrs:{headers:t.articulosMostradorTitle,items:t.articulosMostrador,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Todos")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}})],1)]},proxy:!0},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.facturar(o)}}},[t._v("mdi-cart ")])]}}])})],1),a("v-col",[a("v-data-table",{staticClass:" elevation-15 ancho-tabla",attrs:{headers:t.articulosFacturaTitle,items:t.articulosFactura},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Facturados")]),a("v-spacer"),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}})],1)]},proxy:!0},{key:"item.cantidad",fn:function(e){return[a("v-text-field",{attrs:{min:"0",name:"quantity",outlined:"",type:"number"},model:{value:e.item.cantidad,callback:function(a){t.$set(e.item,"cantidad",a)},expression:"props.item.cantidad"}})]}},{key:"item.subtotal",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.precio*a.cantidad)+" ")]}},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.desfacturar(o)}}},[t._v("mdi-delete ")])]}}],null,!0)})],1)]],2)],1)],1)},ye=[],Se={data:function(){return{comentario:"",search:"",articulosTraidos:[],articulosMostrador:[],articulosMostradorTitle:[{text:"Categoria",value:"categoriaName",class:"purple darken-3 white--text"},{text:"Marca",value:"marcaName",class:"purple darken-3 white--text"},{text:"Referencia",value:"referencia",class:"purple darken-3 white--text"},{text:"Cantidad",value:"cantidad",class:"purple darken-3 white--text"},{text:"Agregar",value:"actions",class:"purple darken-3 white--text"}],articulosFactura:[],articulosFacturaTitle:[{text:"Categoria",value:"categoriaName",class:"grey darken-3 white--text"},{text:"Marca",value:"marcaName",class:"grey darken-3 white--text"},{text:"Referencia",value:"referencia",class:"grey darken-3 white--text"},{text:"Cantidad",value:"cantidad",class:"grey darken-3 white--text"},{text:"Quitar",value:"actions",class:"grey darken-3 white--text"}]}},created:function(){this.checkToken(),this.traerArticulosActivos()},methods:{checkToken:function(){this.$store.state.token||"/"===this.$router.currentRoute.name||this.$router.push("/")},msjErrores:function(t){N.a.fire({position:"top",icon:"error",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:2e3})},msjExitoso:function(t){N.a.fire({position:"top",icon:"success",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:1e3})},traerArticulosActivos:function(){var t=this,e={headers:{token:this.$store.state.token}};V.a.get("articulo/activos",e).then((function(e){t.articulosTraidos=e.data.articulo,0==t.articulosTraidos.length?t.msjErrores("No hay articulos"):t.meterArticulos(t.articulosTraidos)})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjErrores(a)}else{var o=e.response.data.errors[0].msg;t.msjErrores(o)}}))},meterArticulos:function(t){var e=[];t.map((function(t){e.push({_id:t._id,categoriaName:t.categoria.nombre,categoria:t.categoria._id,marcaName:t.marca.nombre,marca:t.marca._id,referencia:t.referencia,cantidad:1,precio:t.precio,costo:t.costo})})),this.articulosMostrador=e},facturar:function(t){var e=this.articulosMostrador.indexOf(t);this.articulosFactura.push(t),this.articulosMostrador.splice(e,1)},desfacturar:function(t){var e=this.articulosFactura.indexOf(t);this.articulosMostrador.push(t),this.articulosFactura.splice(e,1)},crearSalida:function(){var t=this;if(0==this.articulosFactura.length)return this.msjErrores("No hay articulos");if(this.comentario.length>250)return this.msjErrores("Comentario mayor a 250 caracteres");var e={headers:{token:this.$store.state.token}};V.a.post("movimiento/crearSalida",{usuario:this.$store.state.id,comentario:this.comentario,totalPrecio:this.totalVendido,totalCosto:this.totalCosto,articulos:this.articulosFactura},e).then((function(e){t.traerArticulosActivos(),t.articulosFactura=[],t.comentario="",t.msjExitoso(e.data.msg)})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjErrores(a)}else{var o=e.response.data.errors[0].msg;t.msjErrores(o)}}))}},computed:{totalVendido:function(){return this.articulosFactura.reduce((function(t,e){return t+parseInt(e.cantidad)*parseInt(e.precio)}),0)},totalCosto:function(){return this.articulosFactura.reduce((function(t,e){return t+parseInt(e.cantidad)*parseInt(e.costo)}),0)}}},je=Se,Ie=(a("eb82"),Object(d["a"])(je,Ee,ye,!1,null,"1379cfe4",null)),De=Ie.exports;m()(Ie,{VBtn:M["a"],VCard:R["a"],VCol:B["a"],VContainer:kt["a"],VDataTable:U["a"],VDivider:p["a"],VIcon:v["a"],VRow:H["a"],VSpacer:K["a"],VTextField:W["a"],VTextarea:Y["a"],VToolbar:J["a"],VToolbarTitle:X["a"]});var Fe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-app",[a("v-container",[[a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"32px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Comprar")])])]),a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Proveedor:")])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"40px","margin-left":"30px"}},[a("v-autocomplete",{staticStyle:{width:"350px","margin-left":"10px"},attrs:{solo:"",items:t.proveedores,label:"Proveedor",required:""},model:{value:t.proveedor,callback:function(e){t.proveedor=e},expression:"proveedor"}})],1)]),a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"10px","margin-left":"30px"}},[a("label",[t._v("No. Factura:")])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"5px","margin-left":"30px"}},[a("v-text-field",{staticStyle:{width:"350px","margin-left":"0px"},attrs:{solo:"",label:"Numero de factura"},model:{value:t.numFactura,callback:function(e){t.numFactura=e},expression:"numFactura"}})],1)]),a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"10px","margin-left":"30px"}},[a("label",[t._v("Archivo:")])]),a("div",[a("v-file-input",{staticClass:"inputVuetify",attrs:{"show-size":"",solo:"",label:"Excel con articulos",accept:".xlsx",placeholder:"Click para seleccionar archivo .xlsx"},on:{change:t.onChangess}})],1),a("div",[a("v-btn",{staticClass:"botonCargar",on:{click:function(e){return t.enviarDataExcel()}}},[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-label",[a("v-icon",{attrs:{size:"40",color:"#72128E"}},[t._v("mdi-cloud-upload-outline")]),t._v("Crear compra")],1)],1)],1)],1)]),a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"10px","margin-left":"30px"}},[a("label",[t._v("Comentario:")])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"5px","margin-left":"30px"}},[a("v-textarea",{staticClass:"form-group",staticStyle:{width:"550px"},attrs:{color:"#72128E",outlined:"",counter:250},model:{value:t.comentario,callback:function(e){t.comentario=e},expression:"comentario"}})],1)])],a("v-row",[a("v-col",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"20px","margin-left":"30px"}},[a("label",[t._v("Total vendido: "+t._s(t.totalVendido))])])]),a("v-col",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"20px","margin-left":"30px"}},[a("label",[t._v("Total costo: "+t._s(t.totalCosto))])])]),a("v-col",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"20px","margin-left":"30px"}},[a("label",[t._v("Rentabilidad: "+t._s(100*(1-t.totalCosto/t.totalVendido))+" %")])])])],1),a("div",{staticStyle:{"margin-top":"0px"}},[a("v-data-table",{staticClass:"elevation-15 ",staticStyle:{"margin-top":"50px"},attrs:{headers:t.dataExcelTitle,items:t.dataExcel,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Prendas compradas (Max. 300)")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar Prenda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0}])})],1)],2)],1)],1)},Ae=[],Te={data:function(){return{proveedores:[],proveedor:"",comentario:"",numFactura:"",dataExcel:[],file:null,search:"",dataExcelTitle:[{text:"Categoria",value:"categoria",class:"purple darken-3 white--text"},{text:"Marca",value:"marca",class:"purple darken-3 white--text"},{text:"Referencia",value:"referencia",class:"purple darken-3 white--text"},{text:"Unidades",value:"cantidad",class:"purple darken-3 white--text"},{text:"Precio",value:"precio",class:"purple darken-3 white--text"},{text:"Costo",value:"costo",class:"purple darken-3 white--text"}]}},created:function(){this.traerProveedores(),this.checkToken()},methods:{checkToken:function(){this.$store.state.token||"/"===this.$router.currentRoute.name||this.$router.push("/")},msjError:function(t){N.a.fire({position:"top",icon:"error",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:3e3})},msjExito:function(t){N.a.fire({position:"top",icon:"success",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:2e3})},msjProceso:function(){N.a.fire({title:"Registrando compra",html:"Procesando...",allowOutsideClick:!1,showConfirmButton:!1,willOpen:function(){N.a.showLoading()}})},traerProveedores:function(){var t=this,e=this,a=[],o={headers:{token:this.$store.state.token}};V.a.get("proveedor/activos",o).then((function(o){a=o.data.proveedor,a.length>0?a.map((function(t){e.proveedores.push({text:t.nombre,value:t._id})})):t.msjExito("No hay proveedores activos")})).catch((function(t){if(t.response.data.msg){var e=t.response.data.msg;this.msjError(e)}else{var a=t.response.data.errors[0].msg;this.msjError(a)}}))},onChangess:function(t){var e=this;if(this.file=t||null,this.file){var a=new FileReader;a.onload=function(t){var a=t.target.result,o=gt.a.read(a,{type:"binary"}),r=o.SheetNames[0],i=o.Sheets[r];e.dataExcel=gt.a.utils.sheet_to_json(i)},a.readAsBinaryString(this.file)}},enviarDataExcel:function(){var t=this;if(this.msjProceso(),""==this.proveedor.trim()||0==this.dataExcel.length)this.msjError("Proveedor y excel obligatorios");else if(this.dataExcel.length>300)this.msjError("Demasiados articulos, max 300");else{var e={headers:{token:this.$store.state.token}};V.a.post("/movimiento/crearCompra",{usuario:this.$store.state.id,articulos:this.dataExcel,proveedor:this.proveedor,comentario:this.comentario,numFactura:this.numFactura,totalPrecio:this.totalVendido,totalCosto:this.totalCosto},e).then((function(e){t.file=null,t.dataExcel=[],t.onChangess(null),N.a.close(),t.msjExito(e.data.msg),t.limpiarTodo()})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))}},limpiarTodo:function(){this.proveedor="",this.numFactura="",this.dataExcel=[],this.comentario="",this.onChangess(null)}},computed:{totalVendido:function(){return this.dataExcel.reduce((function(t,e){return t+parseInt(e.cantidad)*parseInt(e.precio)}),0)},totalCosto:function(){return this.dataExcel.reduce((function(t,e){return t+parseInt(e.cantidad)*parseInt(e.costo)}),0)}}},Ve=Te,$e=(a("a2936"),Object(d["a"])(Ve,Fe,Ae,!1,null,"3ca7847c",null)),Ne=$e.exports;m()($e,{VApp:y["a"],VAutocomplete:_t["a"],VBtn:M["a"],VCol:B["a"],VContainer:kt["a"],VDataTable:U["a"],VFileInput:ee["a"],VFlex:mt["a"],VIcon:v["a"],VLabel:ae["a"],VRow:H["a"],VSpacer:K["a"],VTextField:W["a"],VTextarea:Y["a"],VToolbar:J["a"],VToolbarTitle:X["a"]});var ze=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",[[a("v-row",[a("v-col",["administrador"==this.$store.state.rol?[a("v-btn",{staticClass:"botonNew",staticStyle:{"margin-top":"20px",width:"200px",height:"200px","box-shadow":"0 0 20px #A068B8","border-radius":"100%"},attrs:{to:{path:"/movimientos/infoCompras"}}},[a("v-col",[a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-icon",{attrs:{size:"70",color:"#72128E"}},[t._v("mdi-shopping")])],1)],1),a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-label",[t._v("Compras")])],1)],1)],1)],1)]:t._e()],2),a("v-col",["administrador"==this.$store.state.rol?[a("v-btn",{staticClass:"botonNew",staticStyle:{"margin-top":"20px",width:"200px",height:"200px","box-shadow":"0 0 20px #A068B8","border-radius":"100%"},attrs:{to:{path:"/movimientos/infoSalidas"}}},[a("v-col",[a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-icon",{attrs:{size:"70",color:"#72128E"}},[t._v("mdi-clipboard-text-outline")])],1)],1),a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-label",[t._v("salidas")])],1)],1)],1)],1)]:t._e()],2)],1),a("v-row",[a("v-col",["administrador"==this.$store.state.rol?[a("v-btn",{staticClass:"botonNew",staticStyle:{"margin-top":"20px",width:"200px",height:"200px","box-shadow":"0 0 20px #A068B8","border-radius":"100%"},attrs:{to:{path:"/movimientos/infoVentas"}}},[a("v-col",[a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-icon",{attrs:{size:"70",color:"#72128E"}},[t._v("mdi-archive-outline")])],1)],1),a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-label",[t._v(" ventas ")])],1)],1)],1)],1)]:t._e()],2)],1)]],2)],1)},Pe=[],qe={created:function(){this.checkToken()},methods:{checkToken:function(){this.$store.state.token||"/"===this.$router.currentRoute.name||this.$router.push("/")}}},Me=qe,Re=(a("e785"),Object(d["a"])(Me,ze,Pe,!1,null,"418545c4",null)),Oe=Re.exports;m()(Re,{VBtn:M["a"],VCol:B["a"],VContainer:kt["a"],VFlex:mt["a"],VIcon:v["a"],VLabel:ae["a"],VRow:H["a"]});var Be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",[[a("v-row",[a("v-col",["administrador"==this.$store.state.rol?[a("v-btn",{staticClass:"botonNew",staticStyle:{"margin-top":"20px",width:"200px",height:"200px","box-shadow":"0 0 20px #A068B8","border-radius":"100%"},attrs:{to:{path:"/ventas/vDebitos"}}},[a("v-col",[a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-icon",{attrs:{size:"70",color:"#72128E"}},[t._v("mdi-set-center-right")])],1)],1),a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-label",[t._v("Debitos")])],1)],1)],1)],1)]:t._e()],2),a("v-col",["administrador"==this.$store.state.rol?[a("v-btn",{staticClass:"botonNew",staticStyle:{"margin-top":"20px",width:"200px",height:"200px","box-shadow":"0 0 20px #A068B8","border-radius":"100%"},attrs:{to:{path:"/ventas/vAbonos"}}},[a("v-col",[a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-icon",{attrs:{size:"70",color:"#72128E"}},[t._v("mdi-book")])],1)],1),a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-label",[t._v("Abonos"),a("br"),t._v("sobre abono")])],1)],1)],1)],1)]:t._e()],2)],1),a("v-row",[a("v-col",["administrador"==this.$store.state.rol?[a("v-btn",{staticClass:"botonNew",staticStyle:{"margin-top":"20px",width:"200px",height:"200px","box-shadow":"0 0 20px #A068B8","border-radius":"100%"},attrs:{to:{path:"/ventas/vVentas"}}},[a("v-col",[a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-icon",{attrs:{size:"70",color:"#72128E"}},[t._v("mdi-card-bulleted")])],1)],1),a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-label",[t._v("VENTAS")])],1)],1)],1)],1)]:t._e()],2),a("v-col",["administrador"==this.$store.state.rol?[a("v-btn",{staticClass:"botonNew",staticStyle:{"margin-top":"20px",width:"200px",height:"200px","box-shadow":"0 0 20px #A068B8","border-radius":"100%"},attrs:{to:{path:"/ventas/vFactura"}}},[a("v-col",[a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-icon",{attrs:{size:"70",color:"#72128E"}},[t._v("mdi-magnify")])],1)],1),a("v-row",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-label",[t._v("FACTURA")])],1)],1)],1)],1)]:t._e()],2)],1)]],2)],1)},Ue=[],Le={data:function(){return{}},created:function(){this.checkToken()},methods:{checkToken:function(){this.$store.state.token||"/"===this.$router.currentRoute.name||this.$router.push("/")}}},Ge=Le,He=(a("eca3"),Object(d["a"])(Ge,Be,Ue,!1,null,"65f33547",null)),Ke=He.exports;m()(He,{VBtn:M["a"],VCol:B["a"],VContainer:kt["a"],VFlex:mt["a"],VIcon:v["a"],VLabel:ae["a"],VRow:H["a"]});var We=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",{attrs:{fluid:""}},[1==t.vista?[a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"32px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Salidas")])]),a("v-spacer"),a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",staticStyle:{"margin-right":"30px","margin-left":"20px","margin-top":"50px"},attrs:{depressed:"",dark:""},on:{click:function(e){return t.exportExcel()}}},[a("v-icon",{attrs:{size:"25"}},[t._v("mdi-file-excel-outline")]),t._v("Exportar ")],1),a("div",{staticStyle:{"margin-top":"50px","margin-right":"30px"}},[a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",attrs:{depressed:"",dark:""},on:{click:function(e){return t.reset()}}},[a("v-icon",{attrs:{size:"20"}},[t._v("mdi-plus")]),t._v(" Nuevo ")],1)],1)],1),a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Fecha inicial")])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"40px","margin-left":"30px"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[a("v-text-field",t._g(t._b({staticStyle:{width:"250px","margin-left":"20px"},attrs:{"prepend-icon":"mdi-calendar",readonly:""},model:{value:t.fechaInicio,callback:function(e){t.fechaInicio=e},expression:"fechaInicio"}},"v-text-field",r,!1),o))]}}],null,!1,3553476044),model:{value:t.calendarioInicio,callback:function(e){t.calendarioInicio=e},expression:"calendarioInicio"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.fechaInicio,callback:function(e){t.fechaInicio=e},expression:"fechaInicio"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.calendarioInicio=!1}}},[t._v(" OK ")])],1)],1)],1),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Fecha final")])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"40px","margin-left":"30px"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[a("v-text-field",t._g(t._b({staticStyle:{width:"250px","margin-left":"20px"},attrs:{"prepend-icon":"mdi-calendar",readonly:""},model:{value:t.fechaFinal,callback:function(e){t.fechaFinal=e},expression:"fechaFinal"}},"v-text-field",r,!1),o))]}}],null,!1,2625405259),model:{value:t.calendarioFinal,callback:function(e){t.calendarioFinal=e},expression:"calendarioFinal"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.fechaFinal,callback:function(e){t.fechaFinal=e},expression:"fechaFinal"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.calendarioFinal=!1}}},[t._v(" OK ")])],1)],1)],1),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"30px","margin-left":"30px"}},[a("v-btn",{staticStyle:{"margin-right":"10px","margin-left":"50px","margin-top":"20px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.traerSalidas()}}},[a("v-icon",{attrs:{size:"40"}},[t._v("mdi-magnify")])],1)],1)]),a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Total precio: "+t._s(t.totalVendido))])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"250px"}},[a("label",[t._v("Total costo: "+t._s(t.totalCosto))])])]),[a("v-data-table",{staticClass:"elevation-15 ",staticStyle:{"margin-top":"50px"},attrs:{headers:t.salidasTitle,items:t.salidas,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar por caracteres","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",on:{click:function(e){return t.cambioPagina(2,o)}}},[t._v("mdi-file-find")])]}}],null,!0)})]]:t._e(),2==t.vista?[a("v-container",[a("v-row",[a("v-btn",{staticClass:"mb-4",staticStyle:{"margin-left":"50px","margin-top":"50px"},attrs:{icon:"",color:"#AF7AC5"},on:{click:function(e){return t.cambioPagina(1,!1)}}},[a("v-icon",{attrs:{size:"50"}},[t._v("mdi-arrow-left-bold-circle-outline")])],1)],1),a("v-card",{staticStyle:{"margin-top":"40px","margin-left":"30px",width:"95%","box-shadow":"0 0 20px #A068B8",padding:"15px"}},[a("v-row",[a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Fecha:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.salida.createdAt))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Hora:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.salida.time))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Usuario:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.salida.usuario))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Comentario:")]),a("label",{staticClass:"col-sm-5 col-form-label",staticStyle:{border:"1px solid #C0C0C0","margin-top":"20px","margin-bottom":"20px"}},[t._v(t._s(t.salida.comentario))])])]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Total costo:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("$ "+t._s(t.salida.totalCosto))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Total precio:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("$ "+t._s(t.salida.totalPrecio))])])])],1)],1),a("v-data-table",{staticClass:"elevation-15 ",staticStyle:{"margin-top":"50px"},attrs:{headers:t.articulosTitle,items:t.salida.articulos,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Prendas de salida")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar Prenda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.subTotal",fn:function(e){var a=e.item;return[t._v(" "+t._s(parseInt(a.cantidad)*parseInt(a.precio))+" ")]}}],null,!0)})],1)]:t._e()],2)],1)},Ye=[],Je={data:function(){return{vista:1,calendarioInicio:!1,calendarioFinal:!1,fechaFinal:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),fechaInicio:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),search:"",salidas:[],salida:{},salidasTitle:[{text:"Fecha",value:"createdAt",class:"purple darken-3 white--text",sortable:!0},{text:"Hora",value:"time",class:"purple darken-3 white--text",sortable:!0},{text:"Usuario",value:"usuario",class:"purple darken-3 white--text",sortable:!1},{text:"Comentario",value:"comentario",class:"purple darken-3 white--text",sortable:!1},{text:"T.Precio",value:"totalPrecio",class:"purple darken-3 white--text",sortable:!1},{text:"T.Costo",value:"totalCosto",class:"purple darken-3 white--text",sortable:!1},{text:"Opciones",value:"actions",class:"purple darken-3 white--text",width:"10%",sortable:!1}],articulosTitle:[{text:"Categoria",value:"categoria",class:"purple darken-3 white--text"},{text:"Marca",value:"marca",class:"purple darken-3 white--text"},{text:"Referencia",value:"referencia",class:"purple darken-3 white--text"},{text:"Cantidades",value:"cantidad",class:"purple darken-3 white--text"},{text:"Precio",value:"precio",class:"purple darken-3 white--text"},{text:"Sub Total",value:"subTotal",class:"purple darken-3 white--text"}]}},created:function(){this.checkToken()},methods:{checkToken:function(){this.$store.state.token||"/"===this.$router.currentRoute.name||this.$router.push("/")},msjError:function(t){N.a.fire({position:"top",icon:"error",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:3e3})},msjExito:function(t){N.a.fire({position:"top",icon:"success",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:2e3})},cambioPagina:function(t,e){2==t?(this.vista=2,this.detallesSalida(e),this.salidas=[]):(this.vista=1,this.salida={})},reset:function(){this.$router.push("/crearSalida")},traerSalidas:function(){var t=this,e=(new Date(this.fechaFinal).getTime()-new Date(this.fechaInicio).getTime())/864e5;if(e<0)return this.msjError("Fecha inicial mayor a fecha final");if(e>180)return this.msjError("Max. 180 dias");var a={headers:{token:this.$store.state.token}};V.a.get("movimiento/salida?fechaInicial=".concat(this.fechaInicio,"&fechaFinal=").concat(this.fechaFinal),a).then((function(e){var a=e.data.salida;t.limpiarFechas(a)})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},limpiarFechas:function(t){var e=[];t.length>0?t.map((function(t){var a=new Date(t.createdAt),o=a.getHours()+5+":"+a.getMinutes(),r=t.createdAt.split("T"),i=r[0];e.push({_id:t._id,createdAt:i,time:o,usuario:t.usuario.nombreUser,comentario:t.comentario,totalPrecio:t.totalPrecio,totalCosto:t.totalCosto})})):this.msjExito("No hay Salidas"),this.salidas=e},detallesSalida:function(t){var e=this,a={headers:{token:this.$store.state.token}};V.a.get("movimiento/salidaById/".concat(t._id),a).then((function(a){var o=a.data.salida;e.limpiarDatosCompra(o,t)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},limpiarDatosCompra:function(t,e){this.salida=e;var a=[],o=t.articulos;o.map((function(t){var e=t.sku.split("-");a.push({referencia:e[2],categoria:e[0],marca:e[1],cantidad:t.cantidad,costo:t.costo,precio:t.precio})})),this.salida.articulos=a},exportExcel:function(){var t=[],e=this;if(e.salidas.length>1e3)return this.msjError("Max. 1000 datos");e.salidas.map((function(e){t.push({fecha:e.createdAt,hora:e.time,usuario:e.usuario,totalPrecio:e.totalPrecio,totalCosto:e.totalCosto})}));var a=gt.a.utils.json_to_sheet(t),o=gt.a.utils.book_new(),r="salidas";gt.a.utils.book_append_sheet(o,a,r),gt.a.writeFile(o,"".concat(r,".xlsx"))},borrar:function(t){var e=this,a={headers:{token:this.$store.state.token}};V.a.get("movimiento/eliminarCompraById/".concat(t._id),a).then((function(t){var a=t.data.compra;e.msjExito(a),e.salidas=[]})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))}},computed:{totalVendido:function(){return this.salidas.reduce((function(t,e){return t+parseInt(e.totalPrecio)}),0)},totalCosto:function(){return this.salidas.reduce((function(t,e){return t+parseInt(e.totalCosto)}),0)}}},Xe=Je,Qe=(a("98dc"),a("2e4b")),Ze=a("e449"),ta=Object(d["a"])(Xe,We,Ye,!1,null,"f516575a",null),ea=ta.exports;m()(ta,{VBtn:M["a"],VCard:R["a"],VCol:B["a"],VContainer:kt["a"],VDataTable:U["a"],VDatePicker:Qe["a"],VDivider:p["a"],VIcon:v["a"],VMenu:Ze["a"],VRow:H["a"],VSpacer:K["a"],VTextField:W["a"],VToolbar:J["a"],VToolbarTitle:X["a"]});var aa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",{attrs:{fluid:""}},[1==t.vista?[a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"32px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Compras")])]),a("v-spacer"),a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",staticStyle:{"margin-right":"30px","margin-left":"20px","margin-top":"50px"},attrs:{depressed:"",dark:""},on:{click:function(e){return t.exportExcel()}}},[a("v-icon",{attrs:{size:"25"}},[t._v("mdi-file-excel-outline")]),t._v("Exportar ")],1),a("div",{staticStyle:{"margin-top":"50px","margin-right":"30px"}},[a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",attrs:{depressed:"",dark:""},on:{click:function(e){return t.reset()}}},[a("v-icon",{attrs:{size:"20"}},[t._v("mdi-plus")]),t._v(" Nuevo ")],1)],1)],1),a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Fecha inicial")])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"40px","margin-left":"30px"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[a("v-text-field",t._g(t._b({staticStyle:{width:"250px","margin-left":"20px"},attrs:{"prepend-icon":"mdi-calendar",readonly:""},model:{value:t.fechaInicio,callback:function(e){t.fechaInicio=e},expression:"fechaInicio"}},"v-text-field",r,!1),o))]}}],null,!1,3553476044),model:{value:t.calendarioInicio,callback:function(e){t.calendarioInicio=e},expression:"calendarioInicio"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.fechaInicio,callback:function(e){t.fechaInicio=e},expression:"fechaInicio"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.calendarioInicio=!1}}},[t._v(" OK ")])],1)],1)],1),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Fecha final")])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"40px","margin-left":"30px"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[a("v-text-field",t._g(t._b({staticStyle:{width:"250px","margin-left":"20px"},attrs:{"prepend-icon":"mdi-calendar",readonly:""},model:{value:t.fechaFinal,callback:function(e){t.fechaFinal=e},expression:"fechaFinal"}},"v-text-field",r,!1),o))]}}],null,!1,2625405259),model:{value:t.calendarioFinal,callback:function(e){t.calendarioFinal=e},expression:"calendarioFinal"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.fechaFinal,callback:function(e){t.fechaFinal=e},expression:"fechaFinal"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.calendarioFinal=!1}}},[t._v(" OK ")])],1)],1)],1),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"30px","margin-left":"30px"}},[a("v-btn",{staticStyle:{"margin-right":"10px","margin-left":"50px","margin-top":"20px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.traerCompras()}}},[a("v-icon",{attrs:{size:"40"}},[t._v("mdi-magnify")])],1)],1)]),a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Total precio: "+t._s(t.totalVendido))])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"250px"}},[a("label",[t._v("Total costo: "+t._s(t.totalCosto))])])]),[a("v-data-table",{staticClass:"elevation-15 ",staticStyle:{"margin-top":"50px"},attrs:{headers:t.comprasTitle,items:t.compras,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar por caracteres","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",on:{click:function(e){return t.cambioPagina(2,o)}}},[t._v("mdi-file-find")])]}}],null,!0)})]]:t._e(),2==t.vista?[a("v-container",[a("v-row",[a("v-btn",{staticClass:"mb-4",staticStyle:{"margin-left":"50px","margin-top":"50px"},attrs:{icon:"",color:"#AF7AC5"},on:{click:function(e){return t.cambioPagina(1,!1)}}},[a("v-icon",{attrs:{size:"50"}},[t._v("mdi-arrow-left-bold-circle-outline")])],1)],1),a("v-card",{staticStyle:{"margin-top":"40px","margin-left":"30px",width:"95%","box-shadow":"0 0 20px #A068B8",padding:"15px"}},[a("v-row",[a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Fecha:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.compra.createdAt))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Hora:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.compra.time))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("No. Factura:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.compra.numFactura))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Usuario:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.compra.usuario))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Proveedor:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.compra.proveedor))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Comentario:")]),a("label",{staticClass:"col-sm-5 col-form-label",staticStyle:{border:"1px solid #C0C0C0","margin-top":"20px","margin-bottom":"20px"}},[t._v(t._s(t.compra.comentario))])])]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Total costo:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("$ "+t._s(t.compra.totalCosto))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Total precio:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("$ "+t._s(t.compra.totalPrecio))])])])],1)],1),a("v-data-table",{staticClass:"elevation-15 ",staticStyle:{"margin-top":"50px"},attrs:{headers:t.articulosTitle,items:t.compra.articulos,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Prendas de salida")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar Prenda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.totalPrecio",fn:function(e){var a=e.item;return[t._v(" "+t._s(parseInt(a.cantidad)*parseInt(a.precio))+" ")]}},{key:"item.totalCosto",fn:function(e){var a=e.item;return[t._v(" "+t._s(parseInt(a.cantidad)*parseInt(a.costo))+" ")]}}],null,!0)})],1)]:t._e()],2)],1)},oa=[],ra={data:function(){return{vista:1,calendarioInicio:!1,calendarioFinal:!1,fechaFinal:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),fechaInicio:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),search:"",compras:[],compra:{},articulos:[],comprasTitle:[{text:"Fecha",value:"createdAt",class:"purple darken-3 white--text",sortable:!0},{text:"Hora",value:"time",class:"purple darken-3 white--text",sortable:!0},{text:"Usuario",value:"usuario",class:"purple darken-3 white--text",sortable:!1},{text:"Proveedor",value:"proveedor",class:"purple darken-3 white--text",sortable:!1},{text:"Comentario",value:"comentario",class:"purple darken-3 white--text",sortable:!1},{text:"T.Precio",value:"totalPrecio",class:"purple darken-3 white--text",sortable:!1},{text:"T.Costo",value:"totalCosto",class:"purple darken-3 white--text",sortable:!1},{text:"Opciones",value:"actions",class:"purple darken-3 white--text",width:"10%",sortable:!1}],articulosTitle:[{text:"Categoria",value:"categoria",class:"purple darken-3 white--text"},{text:"Marca",value:"marca",class:"purple darken-3 white--text"},{text:"Referencia",value:"referencia",class:"purple darken-3 white--text"},{text:"Cantidades",value:"cantidad",class:"purple darken-3 white--text"},{text:"Precio",value:"precio",class:"purple darken-3 white--text"},{text:"Costo",value:"costo",class:"purple darken-3 white--text"},{text:"Total precio",value:"totalPrecio",class:"purple darken-3 white--text"},{text:"Total costo",value:"totalCosto",class:"purple darken-3 white--text"}]}},created:function(){this.checkToken()},methods:{checkToken:function(){this.$store.state.token||"/"===this.$router.currentRoute.name||this.$router.push("/")},msjError:function(t){N.a.fire({position:"top",icon:"error",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:3e3})},msjExito:function(t){N.a.fire({position:"top",icon:"success",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:2e3})},cambioPagina:function(t,e){2==t?(this.vista=2,this.detallesCompra(e),this.compras=[]):(this.compra={},this.vista=1)},detallesCompra:function(t){var e=this,a={headers:{token:this.$store.state.token}};V.a.get("movimiento/compraById/".concat(t._id),a).then((function(a){var o=a.data.compra;e.limpiarDatosCompra(o,t)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},limpiarDatosCompra:function(t,e){this.compra=e;var a=[],o=t.articulos;o.map((function(t){var e=t.sku.split("-");a.push({referencia:e[2],categoria:e[0],marca:e[1],cantidad:t.cantidad,costo:t.costo,precio:t.precio})})),this.compra.articulos=a},reset:function(){this.$router.push("/crearCompra")},traerCompras:function(){var t=this,e=(new Date(this.fechaFinal).getTime()-new Date(this.fechaInicio).getTime())/864e5;if(e<0)return this.msjError("Fecha inicial mayor a fecha final");if(e>180)return this.msjError("Max. 180 dias");var a={headers:{token:this.$store.state.token}};V.a.get("movimiento/compra?fechaInicial=".concat(this.fechaInicio,"&fechaFinal=").concat(this.fechaFinal),a).then((function(e){var a=e.data.compra;t.limpiarFechas(a)})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},limpiarFechas:function(t){var e=[];t.length>0?(t.map((function(t){var a=new Date(t.createdAt),o=a.getHours()+5+":"+a.getMinutes(),r=t.createdAt.split("T"),i=r[0];e.push({_id:t._id,createdAt:i,time:o,usuario:t.usuario.nombreUser,proveedor:t.proveedor.nombre,comentario:t.comentario,numFactura:t.numFactura,totalPrecio:t.totalPrecio,totalCosto:t.totalCosto})})),this.compras=e):this.msjExito("No hay Compras")},exportExcel:function(){var t=[],e=this;if(e.compras.length>1e3)return this.msjError("Max. 1000 datos");e.compras.map((function(e){t.push({fecha:e.createdAt,hora:e.time,usuario:e.usuario,proveedor:e.proveedor,totalPrecio:e.totalPrecio,totalCosto:e.totalCosto})}));var a=gt.a.utils.json_to_sheet(t),o=gt.a.utils.book_new(),r="compras";gt.a.utils.book_append_sheet(o,a,r),gt.a.writeFile(o,"".concat(r,".xlsx"))},borrar:function(t){var e=this,a={headers:{token:this.$store.state.token}};V.a.get("movimiento/eliminarCompraById/".concat(t._id),a).then((function(t){e.msjExito(t.data.compra),e.compras=[]})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))}},computed:{totalVendido:function(){return this.compras.reduce((function(t,e){return t+parseInt(e.totalPrecio)}),0)},totalCosto:function(){return this.compras.reduce((function(t,e){return t+parseInt(e.totalCosto)}),0)}}},ia=ra,sa=(a("b3e7"),Object(d["a"])(ia,aa,oa,!1,null,"583d4f10",null)),na=sa.exports;m()(sa,{VBtn:M["a"],VCard:R["a"],VCol:B["a"],VContainer:kt["a"],VDataTable:U["a"],VDatePicker:Qe["a"],VDivider:p["a"],VIcon:v["a"],VMenu:Ze["a"],VRow:H["a"],VSpacer:K["a"],VTextField:W["a"],VToolbar:J["a"],VToolbarTitle:X["a"]});var la=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",{attrs:{fluid:""}},[1==t.vista?[a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"32px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Abonos Sobre Abonos")])]),a("v-spacer"),a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",staticStyle:{"margin-right":"30px","margin-left":"20px","margin-top":"50px"},attrs:{depressed:"",dark:""},on:{click:function(e){return t.exportExcel()}}},[a("v-icon",{attrs:{size:"25"}},[t._v("mdi-file-excel-outline")]),t._v("Exportar ")],1),a("div",{staticStyle:{"margin-top":"50px","margin-right":"30px"}},[a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",attrs:{depressed:"",dark:""},on:{click:function(e){return t.reset()}}},[a("v-icon",{attrs:{size:"20"}},[t._v("mdi-plus")]),t._v(" Nuevo ")],1)],1)],1),a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Fecha inicial")])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"40px","margin-left":"30px"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[a("v-text-field",t._g(t._b({staticStyle:{width:"250px","margin-left":"20px"},attrs:{"prepend-icon":"mdi-calendar",readonly:""},model:{value:t.fechaInicio,callback:function(e){t.fechaInicio=e},expression:"fechaInicio"}},"v-text-field",r,!1),o))]}}],null,!1,3553476044),model:{value:t.calendarioInicio,callback:function(e){t.calendarioInicio=e},expression:"calendarioInicio"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.fechaInicio,callback:function(e){t.fechaInicio=e},expression:"fechaInicio"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.calendarioInicio=!1}}},[t._v(" OK ")])],1)],1)],1),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Fecha final")])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"40px","margin-left":"30px"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[a("v-text-field",t._g(t._b({staticStyle:{width:"250px","margin-left":"20px"},attrs:{"prepend-icon":"mdi-calendar",readonly:""},model:{value:t.fechaFinal,callback:function(e){t.fechaFinal=e},expression:"fechaFinal"}},"v-text-field",r,!1),o))]}}],null,!1,2625405259),model:{value:t.calendarioFinal,callback:function(e){t.calendarioFinal=e},expression:"calendarioFinal"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.fechaFinal,callback:function(e){t.fechaFinal=e},expression:"fechaFinal"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.calendarioFinal=!1}}},[t._v(" OK ")])],1)],1)],1),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"30px","margin-left":"30px"}},[a("v-btn",{staticStyle:{"margin-right":"10px","margin-left":"50px","margin-top":"20px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.traerabonos()}}},[a("v-icon",{attrs:{size:"40"}},[t._v("mdi-magnify")])],1)],1)]),a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("T. efectivo:"+t._s(t.totalEfectivo)+" ")])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"50px"}},[a("label",[t._v("T. nequi:"+t._s(t.totalNequi)+" ")])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"50px"}},[a("label",[t._v("T. tarjeta: "+t._s(t.totalTarjeta))])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"50px"}},[a("label",[t._v("T. credito: "+t._s(t.totalCredito))])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"50px"}},[a("label",[t._v("T. saldo pendinte: "+t._s(t.totalSaldo))])])]),[a("v-data-table",{staticClass:"elevation-15 ",staticStyle:{"margin-top":"50px"},attrs:{headers:t.creditosTitle,items:t.abonos,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar por caracteres","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.saldo",fn:function(e){var a=e.item;return[t._v(" "+t._s(parseInt(a.saldoAnterior)-parseInt(a.efectivo)-parseInt(a.nequi)-parseInt(a.tarjeta)-parseInt(a.credito))+" ")]}},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",on:{click:function(e){return t.cambioPagina(2,o)}}},[t._v("mdi-file-find")])]}}],null,!0)})]]:t._e(),2==t.vista?[a("v-container",[a("v-row",[a("v-btn",{staticClass:"mb-4",staticStyle:{"margin-left":"50px","margin-top":"50px"},attrs:{icon:"",color:"#AF7AC5"},on:{click:function(e){return t.cambioPagina(1,!1)}}},[a("v-icon",{attrs:{size:"50"}},[t._v("mdi-arrow-left-bold-circle-outline")])],1)],1),a("v-card",{staticStyle:{"margin-top":"40px","margin-left":"30px",width:"95%","box-shadow":"0 0 20px #A068B8",padding:"15px"}},[a("v-row",[a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("No. Factura:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.abono.numFactura))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Fecha:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.abono.createdAt))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Hora:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.abono.time))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Usuario:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.abono.usuario))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Comentario:")]),a("label",{staticClass:"col-sm-5 col-form-label",staticStyle:{border:"1px solid #C0C0C0","margin-top":"20px","margin-bottom":"20px"}},[t._v(t._s(t.abono.comentario))])])]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Saldo anterior:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("$ "+t._s(t.abono.saldoAnterior))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Efectivo:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("$ "+t._s(t.abono.efectivo))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Nequi:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("$ "+t._s(t.abono.nequi))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Tarjeta:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("$ "+t._s(t.abono.tarjeta))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Credito:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("$ "+t._s(t.abono.credito))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Saldo:")]),a("label",{staticClass:"col-sm-5 col-form-label",staticStyle:{"border-top":"solid purple"}},[t._v("$ "+t._s(t.abono.saldoAnterior-t.abono.efectivo-t.abono.nequi-t.abono.tarjeta-t.abono.credito))])])])],1)],1),a("v-card",{staticStyle:{"margin-top":"40px","margin-left":"30px",width:"95%","box-shadow":"0 0 20px #A068B8",padding:"15px"}},[a("v-row",[a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Tipo de documento:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.tipoDocumento))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Numero de documento:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.abono.persona))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Nombre:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.nombre))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Telefono:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.telefono))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Direccion:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.direccion))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Ciudad:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.ciudad))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Correo:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.email))])])])],1)],1),a("v-data-table",{staticClass:"elevation-15 ",staticStyle:{"margin-top":"50px"},attrs:{headers:t.articulosTitle,items:t.articulos,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar Prenda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0}],null,!1,2031539067)})],1)]:t._e()],2)],1)},ca=[],da={data:function(){return{vista:1,abonos:[],abono:{},articulos:[],cliente:{},calendarioInicio:!1,calendarioFinal:!1,fechaFinal:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),fechaInicio:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),search:"",creditosTitle:[{text:"Fecha",value:"createdAt",class:"purple darken-3 white--text",sortable:!0},{text:"Hora",value:"time",class:"purple darken-3 white--text",sortable:!0},{text:"factura",value:"numFactura",class:"purple darken-3 white--text",sortable:!1},{text:"Comentario",value:"comentario",class:"purple darken-3 white--text",sortable:!1},{text:"Saldo anterior",value:"saldoAnterior",class:"purple darken-3 white--text",sortable:!1},{text:"Efectivo",value:"efectivo",class:"purple darken-3 white--text",sortable:!1},{text:"Nequi",value:"nequi",class:"purple darken-3 white--text",sortable:!1},{text:"Tarjeta",value:"tarjeta",class:"purple darken-3 white--text",sortable:!1},{text:"Credito",value:"credito",class:"purple darken-3 white--text",sortable:!1},{text:"Saldo",value:"saldo",class:"purple darken-3 white--text",sortable:!1},{text:"Opciones",value:"actions",class:"purple darken-3 white--text",width:"10%",sortable:!1}],articulosTitle:[{text:"Categoria",value:"categoria",class:"purple darken-3 white--text"},{text:"Marca",value:"marca",class:"purple darken-3 white--text"},{text:"Referencia",value:"referencia",class:"purple darken-3 white--text"},{text:"Cantidades",value:"cantidad",class:"purple darken-3 white--text"}]}},created:function(){this.checkToken()},methods:{checkToken:function(){this.$store.state.token||"/"===this.$router.currentRoute.name||this.$router.push("/")},msjError:function(t){N.a.fire({position:"top",icon:"error",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:3e3})},msjExito:function(t){N.a.fire({position:"top",icon:"success",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:2e3})},cambioPagina:function(t,e){2==t?(this.vista=2,this.detallesAbonos(e),this.abonos=[]):(this.vista=1,this.abono={},this.cliente={})},traerabonos:function(){var t=this,e=(new Date(this.fechaFinal).getTime()-new Date(this.fechaInicio).getTime())/864e5;if(e<0)return this.msjError("Fecha inicial mayor a fecha final");if(e>31)return this.msjError("Max. 31 dias");var a={headers:{token:this.$store.state.token}};V.a.get("venta/abono?fechaInicial=".concat(this.fechaInicio,"&fechaFinal=").concat(this.fechaFinal),a).then((function(e){var a=e.data.venta;t.limpiarFechas(a)})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},limpiarFechas:function(t){var e=[];t.length>0?t.map((function(t){var a=new Date(t.createdAt),o=a.getHours()+5+":"+a.getMinutes(),r=t.createdAt.split("T"),i=r[0];e.push({_id:t._id,createdAt:i,time:o,numFactura:t.numFactura,usuario:t.usuario.nombreUser,persona:t.persona,comentario:t.comentario,saldoAnterior:t.saldoAnterior,efectivo:t.efectivo,nequi:t.nequi,tarjeta:t.tarjeta,credito:t.credito})})):this.msjExito("No hay abonos"),this.abonos=e},reset:function(){this.$router.push("/facturacion")},detallesAbonos:function(t){var e=this;if(this.abono=t,""!=this.abono.persona.trim()){var a={headers:{token:this.$store.state.token}};V.a.get("cliente/buscando?numDocumento=".concat(this.abono.persona),a).then((function(t){0!=t.data.persona?e.cliente=t.data.persona:e.msjExito("Cliente no registrado en el sistema")})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjErrores(a)}else{var o=t.response.data.errors[0].msg;e.msjErrores(o)}}))}var o={headers:{token:this.$store.state.token}};V.a.get("venta/ventaId/".concat(t._id),o).then((function(t){var a=t.data.venta;e.limpiarDatosAbono(a)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},limpiarDatosAbono:function(t){var e=[],a=t.articulos;a.length>0&&a.map((function(t){var a=t.sku.split("-");e.push({referencia:a[2],categoria:a[0],marca:a[1],cantidad:t.cantidad})})),this.articulos=e},exportExcel:function(){var t=[],e=this;if(e.abonos.length>1e3)return this.msjError("Max. 1000 datos");e.abonos.map((function(e){t.push({fecha:e.createdAt,hora:e.time,numFactura:e.numFactura,usuario:e.usuario,persona:e.persona,saldoAnterior:e.saldoAnterior,efectivo:e.efectivo,nequi:e.nequi,tarjeta:e.tarjeta})}));var a=gt.a.utils.json_to_sheet(t),o=gt.a.utils.book_new(),r="abonos";gt.a.utils.book_append_sheet(o,a,r),gt.a.writeFile(o,"".concat(r,".xlsx"))}},computed:{totalEfectivo:function(){return this.abonos.reduce((function(t,e){return t+parseInt(e.efectivo)}),0)},totalNequi:function(){return this.abonos.reduce((function(t,e){return t+parseInt(e.nequi)}),0)},totalTarjeta:function(){return this.abonos.reduce((function(t,e){return t+parseInt(e.tarjeta)}),0)},totalCredito:function(){return this.abonos.reduce((function(t,e){return t+parseInt(e.credito)}),0)},totalSaldo:function(){return this.abonos.reduce((function(t,e){return t+parseInt(e.saldoAnterior)-parseInt(e.efectivo)-parseInt(e.nequi)-parseInt(e.tarjeta)-parseInt(e.credito)}),0)}}},ua=da,ma=(a("91ae"),Object(d["a"])(ua,la,ca,!1,null,"c3cfe73e",null)),pa=ma.exports;m()(ma,{VBtn:M["a"],VCard:R["a"],VCol:B["a"],VContainer:kt["a"],VDataTable:U["a"],VDatePicker:Qe["a"],VDivider:p["a"],VIcon:v["a"],VMenu:Ze["a"],VRow:H["a"],VSpacer:K["a"],VTextField:W["a"],VToolbar:J["a"]});var va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",{attrs:{fluid:""}},[1==t.vista?[a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"32px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Debitos")])]),a("v-spacer"),a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",staticStyle:{"margin-right":"30px","margin-left":"20px","margin-top":"50px"},attrs:{depressed:"",dark:""},on:{click:function(e){return t.exportExcel()}}},[a("v-icon",{attrs:{size:"25"}},[t._v("mdi-file-excel-outline")]),t._v("Exportar ")],1),a("div",{staticStyle:{"margin-top":"50px","margin-right":"30px"}},[a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",attrs:{depressed:"",dark:""},on:{click:function(e){return t.reset()}}},[a("v-icon",{attrs:{size:"20"}},[t._v("mdi-plus")]),t._v(" Nuevo ")],1)],1)],1),a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Fecha inicial")])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"40px","margin-left":"30px"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[a("v-text-field",t._g(t._b({staticStyle:{width:"250px","margin-left":"20px"},attrs:{"prepend-icon":"mdi-calendar",readonly:""},model:{value:t.fechaInicio,callback:function(e){t.fechaInicio=e},expression:"fechaInicio"}},"v-text-field",r,!1),o))]}}],null,!1,3553476044),model:{value:t.calendarioInicio,callback:function(e){t.calendarioInicio=e},expression:"calendarioInicio"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.fechaInicio,callback:function(e){t.fechaInicio=e},expression:"fechaInicio"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.calendarioInicio=!1}}},[t._v(" OK ")])],1)],1)],1),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Fecha final")])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"40px","margin-left":"30px"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[a("v-text-field",t._g(t._b({staticStyle:{width:"250px","margin-left":"20px"},attrs:{"prepend-icon":"mdi-calendar",readonly:""},model:{value:t.fechaFinal,callback:function(e){t.fechaFinal=e},expression:"fechaFinal"}},"v-text-field",r,!1),o))]}}],null,!1,2625405259),model:{value:t.calendarioFinal,callback:function(e){t.calendarioFinal=e},expression:"calendarioFinal"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.fechaFinal,callback:function(e){t.fechaFinal=e},expression:"fechaFinal"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.calendarioFinal=!1}}},[t._v(" OK ")])],1)],1)],1),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"30px","margin-left":"30px"}},[a("v-btn",{staticStyle:{"margin-right":"10px","margin-left":"50px","margin-top":"20px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.traerDebitos()}}},[a("v-icon",{attrs:{size:"40"}},[t._v("mdi-magnify")])],1)],1)]),a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("T. Efectivo:"+t._s(t.totalEfectivo)+" ")])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"100px"}},[a("label",[t._v("T. Nequi:"+t._s(t.totalNequi)+" ")])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"100px"}},[a("label",[t._v("T. Tarjeta: "+t._s(t.totalTarjeta))])]),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"100px"}},[a("label",[t._v("T. Saldo Pendinte: "+t._s(t.totalSaldo))])])]),[a("v-data-table",{staticClass:"elevation-15 ",staticStyle:{"margin-top":"50px"},attrs:{headers:t.creditosTitle,items:t.debitos,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar por caracteres","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.saldo",fn:function(e){var a=e.item;return[t._v(" "+t._s(parseInt(a.saldoAnterior)-parseInt(a.efectivo)-parseInt(a.nequi)-parseInt(a.tarjeta))+" ")]}},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",on:{click:function(e){return t.cambioPagina(2,o)}}},[t._v("mdi-file-find")])]}}],null,!0)})]]:t._e(),2==t.vista?[a("v-container",[a("v-row",[a("v-btn",{staticClass:"mb-4",staticStyle:{"margin-left":"50px","margin-top":"50px"},attrs:{icon:"",color:"#AF7AC5"},on:{click:function(e){return t.cambioPagina(1,!1)}}},[a("v-icon",{attrs:{size:"50"}},[t._v("mdi-arrow-left-bold-circle-outline")])],1)],1),a("v-card",{staticStyle:{"margin-top":"40px","margin-left":"30px",width:"95%","box-shadow":"0 0 20px #A068B8",padding:"15px"}},[a("v-row",[a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("No. Factura:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.debito.numFactura))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Fecha:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.debito.createdAt))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Hora:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.debito.time))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Usuario:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.debito.usuario))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Comentario:")]),a("label",{staticClass:"col-sm-5 col-form-label",staticStyle:{border:"1px solid #C0C0C0","margin-top":"20px","margin-bottom":"20px"}},[t._v(t._s(t.debito.comentario))])])]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Saldo anterior:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("$ "+t._s(t.debito.saldoAnterior))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Efectivo:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("$ "+t._s(t.debito.efectivo))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Nequi:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("$ "+t._s(t.debito.nequi))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Tarjeta:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("$ "+t._s(t.debito.tarjeta))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Saldo:")]),a("label",{staticClass:"col-sm-5 col-form-label",staticStyle:{"border-top":"solid purple"}},[t._v("$ "+t._s(t.debito.saldo))])])])],1)],1),a("v-card",{staticStyle:{"margin-top":"40px","margin-left":"30px",width:"95%","box-shadow":"0 0 20px #A068B8",padding:"15px"}},[a("v-row",[a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Tipo de documento:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.tipoDocumento))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Numero de documento:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.debito.persona))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Nombre:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.nombre))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Telefono:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.telefono))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Direccion:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.direccion))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Ciudad:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.ciudad))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Correo:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.email))])])])],1)],1)],1)]:t._e()],2)],1)},fa=[],ha={data:function(){return{vista:1,debitos:[],debito:{},cliente:{},calendarioInicio:!1,calendarioFinal:!1,fechaFinal:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),fechaInicio:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),search:"",creditosTitle:[{text:"Fecha",value:"createdAt",class:"purple darken-3 white--text",sortable:!0},{text:"Hora",value:"time",class:"purple darken-3 white--text",sortable:!0},{text:"factura",value:"numFactura",class:"purple darken-3 white--text",sortable:!1},{text:"Comentario",value:"comentario",class:"purple darken-3 white--text",sortable:!1},{text:"Saldo anterior",value:"saldoAnterior",class:"purple darken-3 white--text",sortable:!1},{text:"Efectivo",value:"efectivo",class:"purple darken-3 white--text",sortable:!1},{text:"Nequi",value:"nequi",class:"purple darken-3 white--text",sortable:!1},{text:"Tarjeta",value:"tarjeta",class:"purple darken-3 white--text",sortable:!1},{text:"Saldo",value:"saldo",class:"purple darken-3 white--text",sortable:!1},{text:"Opciones",value:"actions",class:"purple darken-3 white--text",width:"10%",sortable:!1}]}},created:function(){this.checkToken()},methods:{checkToken:function(){this.$store.state.token||"/"===this.$router.currentRoute.name||this.$router.push("/")},msjError:function(t){N.a.fire({position:"top",icon:"error",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:3e3})},msjExito:function(t){N.a.fire({position:"top",icon:"success",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:2e3})},cambioPagina:function(t,e){2==t?(this.vista=2,this.detallesDebitos(e),this.debitos=[]):(this.vista=1,this.debito={},this.cliente={})},traerDebitos:function(){var t=this,e=(new Date(this.fechaFinal).getTime()-new Date(this.fechaInicio).getTime())/864e5;if(e<0)return this.msjError("Fecha inicial mayor a fecha final");if(e>31)return this.msjError("Max. 31 dias");var a={headers:{token:this.$store.state.token}};V.a.get("venta/debito?fechaInicial=".concat(this.fechaInicio,"&fechaFinal=").concat(this.fechaFinal),a).then((function(e){var a=e.data.venta;t.limpiarFechas(a)})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},limpiarFechas:function(t){var e=[];t.length>0?t.map((function(t){var a=new Date(t.createdAt),o=a.getHours()+5+":"+a.getMinutes(),r=t.createdAt.split("T"),i=r[0];e.push({_id:t._id,createdAt:i,time:o,usuario:t.usuario.nombreUser,persona:t.persona,numFactura:t.numFactura,comentario:t.comentario,saldoAnterior:t.saldoAnterior,efectivo:t.efectivo,nequi:t.nequi,tarjeta:t.tarjeta})})):this.msjExito("No hay Debitos"),this.debitos=e},reset:function(){this.$router.push("/facturacion")},detallesDebitos:function(t){var e=this;if(this.debito=t,""!=this.debito.persona.trim()){var a={headers:{token:this.$store.state.token}};V.a.get("cliente/buscando?numDocumento=".concat(this.debito.persona),a).then((function(t){0!=t.data.persona?e.cliente=t.data.persona:e.msjExito("Cliente no registrado en el sistema")})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjErrores(a)}else{var o=t.response.data.errors[0].msg;e.msjErrores(o)}}))}},exportExcel:function(){var t=[],e=this;if(e.debitos.length>1e3)return this.msjError("Max. 1000 datos");e.debitos.map((function(e){t.push({fecha:e.createdAt,hora:e.time,numFactura:e.numFactura,usuario:e.usuario,persona:e.persona,saldoAnterior:e.saldoAnterior,efectivo:e.efectivo,nequi:e.nequi,tarjeta:e.tarjeta})}));var a=gt.a.utils.json_to_sheet(t),o=gt.a.utils.book_new(),r="debitos";gt.a.utils.book_append_sheet(o,a,r),gt.a.writeFile(o,"".concat(r,".xlsx"))}},computed:{totalEfectivo:function(){return this.debitos.reduce((function(t,e){return t+parseInt(e.efectivo)}),0)},totalNequi:function(){return this.debitos.reduce((function(t,e){return t+parseInt(e.nequi)}),0)},totalTarjeta:function(){return this.debitos.reduce((function(t,e){return t+parseInt(e.tarjeta)}),0)},totalSaldo:function(){return this.debitos.reduce((function(t,e){return t+parseInt(e.saldoAnterior)-parseInt(e.efectivo)-parseInt(e.nequi)-parseInt(e.tarjeta)}),0)}}},xa=ha,ga=(a("1685"),Object(d["a"])(xa,va,fa,!1,null,"4b40e626",null)),ba=ga.exports;m()(ga,{VBtn:M["a"],VCard:R["a"],VCol:B["a"],VContainer:kt["a"],VDataTable:U["a"],VDatePicker:Qe["a"],VDivider:p["a"],VIcon:v["a"],VMenu:Ze["a"],VRow:H["a"],VSpacer:K["a"],VTextField:W["a"],VToolbar:J["a"]});var Ca=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",{attrs:{fluid:""}},[a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"32px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Factura")])]),a("v-spacer"),a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",staticStyle:{"margin-right":"30px","margin-left":"20px","margin-top":"50px"},attrs:{depressed:"",dark:""},on:{click:function(e){return t.imprimir()}}},[a("v-icon",{attrs:{size:"25"}},[t._v("mdi-printer")]),t._v(" Imprimir ")],1),a("div",{staticStyle:{"margin-top":"50px","margin-right":"30px"}},[a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",attrs:{depressed:"",dark:""},on:{click:function(e){return t.reset()}}},[a("v-icon",{attrs:{size:"20"}},[t._v("mdi-plus")]),t._v(" Nuevo ")],1)],1)],1),a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"30px","margin-left":"30px"}},[a("v-radio-group",{staticStyle:{"margin-top":"1px"},model:{value:t.buscar,callback:function(e){t.buscar=e},expression:"buscar"}},[a("v-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"Num. Factura",color:"#72128E",value:"factura"}}),a("v-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"Cliente",color:"#72128E",value:"cliente"}})],1)],1),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"30px","margin-left":"30px"}},[a("v-text-field",{staticStyle:{width:"350px","margin-left":"0px"},attrs:{solo:"",label:"# Factura o Cedula"},model:{value:t.buscarDato,callback:function(e){t.buscarDato=e},expression:"buscarDato"}})],1),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"20px","margin-left":"30px"}},[a("v-btn",{staticStyle:{"margin-right":"10px","margin-left":"50px","margin-top":"20px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.traerFactura()}}},[a("v-icon",{attrs:{size:"40"}},[t._v("mdi-magnify")])],1)],1)]),a("v-card",{staticStyle:{"justify-content":"center",margin:"0 auto","margin-top":"50px",width:"97%","box-shadow":"0 0 20px #A068B8",padding:"15px"}},[a("v-row",[a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("N. Factura")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.numFactura))])])]),a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Fecha:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.fecha))])])]),a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Hora:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.hora))])])])],1),a("v-row",[a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Vendedor:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.usuario))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Tipo de documento:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.tipoDocumento))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Numero de documento:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.persona))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Numbre:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.nombre))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Telefono:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.telefono))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Direccion:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.direccion))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Ciudad:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.ciudad))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Correo:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.email))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Observaciones:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.comentario))])]),"debito"==t.tipoFactura||"abonoabono"==t.tipoFactura?[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Saldo anterior:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.saldoAnterior))])])]:t._e()],2)],1),a("hr",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}}),"debito"!=t.tipoFactura?[a("v-row",[a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Efectivo:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.efectivo))])])]),a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Nequi:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.nequi))])])]),a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Tarjeta:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.tarjeta))])])]),a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Sistecredito:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.credito))])])])],1)]:t._e(),"debito"==t.tipoFactura?[a("v-row",[a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Efectivo:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.efectivo))])])]),a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Nequi:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.nequi))])])]),a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Tarjeta:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.tarjeta))])])])],1)]:t._e(),a("hr",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}}),"venta"==t.tipoFactura?[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Descuento:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.descuento))])])]:t._e(),"abonoabono"==t.tipoFactura?[a("v-data-table",{staticClass:"elevation-1",staticStyle:{"margin-top":"10px"},attrs:{headers:t.articulosAbonosTitle,items:t.articulosAbono}})]:t._e(),"venta"==t.tipoFactura?[a("v-data-table",{staticClass:"elevation-1",staticStyle:{"margin-top":"10px"},attrs:{headers:t.articulosVentaTitle,items:t.articulosVenta}})]:t._e()],2)],1)],1)},_a=[],ka={data:function(){return{datosAlmacen:{nameStore:"",nit:"",regimen:"",representanteCC:"",departamento:"",ciudad:"",direccion:"",celular:"",telefono:"",email:""},buscar:"",buscarDato:"",cliente:{},tipoFactura:null,subTipoFactura:null,numFactura:null,fecha:null,hora:null,usuario:null,persona:null,efectivo:null,nequi:null,tarjeta:null,credito:null,descuento:null,totalVendido:null,comentario:"",saldoAnterior:null,articulosAbonosTitle:[{text:"Categoria",value:"categoria",class:"black--text",sortable:!1},{text:"Marca",value:"marca",class:"black--text",sortable:!1},{text:"Referencia",value:"referencia",class:"black--text",sortable:!1},{text:"Unidades",value:"cantidad",class:"black--text",sortable:!1}],articulosAbono:[],articulosVentaTitle:[{text:"Categoria",value:"categoria",class:"black--text",sortable:!1},{text:"Marca",value:"marca",class:"black--text",sortable:!1},{text:"Referencia",value:"referencia",class:"black--text",sortable:!1},{text:"Unidades",value:"cantidad",class:"black--text",sortable:!1},{text:"Precio",value:"precio",class:"black--text",sortable:!1},{text:"Total",value:"totalPrecio",class:"black--text",sortable:!1}],articulosVenta:[],fechaImpresa:null}},created:function(){this.checkToken(),this.traerDatos()},methods:{checkToken:function(){this.$store.state.token||"/"===this.$router.currentRoute.name||this.$router.push("/")},msjErrores:function(t){N.a.fire({position:"top",icon:"error",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:3e3})},msjExito:function(t){N.a.fire({position:"top",icon:"success",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:3e3})},traerDatos:function(){var t=this,e={headers:{token:this.$store.state.token}};V.a.get("setting",e).then((function(e){t.datosAlmacen=e.data.configuraciones})).catch((function(e){if(e.response.data.msg)if(0==e.response.data.msg)t.msjError("Configuracion basica no creada");else{var a=e.response.data.msg;t.msjError(a)}else t.msgError=e.response.data.errors[0].msg,t.msjError(t.msgError)}))},reset:function(){this.$router.push("/facturacion")},borrar:function(){this.tipoFactura=null,this.numFactura=null,this.fecha=null,this.hora=null,this.usuario=null,this.persona=null,this.efectivo=null,this.nequi=null,this.tarjeta=null,this.credito=null,this.descuento=null},traerFactura:function(){var t=this;this.borrar();var e={headers:{token:this.$store.state.token}};V.a.get("venta/ventaByCriterio?buscar=".concat(this.buscar,"&buscarDato=").concat(this.buscarDato),e).then((function(e){return e.data.venta?0==e.data.venta.length?t.msjExito("No hay factura coincidente con los datos"):void t.limpiarDatosFactura(e.data.venta):t.msjExito("No hay factura coincidente con los datos")})).catch((function(e){e.response.data.msg?(t.msgError=e.response.data.msg,t.msjErrores(t.msgError)):(t.msgError=e.response.data.errors[0].msg,t.msjErrores(t.msgError))}))},limpiarDatosFactura:function(t){t.length>0&&(t=t[0]),"venta"!=t.tipoFactura?this.saldoAnterior=t.saldoAnterior:this.subTipoFactura=t.subTipoFactura,this.tipoFactura=t.tipoFactura;var e=new Date(t.createdAt);if(this.hora=e.getHours()+5+":"+e.getMinutes(),this.fecha=e.getDate()+"/"+e.getMonth()+"/"+e.getFullYear(),this.fechaImpresa=e,this.numFactura=t.numFactura,this.usuario=t.usuario.nombreUser,this.persona=t.persona,this.efectivo=t.efectivo,this.nequi=t.nequi,this.tarjeta=t.tarjeta,this.comentario=t.comentario,this.traerCliente(this.persona),"abonoabono"==t.tipoFactura){this.credito=t.credito;var a=t.articulos,o=[];a.length>0&&a.map((function(t){var e=t.sku.split("-");o.push({referencia:e[2],categoria:e[0],marca:e[1],cantidad:t.cantidad})})),this.articulosAbono=o}else{this.credito=t.credito,this.descuento=t.descuento,this.totalVendido=t.totalPrecio;var r=t.articulos,i=[];r.length>0&&r.map((function(t){var e=t.sku.split("-");i.push({referencia:e[2],categoria:e[0],marca:e[1],cantidad:t.cantidad,precio:t.precio,totalPrecio:t.precio*t.cantidad})})),this.articulosVenta=i}},traerCliente:function(t){var e=this;if(""!=t){var a={headers:{token:this.$store.state.token}};V.a.get("cliente/buscando?numDocumento=".concat(t),a).then((function(t){0!=t.data.persona?e.cliente=t.data.persona:e.msjExito("Cliente no registrado en el sistema")})).catch((function(t){t.response.data.msg?(e.msgError=t.response.data.msg,e.msjErrores(e.msgError)):(e.msgError=t.response.data.errors[0].msg,e.msjErrores(e.msgError))}))}},imprimir:function(){var t=10,e=this.datosAlmacen.nameStore.split(0,15),a=this.datosAlmacen.representanteCC.split(0,24),o=this.datosAlmacen.nit.split(0,20),r=this.datosAlmacen.regimen.split(0,16),i=this.datosAlmacen.direccion.split(0,23),s=this.datosAlmacen.ciudad.split(0,10),n=this.datosAlmacen.departamento.split(0,10),l=this.datosAlmacen.celular.split(0,16),c=this.datosAlmacen.telefono.split(0,15),d=this.persona.slice(0,13),u=this.cliente.tipoDocumento.slice(0,9),m=this.cliente.nombre.slice(0,16),p=this.cliente.telefono.slice(0,14),v=this.cliente.direccion.slice(0,14),f=this.cliente.ciudad.slice(0,17),h=this.fechaImpresa,x=h.getDate(),g=["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],b=g[h.getMonth()],C=h.getFullYear(),_=h.getHours()+5,k=h.getMinutes(),w=84,E=[];if("debito"==this.tipoFactura){var y=parseInt(this.efectivo)+parseInt(this.nequi)+parseInt(this.tarjeta);E=[{referencia:" ",cantidad:"1",categoria:"Debito",precio:" ",total:y.toString()},{referencia:" ",cantidad:" ",categoria:" ",precio:" ",total:" "},{referencia:" ",cantidad:" ",categoria:" ",precio:" ",total:" "},{referencia:" ",cantidad:" ",categoria:" ",precio:" ",total:4},{referencia:" ",cantidad:" ",categoria:" ",precio:"Total",total:y.toString()}],w=120}else if("abonoabono"==this.tipoFactura){var S=this.articulosAbono,j=S.length;0!==j?S.map((function(t){E.push({referencia:t.referencia,categoria:t.categoria,cantidad:t.cantidad.toString(),precio:" ",total:" "})})):E.push({referencia:" ",cantidad:" ",categoria:" ",precio:" ",total:" "},{referencia:" ",cantidad:" ",categoria:" ",precio:" ",total:" "},{referencia:" ",cantidad:" ",categoria:" ",precio:" ",total:" "});var I=this.saldoAnterior.toString(),D=parseInt(this.efectivo)+parseInt(this.nequi)+parseInt(this.tarjeta)+parseInt(this.credito),F=parseInt(I)-(parseInt(this.efectivo)+parseInt(this.nequi)+parseInt(this.tarjeta)+parseInt(this.credito));E.push({referencia:"",cantidad:"",categoria:"",precio:"saldo A.",total:I},{referencia:"",cantidad:"",categoria:"",precio:"abono ",total:D.toString()},{referencia:"",cantidad:"",categoria:0,precio:"saldo ",total:F.toString()}),w+=40;var A=E.length;w+=8*(A-5)}else{this.articulosVenta.map((function(t){E.push({referencia:t.referencia,categoria:t.categoria,cantidad:t.cantidad.toString(),precio:t.precio.toString(),total:(t.cantidad*t.precio).toString()})}));var T=(this.totalVendido-this.descuento).toString();if("venta"==this.subTipoFactura){E.push({referencia:"",cantidad:"",categoria:"",precio:"subtotal",total:this.totalVendido.toString()},{referencia:"",cantidad:"",categoria:"",precio:"desc.",total:this.descuento.toString()},{referencia:"",cantidad:"",categoria:0,precio:"total ",total:T}),w+=30;var V=E.length;w+=8*(V-3)}else{var $=parseInt(this.efectivo)+parseInt(this.nequi)+parseInt(this.tarjeta)+parseInt(this.credito),N=parseInt(T)-(parseInt(this.efectivo)+parseInt(this.nequi)+parseInt(this.tarjeta)+parseInt(this.credito));E.push({referencia:"",cantidad:"",categoria:"",precio:"subtotal",total:this.totalVendido.toString()},{referencia:"",cantidad:"",categoria:"",precio:"desc.",total:this.descuento.toString()},{referencia:"",cantidad:"",categoria:"",precio:"total ",total:T},{referencia:"",cantidad:"",categoria:"",precio:"abono ",total:$.toString()},{referencia:"",cantidad:"",categoria:0,precio:"saldo ",total:N.toString()}),w+=40;var P=E.length;w+=8*(P-5)}}var q=this.usuario.slice(0,13),M=this.comentario.slice(0,251),R=2.9*(w+61),O=new z["a"];O.beginFormObject(0,0,200,R),O.setFont("helvetica","italic"),O.text("".concat(e),0,8,{charSpace:.4}),O.setFontSize(18),O.setFont("helvetica","bold"),O.setFontSize(t),O.text("".concat(a),0,15,{charSpace:.2}),O.setFontSize(t),O.text("NIT: ".concat(o),4,20,{charSpace:.2}),O.text("REGIMEN: ".concat(r),4,25,{charSpace:.2}),O.text("".concat(i),4,30,{charSpace:.2}),O.text("".concat(s,"(").concat(n,")"),4,35,{charSpace:.2}),O.text("CELULAR: ".concat(l),4,40,{charSpace:.2}),O.text("TELEFONO: ".concat(c),4,45,{charSpace:.2}),O.text("NOMBRE: ".concat(m),4,55,{charSpace:.3}),O.text("TIPO DOCUMENTO: ".concat(u),4,60,{charSpace:.3}),O.text("DOCUMENTO: ".concat(d),4,65,{charSpace:.3}),O.text("TELEFONO: ".concat(p),4,70,{charSpace:.3}),O.text("DIRECCION: ".concat(v),4,75,{charSpace:.3}),O.text("CIUDAD: ".concat(f),4,80,{charSpace:.3}),O.line(1,81,68,81),O.text("Factura Venta  ".concat(this.numFactura),4,85,{charSpace:.3}),O.text("".concat(x,"-").concat(b,"-").concat(C,"    ").concat(_,":").concat(k,"   "),4,90,{charSpace:.3});var B=[{align:"center",width:22,id:"referencia",name:"referencia",prompt:"Refer"},{align:"center",width:18,id:"categoria",name:"categoria",prompt:"Desc."},{align:"center",width:13,id:"cantidad",name:"cantidad",prompt:"Cant"},{align:"center",width:18,id:"precio",name:"precio",prompt:"Vr Unit"},{align:"center",width:19.5,id:"total",name:"total",prompt:"Vr total"}];O.table(0,95,E,B,{fontName:"Arial",fontSize:"9",autoSize:!1,headerBackgroundColor:"#FFFFFF",padding:.3}),O.setFont("helvetica","bold"),O.setFontSize(t),O.text("Vendedor: ".concat(q),15,w+5,{charSpace:.2}),O.text("Metodo de pago",20,w+10,{charSpace:.3});var U=[];U="debito"==this.tipoFactura?[{efectivo:this.efectivo.toString(),tarjeta:this.tarjeta.toString(),nequi:this.nequi.toString(),credito:"0"}]:[{efectivo:this.efectivo.toString(),tarjeta:this.tarjeta.toString(),nequi:this.nequi.toString(),credito:this.credito.toString()}];var L=[{align:"center",width:22,id:"efectivo",name:"efectivo",prompt:"Efectivo"},{align:"center",width:22,id:"tarjeta",name:"tarjeta",prompt:"Tarjeta"},{align:"center",width:22,id:"nequi",name:"nequi",prompt:"Nequi"},{align:"center",width:25,id:"credito",name:"credito",prompt:"Sistecredito"}];O.table(0,w+15,U,L,{fontName:"Arial",fontSize:"9",autoSize:!1,headerBackgroundColor:"#FFFFFF",padding:.3}),O.text("Observaciones",28,w+30,{charSpace:.3}),O.text("".concat(M),4,w+35,{maxWidth:"52",charSpace:.3}),O.roundedRect(0,0,68,w+63,0,0),O.output("dataurlnewwindow")}},computed:{}},wa=ka,Ea=(a("893c"),Object(d["a"])(wa,Ca,_a,!1,null,"6aa4ce76",null)),ya=Ea.exports;m()(Ea,{VBtn:M["a"],VCard:R["a"],VCol:B["a"],VContainer:kt["a"],VDataTable:U["a"],VIcon:v["a"],VRadio:L["a"],VRadioGroup:G["a"],VRow:H["a"],VSpacer:K["a"],VTextField:W["a"]});var Sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",{attrs:{fluid:""}},[1==t.vista?[a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"32px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Ventas")])]),a("v-spacer"),a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",staticStyle:{"margin-right":"30px","margin-left":"20px","margin-top":"50px"},attrs:{depressed:"",dark:""},on:{click:function(e){return t.exportExcel()}}},[a("v-icon",{attrs:{size:"25"}},[t._v("mdi-file-excel-outline")]),t._v("Exportar ")],1),a("div",{staticStyle:{"margin-top":"50px","margin-right":"30px"}},[a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",attrs:{depressed:"",dark:""},on:{click:function(e){return t.reset()}}},[a("v-icon",{attrs:{size:"20"}},[t._v("mdi-plus")]),t._v(" Nuevo ")],1)],1)],1),a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Fecha inicial")])]),a("div",{staticStyle:{width:"120px",color:"#72128E","font-size":"20px","text-align":"center","margin-top":"30px","margin-left":"5px"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[a("v-text-field",t._g(t._b({staticStyle:{width:"180px","margin-left":"20px"},attrs:{"prepend-icon":"mdi-calendar",readonly:""},model:{value:t.fechaInicio,callback:function(e){t.fechaInicio=e},expression:"fechaInicio"}},"v-text-field",r,!1),o))]}}],null,!1,1445427298),model:{value:t.calendarioInicio,callback:function(e){t.calendarioInicio=e},expression:"calendarioInicio"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.fechaInicio,callback:function(e){t.fechaInicio=e},expression:"fechaInicio"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.calendarioInicio=!1}}},[t._v(" OK ")])],1)],1)],1),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"50px"}},[a("label",[t._v("Fecha final")])]),a("div",{staticStyle:{width:"120px",color:"#72128E","font-size":"20px","text-align":"center","margin-top":"30px","margin-left":"5px"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[a("v-text-field",t._g(t._b({staticStyle:{width:"180px","margin-left":"20px"},attrs:{"prepend-icon":"mdi-calendar",readonly:""},model:{value:t.fechaFinal,callback:function(e){t.fechaFinal=e},expression:"fechaFinal"}},"v-text-field",r,!1),o))]}}],null,!1,293925285),model:{value:t.calendarioFinal,callback:function(e){t.calendarioFinal=e},expression:"calendarioFinal"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.fechaFinal,callback:function(e){t.fechaFinal=e},expression:"fechaFinal"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.calendarioFinal=!1}}},[t._v(" OK ")])],1)],1)],1),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"50px","margin-left":"50px"}},[a("label",[t._v("Tipo venta")])]),a("div",{staticStyle:{width:"120px",color:"#72128E","font-size":"20px","text-align":"center","margin-top":"40px","margin-left":"30px"}},[a("v-select",{attrs:{items:t.tiposVenta,solo:""},model:{value:t.typesell,callback:function(e){t.typesell=e},expression:"typesell"}})],1),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"30px","margin-left":"30px"}},[a("v-btn",{staticStyle:{"margin-right":"10px","margin-left":"50px","margin-top":"20px"},attrs:{icon:"",color:"#72128E"},on:{click:function(e){return t.traeraVentas()}}},[a("v-icon",{attrs:{size:"40"}},[t._v("mdi-magnify")])],1)],1)]),a("v-row",{staticStyle:{"margin-top":"0px"}},[a("v-col",[a("div",{staticClass:"totales"},[a("label",[t._v("T. Vendido: "+t._s(t.totalVendido))])]),a("div",{staticClass:"totales"},[a("label",[t._v("T. Descuento:"+t._s(t.totalDescuento)+" ")])]),a("div",{staticClass:"totales"},[a("label",[t._v("T. Costo:"+t._s(t.totalCosteado)+" ")])])]),a("v-col",[a("div",{staticClass:"totales"},[a("label",[t._v("T. Efectivo:"+t._s(t.totalEfectivo)+" ")])]),a("div",{staticClass:"totales"},[a("label",[t._v("T. Nequi:"+t._s(t.totalNequi)+" ")])])]),a("v-col",[a("div",{staticClass:"totales"},[a("label",[t._v("T. Tarjeta: "+t._s(t.totalTarjeta))])]),a("div",{staticClass:"totales"},[a("label",[t._v("T. Credito:"+t._s(t.totalCredito)+" ")])])])],1),[a("v-data-table",{staticClass:"elevation-15 ",staticStyle:{"margin-top":"50px"},attrs:{headers:t.creditosTitle,items:t.ventas,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar por caracteres","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.venta",fn:function(e){var a=e.item;return[t._v(" "+t._s(parseInt(a.efectivo)+parseInt(a.nequi)+parseInt(a.tarjeta)+parseInt(a.credito))+" ")]}},{key:"item.saldo",fn:function(e){var a=e.item;return[t._v(" "+t._s(parseInt(a.saldoAnterior)-parseInt(a.efectivo)-parseInt(a.nequi)-parseInt(a.tarjeta)-parseInt(a.credito))+" ")]}},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",on:{click:function(e){return t.cambioPagina(2,o)}}},[t._v("mdi-file-find")])]}}],null,!0)})]]:t._e(),2==t.vista?[a("v-container",[a("v-row",[a("v-btn",{staticClass:"mb-4",staticStyle:{"margin-left":"50px","margin-top":"50px"},attrs:{icon:"",color:"#AF7AC5"},on:{click:function(e){return t.cambioPagina(1,!1)}}},[a("v-icon",{attrs:{size:"50"}},[t._v("mdi-arrow-left-bold-circle-outline")])],1)],1),a("v-card",{staticStyle:{"margin-top":"40px","margin-left":"30px",width:"95%","box-shadow":"0 0 20px #A068B8",padding:"15px"}},[a("v-row",[a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("No. Factura:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.venta.numFactura))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Fecha:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.venta.createdAt))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Hora:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.venta.time))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Usuario:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.venta.usuario))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Comentario:")]),a("label",{staticClass:"col-sm-5 col-form-label",staticStyle:{border:"1px solid #C0C0C0","margin-top":"20px","margin-bottom":"20px"}},[t._v(t._s(t.venta.comentario))])])]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Total vendido:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("$ "+t._s(t.venta.totalPrecio))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Total costo:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("$ "+t._s(t.venta.totalCosto))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Descuento:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("$ "+t._s(t.venta.descuento))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Efectivo:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("$ "+t._s(t.venta.efectivo))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Nequi:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("$ "+t._s(t.venta.nequi))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Tarjeta:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("$ "+t._s(t.venta.tarjeta))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Credito:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("$ "+t._s(t.venta.credito))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Total:")]),a("label",{staticClass:"col-sm-5 col-form-label",staticStyle:{"border-top":"solid purple"}},[t._v("$ "+t._s(-1*(-t.venta.efectivo-t.venta.nequi-t.venta.tarjeta-t.venta.credito)))])])])],1)],1),a("v-card",{staticStyle:{"margin-top":"40px","margin-left":"30px",width:"95%","box-shadow":"0 0 20px #A068B8",padding:"15px"}},[a("v-row",[a("v-col",[a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Tipo de documento:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.tipoDocumento))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Numero de documento:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.venta.persona))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Nombre:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.nombre))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Telefono:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.telefono))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Direccion:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.direccion))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Ciudad:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.ciudad))])]),a("div",{staticClass:"form-group row texto"},[a("label",{staticClass:"col-sm-5 col-form-label"},[t._v("Correo:")]),a("label",{staticClass:"col-sm-5 col-form-label"},[t._v(t._s(t.cliente.email))])])])],1)],1),a("v-data-table",{staticClass:"elevation-15 ",staticStyle:{"margin-top":"50px"},attrs:{headers:t.articulosTitle,items:t.articulos,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar Prenda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.totalPrecioArti",fn:function(e){var a=e.item;return[t._v(" "+t._s(parseInt(a.cantidad)-parseInt(a.precio))+" ")]}},{key:"item.totalCostoArti",fn:function(e){var a=e.item;return[t._v(" "+t._s(parseInt(a.cantidad)-parseInt(a.costo))+" ")]}}],null,!0)})],1)]:t._e()],2)],1)},ja=[],Ia={data:function(){return{vista:1,tiposVenta:["todo","venta","abono"],typesell:"",ventas:[],venta:{},articulos:[],cliente:{},calendarioInicio:!1,calendarioFinal:!1,fechaFinal:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),fechaInicio:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),search:"",creditosTitle:[{text:"Fecha",value:"createdAt",class:"purple darken-3 white--text",sortable:!0},{text:"Hora",value:"time",class:"purple darken-3 white--text",sortable:!0},{text:"factura",value:"numFactura",class:"purple darken-3 white--text",sortable:!1},{text:"Comentario",value:"comentario",class:"purple darken-3 white--text",sortable:!1},{text:"Tipo",value:"subTipoFactura",class:"purple darken-3 white--text",sortable:!1},{text:"Total",value:"totalPrecio",class:"purple darken-3 white--text",sortable:!1},{text:"Efectivo",value:"efectivo",class:"purple darken-3 white--text",sortable:!1},{text:"Nequi",value:"nequi",class:"purple darken-3 white--text",sortable:!1},{text:"Tarjeta",value:"tarjeta",class:"purple darken-3 white--text",sortable:!1},{text:"Credito",value:"credito",class:"purple darken-3 white--text",sortable:!1},{text:"Opciones",value:"actions",class:"purple darken-3 white--text",width:"10%",sortable:!1}],articulosTitle:[{text:"Categoria",value:"categoria",class:"purple darken-3 white--text"},{text:"Marca",value:"marca",class:"purple darken-3 white--text"},{text:"Referencia",value:"referencia",class:"purple darken-3 white--text"},{text:"Cantidades",value:"cantidad",class:"purple darken-3 white--text"},{text:"Precio",value:"precio",class:"purple darken-3 white--text"},{text:"Costo",value:"costo",class:"purple darken-3 white--text"},{text:"T.Precio",value:"totalPrecioArti",class:"purple darken-3 white--text"},{text:"T.Costo",value:"totalCostoArti",class:"purple darken-3 white--text"}]}},created:function(){this.checkToken()},methods:{checkToken:function(){this.$store.state.token||"/"===this.$router.currentRoute.name||this.$router.push("/")},msjError:function(t){N.a.fire({position:"top",icon:"error",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:3e3})},msjExito:function(t){N.a.fire({position:"top",icon:"success",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:2e3})},cambioPagina:function(t,e){2==t?(this.vista=2,this.detallesVenta(e),this.ventas=[]):(this.vista=1,this.venta={},this.cliente={})},traeraVentas:function(){var t=this,e=(new Date(this.fechaFinal).getTime()-new Date(this.fechaInicio).getTime())/864e5;if(e<0)return this.msjError("Fecha inicial mayor a fecha final");if(e>31)return this.msjError("Max. 31 dias");var a={headers:{token:this.$store.state.token}};V.a.get("venta/venta?fechaInicial=".concat(this.fechaInicio,"&fechaFinal=").concat(this.fechaFinal,"&tipoVenta=").concat(this.typesell),a).then((function(e){var a=e.data.venta;t.limpiarFechas(a)})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},limpiarFechas:function(t){var e=[];t.length>0?t.map((function(t){var a=new Date(t.createdAt),o=a.getHours()+5+":"+a.getMinutes(),r=t.createdAt.split("T"),i=r[0];e.push({_id:t._id,createdAt:i,time:o,usuario:t.usuario.nombreUser,numFactura:t.numFactura,subTipoFactura:t.subTipoFactura,persona:t.persona,comentario:t.comentario,totalPrecio:t.totalPrecio,totalCosto:t.totalCosto,descuento:t.descuento,efectivo:t.efectivo,nequi:t.nequi,tarjeta:t.tarjeta,credito:t.credito})})):this.msjExito("No hay ventas"),this.ventas=e},reset:function(){this.$router.push("/facturacion")},detallesVenta:function(t){var e=this;if(this.venta=t,""!=this.venta.persona.trim()){var a={headers:{token:this.$store.state.token}};V.a.get("cliente/buscando?numDocumento=".concat(this.venta.persona),a).then((function(t){0!=t.data.persona?e.cliente=t.data.persona:e.msjExito("Cliente no registrado en el sistema")})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjErrores(a)}else{var o=t.response.data.errors[0].msg;e.msjErrores(o)}}))}var o={headers:{token:this.$store.state.token}};V.a.get("venta/ventaId/".concat(t._id),o).then((function(t){var a=t.data.venta;e.limpiarDatosAbono(a)})).catch((function(t){if(t.response.data.msg){var a=t.response.data.msg;e.msjError(a)}else{var o=t.response.data.errors[0].msg;e.msjError(o)}}))},limpiarDatosAbono:function(t){var e=[],a=t.articulos;a.length>0&&a.map((function(t){var a=t.sku.split("-");e.push({referencia:a[2],categoria:a[0],marca:a[1],cantidad:t.cantidad,precio:t.precio,costo:t.costo})})),this.articulos=e},exportExcel:function(){var t=[],e=this;if(e.ventas.length>1e3)return this.msjError("Max. 1000 datos");e.ventas.map((function(e){t.push({fecha:e.createdAt,hora:e.time,usuario:e.usuario,numFactura:e.numFactura,subTipoFactura:e.subTipoFactura,persona:e.persona,totalPrecio:e.totalPrecio,totalCosto:e.totalCosto,descuento:e.descuento,efectivo:e.efectivo,nequi:e.nequi,tarjeta:e.tarjeta,credito:e.credito})}));var a=gt.a.utils.json_to_sheet(t),o=gt.a.utils.book_new(),r="ventas";gt.a.utils.book_append_sheet(o,a,r),gt.a.writeFile(o,"".concat(r,".xlsx"))}},computed:{totalVendido:function(){return this.ventas.reduce((function(t,e){return t+parseInt(e.totalPrecio)}),0)},totalCosteado:function(){return this.ventas.reduce((function(t,e){return t+parseInt(e.totalCosto)}),0)},totalDescuento:function(){return this.ventas.reduce((function(t,e){return t+parseInt(e.descuento)}),0)},totalEfectivo:function(){return this.ventas.reduce((function(t,e){return t+parseInt(e.efectivo)}),0)},totalNequi:function(){return this.ventas.reduce((function(t,e){return t+parseInt(e.nequi)}),0)},totalTarjeta:function(){return this.ventas.reduce((function(t,e){return t+parseInt(e.tarjeta)}),0)},totalCredito:function(){return this.ventas.reduce((function(t,e){return t+parseInt(e.credito)}),0)}}},Da=Ia,Fa=(a("52c2"),Object(d["a"])(Da,Sa,ja,!1,null,"1ceb2ead",null)),Aa=Fa.exports;m()(Fa,{VBtn:M["a"],VCard:R["a"],VCol:B["a"],VContainer:kt["a"],VDataTable:U["a"],VDatePicker:Qe["a"],VDivider:p["a"],VIcon:v["a"],VMenu:Ze["a"],VRow:H["a"],VSelect:ce["a"],VSpacer:K["a"],VTextField:W["a"],VToolbar:J["a"]});var Ta=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",{attrs:{fluid:""}},[[a("v-row",[a("div",{staticStyle:{color:"#72128E","font-size":"32px","text-align":"center","margin-top":"50px","margin-left":"30px"}},[a("label",[t._v("Informes")])])]),a("v-row",[a("hr",{staticStyle:{align:"center",width:"95%","margin-top":"30px"}}),a("br"),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"5px","margin-left":"30px"}},[a("label",[t._v("Saldo de Caja del Día"),a("br")])]),a("v-spacer"),a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",staticStyle:{"margin-right":"30px","margin-left":"20px","margin-top":"5px"},attrs:{depressed:"",dark:""},on:{click:function(e){return t.exportExcel2()}}},[a("v-icon",{attrs:{size:"25"}},[t._v("mdi-file-excel-outline")]),t._v("Exportar ")],1)],1),a("v-row",[a("div",{staticStyle:{color:"#000000","font-size":"20px","text-align":"center","margin-top":"10px","margin-left":"30px"}},[a("label",[t._v("Fecha")])]),a("div",{staticStyle:{color:"#000000","font-size":"20px","text-align":"center","margin-top":"0px","margin-left":"30px"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[a("v-text-field",t._g(t._b({staticStyle:{width:"250px","margin-left":"20px"},attrs:{"prepend-icon":"mdi-calendar",readonly:""},model:{value:t.fechaInicio,callback:function(e){t.fechaInicio=e},expression:"fechaInicio"}},"v-text-field",r,!1),o))]}}]),model:{value:t.calendarioInicio,callback:function(e){t.calendarioInicio=e},expression:"calendarioInicio"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.fechaInicio,callback:function(e){t.fechaInicio=e},expression:"fechaInicio"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.calendarioInicio=!1}}},[t._v(" OK ")])],1)],1)],1),a("div",{staticStyle:{color:"#000000","font-size":"20px","text-align":"center","margin-top":"0px","margin-left":"30px"}},[a("v-btn",{staticStyle:{"margin-right":"10px","margin-left":"50px","margin-top":"20px"},attrs:{icon:"",color:"#000000"},on:{click:function(e){return t.traerTotalesCaja()}}},[a("v-icon",{attrs:{size:"40"}},[t._v("mdi-magnify")])],1)],1)]),a("table",{staticClass:"tabla",staticStyle:{"margin-top":"25px"}},[a("thead",{staticClass:"tablaCabeza"},[a("tr",[a("th",[t._v("Tipo Factura")]),a("th",[t._v("Efectivo")]),a("th",[t._v("Nequi")]),a("th",[t._v("Tarjeta")]),a("th",[t._v("Sistecredito")])])]),a("tbody",{staticClass:"tablaCuerpo"},t._l(t.totalesCaja,(function(e,o){return a("tr",{key:"objeto-"+o},[a("td",{domProps:{textContent:t._s(e._id)}}),a("td",{domProps:{textContent:t._s(e.efectivo)}}),a("td",{domProps:{textContent:t._s(e.nequi)}}),a("td",{domProps:{textContent:t._s(e.tarjeta)}}),a("td",{domProps:{textContent:t._s(e.credito)}})])})),0)])],[a("v-row",[a("hr",{staticStyle:{align:"center",width:"95%","margin-top":"30px"}}),a("br"),a("div",{staticStyle:{color:"#72128E","font-size":"20px","text-align":"center","margin-top":"5px","margin-left":"30px"}},[a("label",[t._v("Categorias 'venta venta' del día")])]),a("v-spacer"),a("v-btn",{staticClass:"mb-2 purple darken-3 white--text",staticStyle:{"margin-right":"30px","margin-left":"20px","margin-top":"5px"},attrs:{depressed:"",dark:""},on:{click:function(e){return t.exportExcel()}}},[a("v-icon",{attrs:{size:"25"}},[t._v("mdi-file-excel-outline")]),t._v("Exportar ")],1)],1),a("v-row",[a("div",{staticStyle:{color:"#000000","font-size":"20px","text-align":"center","margin-top":"10px","margin-left":"30px"}},[a("label",[t._v("Fecha")])]),a("div",{staticStyle:{color:"#000000","font-size":"20px","text-align":"center","margin-top":"0px","margin-left":"30px"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[a("v-text-field",t._g(t._b({staticStyle:{width:"250px","margin-left":"20px"},attrs:{"prepend-icon":"mdi-calendar",readonly:""},model:{value:t.fechaInicio,callback:function(e){t.fechaInicio=e},expression:"fechaInicio"}},"v-text-field",r,!1),o))]}}]),model:{value:t.calendarioInicio,callback:function(e){t.calendarioInicio=e},expression:"calendarioInicio"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.fechaInicio,callback:function(e){t.fechaInicio=e},expression:"fechaInicio"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.calendarioInicio=!1}}},[t._v(" OK ")])],1)],1)],1),a("div",{staticStyle:{color:"#000000","font-size":"20px","text-align":"center","margin-top":"0px","margin-left":"30px"}},[a("v-btn",{staticStyle:{"margin-right":"10px","margin-left":"50px","margin-top":"20px"},attrs:{icon:"",color:"#000000"},on:{click:function(e){return t.traerCategorias()}}},[a("v-icon",{attrs:{size:"40"}},[t._v("mdi-magnify")])],1)],1)]),a("v-row",[a("div",{staticStyle:{color:"#000000","font-size":"20px","text-align":"center","margin-top":"20px","margin-left":"30px"}},[a("label",[t._v("Total Ingreso: "+t._s(t.totalVendido))])]),a("div",{staticStyle:{color:"#000000","font-size":"20px","text-align":"center","margin-top":"20px","margin-left":"250px"}},[a("label",[t._v("Total costo: "+t._s(t.totalCosto))])])]),a("table",{staticClass:"tabla",staticStyle:{"margin-top":"25px"}},[a("thead",{staticClass:"tablaCabeza"},[a("tr",[a("th",[t._v("Categoria")]),a("th",[t._v("Cantidad")]),a("th",[t._v("Total Costo")]),a("th",[t._v("Totol Ingreso")])])]),a("tbody",{staticClass:"tablaCuerpo"},t._l(t.categorias,(function(e,o){return a("tr",{key:"objeto-"+o},[a("td",{domProps:{textContent:t._s(e.categoria)}}),a("td",{domProps:{textContent:t._s(e.cantidad)}}),a("td",{domProps:{textContent:t._s(e.totalCosto)}}),a("td",{domProps:{textContent:t._s(e.totalPrecio)}})])})),0)])]],2)],1)},Va=[],$a={data:function(){return{calendarioInicio:!1,fechaInicio:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),search:"",totalesCaja:[],categorias:[]}},created:function(){this.checkToken()},methods:{checkToken:function(){this.$store.state.token||"/"===this.$router.currentRoute.name||this.$router.push("/")},msjError:function(t){N.a.fire({position:"top",icon:"error",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:3e3})},msjExito:function(t){N.a.fire({position:"top",icon:"success",title:t,showConfirmButton:!1,backdrop:"rgba(55,55,55,0.8)",timer:2e3})},traerCategorias:function(){var t=this,e={headers:{token:this.$store.state.token}};V.a.get("informes/cantidadCategoria?fecha=".concat(this.fechaInicio),e).then((function(e){var a=e.data.resultado;0==a.list.length?t.msjExito("No hay ventas en ese dia"):t.limpiarDatos(e.data.resultado)})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},limpiarDatos:function(t){var e=[];t.list.map((function(a){var o=t[a].cantidad,r=t[a].totalPrecio,i=t[a].totalCosto;e.push({categoria:a,cantidad:o,totalPrecio:r,totalCosto:i})})),this.categorias=e,e=null},exportExcel:function(){var t=[],e=this;if(e.categorias.length>1e3)return this.msjError("Max. 1000 datos");e.categorias.map((function(e){t.push({categoria:e.categoria,cantidad:e.cantidad,totalCosto:e.totalCosto,totalPrecio:e.totalPrecio})}));var a=gt.a.utils.json_to_sheet(t),o=gt.a.utils.book_new(),r="categorias";gt.a.utils.book_append_sheet(o,a,r),gt.a.writeFile(o,"".concat(r,".xlsx"))},traerTotalesCaja:function(){var t=this,e={headers:{token:this.$store.state.token}};V.a.get("informes/saldoCaja?fecha=".concat(this.fechaInicio),e).then((function(e){t.totalesCaja=e.data.articulos,0==t.totalesCaja.length&&t.msjExito("No hay movimientos")})).catch((function(e){if(e.response.data.msg){var a=e.response.data.msg;t.msjError(a)}else{var o=e.response.data.errors[0].msg;t.msjError(o)}}))},exportExcel2:function(){var t=[],e=this;if(e.totalesCaja.length>1e3)return this.msjError("Max. 1000 datos");e.totalesCaja.map((function(e){t.push({tipoFactura:e._id,efectivo:e.efectivo,nequi:e.nequi,tarjeta:e.tarjeta,sistecredito:e.credito})}));var a=gt.a.utils.json_to_sheet(t),o=gt.a.utils.book_new(),r="totalesCaja";gt.a.utils.book_append_sheet(o,a,r),gt.a.writeFile(o,"".concat(r,".xlsx"))}},computed:{totalVendido:function(){return this.categorias.reduce((function(t,e){return t+parseInt(e.totalPrecio)}),0)},totalCosto:function(){return this.categorias.reduce((function(t,e){return t+parseInt(e.totalCosto)}),0)}}},Na=$a,za=(a("2c87"),Object(d["a"])(Na,Ta,Va,!1,null,"571ba643",null)),Pa=za.exports;m()(za,{VBtn:M["a"],VContainer:kt["a"],VDatePicker:Qe["a"],VIcon:v["a"],VMenu:Ze["a"],VRow:H["a"],VSpacer:K["a"],VTextField:W["a"]});var qa=[{path:"/aaaa",component:Z},{path:"/",component:nt},{path:"/home",component:vt},{path:"/articulos",component:St},{path:"/categorias",component:Tt},{path:"/marcas",component:qt},{path:"/separadas",component:Lt},{path:"/proveedores",component:Jt},{path:"/clientes",component:re},{path:"/usuarios",component:ue},{path:"/configuraciones",component:xe},{path:"/facturacion",component:we},{path:"/crearSalida",component:De},{path:"/crearCompra",component:Ne},{path:"/movimientos",component:Oe},{path:"/movimientos/infoVentas",component:Ke},{path:"/movimientos/infoSalidas",component:ea},{path:"/movimientos/infoCompras",component:na},{path:"/ventas/vAbonos",component:pa},{path:"/ventas/vDebitos",component:ba},{path:"/ventas/vFactura",component:ya},{path:"/ventas/vVentas",component:Aa},{path:"/informes",component:Pa}],Ma=a("f309");o["a"].use(Ma["a"]);var Ra=new Ma["a"]({}),Oa=a("2f62");o["a"].use(Oa["a"]);var Ba=new Oa["a"].Store({state:{token:"",rol:"",id:"",nombreUser:""},mutations:{setToken:function(t,e){t.token=e},setRol:function(t,e){t.rol=e},setId:function(t,e){t.id=e},setNameUser:function(t,e){t.nombreUser=e}},actions:{setToken:function(t,e){t.commit("setToken",e)},setRol:function(t,e){t.commit("setRol",e)},setId:function(t,e){t.commit("setId",e)},setNameUser:function(t,e){t.commit("setNameUser",e)}}}),Ua=a("f2d9"),La=new o["a"];o["a"].component("downloadExcel",Ua["a"]),o["a"].use(D["a"]),o["a"].config.productionTip=!1,V.a.defaults.baseURL="/api";var Ga=new D["a"]({routes:qa,mode:"history"});new o["a"]({render:function(t){return t(I)},axios:V.a,vuetify:Ra,router:Ga,store:Ba,Swal:N.a,XLSX:gt.a}).$mount("#app")},"58ad":function(t,e,a){},"5caf":function(t,e,a){"use strict";a("9643")},"64d7":function(t,e,a){},"6e17":function(t,e,a){},"7e3c":function(t,e,a){},8170:function(t,e,a){},"85ec":function(t,e,a){},"893c":function(t,e,a){"use strict";a("f9c1")},"8d23":function(t,e,a){"use strict";a("4738")},"91ae":function(t,e,a){"use strict";a("58ad")},9643:function(t,e,a){},9824:function(t,e,a){"use strict";a("8170")},"98dc":function(t,e,a){"use strict";a("1923")},9973:function(t,e,a){},"9ec5":function(t,e,a){"use strict";a("7e3c")},a098:function(t,e,a){"use strict";a("64d7")},a2936:function(t,e,a){"use strict";a("6e17")},b3e7:function(t,e,a){"use strict";a("4489")},b5ed:function(t,e,a){},be28:function(t,e,a){},d012b:function(t,e,a){t.exports=a.p+"img/logoStore.9223a3d6.jpg"},e785:function(t,e,a){"use strict";a("1f23")},e84c:function(t,e,a){},eb82:function(t,e,a){"use strict";a("be28")},eb8f:function(t,e,a){},eca3:function(t,e,a){"use strict";a("b5ed")},f9c1:function(t,e,a){}});
//# sourceMappingURL=app.c690c9e5.js.map